var Ar=Object.defineProperty,kr=Object.defineProperties;var Mr=Object.getOwnPropertyDescriptors;var _r=Object.getOwnPropertySymbols;var Rr=Object.prototype.hasOwnProperty,Tr=Object.prototype.propertyIsEnumerable;var dr=(X,Z,J)=>Z in X?Ar(X,Z,{enumerable:!0,configurable:!0,writable:!0,value:J}):X[Z]=J,pr=(X,Z)=>{for(var J in Z||(Z={}))Rr.call(Z,J)&&dr(X,J,Z[J]);if(_r)for(var J of _r(Z))Tr.call(Z,J)&&dr(X,J,Z[J]);return X},vr=(X,Z)=>kr(X,Mr(Z));import{e as Be,W as Br,X as Dr,Y as Or,a5 as gr,j as le,a4 as Pr,m as Ir,i as Hr,f as Fr,d as cr,k as yr}from"./vendor.3adfed64.js";import{d as jr}from"./Link.934e8215.js";import{O as Wr,a as Ur,S as qr}from"./OmsMenuItem.851b2a4d.js";import{O as Nr}from"./index.6968175b.js";import{b as zr}from"./url.3ef8f631.js";import{b as Kr}from"./MenuItem.fff0d7f8.js";import"./Typography.3f3c5a2b.js";var lr={},Vr=Dr.exports,Gr=Or.exports;Object.defineProperty(lr,"__esModule",{value:!0});var mr=lr.default=void 0,Xr=Gr(Be.exports),Yr=Vr(Br),Zr=(0,Yr.default)(Xr.createElement("path",{d:"M17 7h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.43-.98 2.63-2.31 2.98l1.46 1.46C20.88 15.61 22 13.95 22 12c0-2.76-2.24-5-5-5zm-1 4h-2.19l2 2H16zM2 4.27l3.11 3.11C3.29 8.12 2 9.91 2 12c0 2.76 2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1 0-1.59 1.21-2.9 2.76-3.07L8.73 11H8v2h2.73L13 15.27V17h1.73l4.01 4L20 19.74 3.27 3 2 4.27z"}),"LinkOff");mr=lr.default=Zr;var Sr={exports:{}};(function(X,Z){(function(J,Y){X.exports=Y()})(self,function(){return(()=>{var J={4567:function(P,s,v){var l,_=this&&this.__extends||(l=function(t,e){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])},l(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}l(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(s,"__esModule",{value:!0}),s.AccessibilityManager=void 0;var f=v(9042),u=v(6114),S=v(9924),d=v(3656),i=v(844),a=v(5596),h=v(9631),n=function(t){function e(r,o){var c=t.call(this)||this;c._terminal=r,c._renderService=o,c._liveRegionLineCount=0,c._charsToConsume=[],c._charsToAnnounce="",c._accessibilityTreeRoot=document.createElement("div"),c._accessibilityTreeRoot.setAttribute("role","document"),c._accessibilityTreeRoot.classList.add("xterm-accessibility"),c._rowContainer=document.createElement("div"),c._rowContainer.setAttribute("role","list"),c._rowContainer.classList.add("xterm-accessibility-tree"),c._rowElements=[];for(var p=0;p<c._terminal.rows;p++)c._rowElements[p]=c._createAccessibilityTreeNode(),c._rowContainer.appendChild(c._rowElements[p]);if(c._topBoundaryFocusListener=function(g){return c._onBoundaryFocus(g,0)},c._bottomBoundaryFocusListener=function(g){return c._onBoundaryFocus(g,1)},c._rowElements[0].addEventListener("focus",c._topBoundaryFocusListener),c._rowElements[c._rowElements.length-1].addEventListener("focus",c._bottomBoundaryFocusListener),c._refreshRowsDimensions(),c._accessibilityTreeRoot.appendChild(c._rowContainer),c._renderRowsDebouncer=new S.TimeBasedDebouncer(c._renderRows.bind(c)),c._refreshRows(),c._liveRegion=document.createElement("div"),c._liveRegion.classList.add("live-region"),c._liveRegion.setAttribute("aria-live","assertive"),c._accessibilityTreeRoot.appendChild(c._liveRegion),!c._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");return c._terminal.element.insertAdjacentElement("afterbegin",c._accessibilityTreeRoot),c.register(c._renderRowsDebouncer),c.register(c._terminal.onResize(function(g){return c._onResize(g.rows)})),c.register(c._terminal.onRender(function(g){return c._refreshRows(g.start,g.end)})),c.register(c._terminal.onScroll(function(){return c._refreshRows()})),c.register(c._terminal.onA11yChar(function(g){return c._onChar(g)})),c.register(c._terminal.onLineFeed(function(){return c._onChar(`
`)})),c.register(c._terminal.onA11yTab(function(g){return c._onTab(g)})),c.register(c._terminal.onKey(function(g){return c._onKey(g.key)})),c.register(c._terminal.onBlur(function(){return c._clearLiveRegion()})),c.register(c._renderService.onDimensionsChange(function(){return c._refreshRowsDimensions()})),c._screenDprMonitor=new a.ScreenDprMonitor,c.register(c._screenDprMonitor),c._screenDprMonitor.setListener(function(){return c._refreshRowsDimensions()}),c.register((0,d.addDisposableDomListener)(window,"resize",function(){return c._refreshRowsDimensions()})),c}return _(e,t),e.prototype.dispose=function(){t.prototype.dispose.call(this),(0,h.removeElementFromParent)(this._accessibilityTreeRoot),this._rowElements.length=0},e.prototype._onBoundaryFocus=function(r,o){var c=r.target,p=this._rowElements[o===0?1:this._rowElements.length-2];if(c.getAttribute("aria-posinset")!==(o===0?"1":""+this._terminal.buffer.lines.length)&&r.relatedTarget===p){var g,C;if(o===0?(g=c,C=this._rowElements.pop(),this._rowContainer.removeChild(C)):(g=this._rowElements.shift(),C=c,this._rowContainer.removeChild(g)),g.removeEventListener("focus",this._topBoundaryFocusListener),C.removeEventListener("focus",this._bottomBoundaryFocusListener),o===0){var b=this._createAccessibilityTreeNode();this._rowElements.unshift(b),this._rowContainer.insertAdjacentElement("afterbegin",b)}else b=this._createAccessibilityTreeNode(),this._rowElements.push(b),this._rowContainer.appendChild(b);this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(o===0?-1:1),this._rowElements[o===0?1:this._rowElements.length-2].focus(),r.preventDefault(),r.stopImmediatePropagation()}},e.prototype._onResize=function(r){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(var o=this._rowContainer.children.length;o<this._terminal.rows;o++)this._rowElements[o]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[o]);for(;this._rowElements.length>r;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()},e.prototype._createAccessibilityTreeNode=function(){var r=document.createElement("div");return r.setAttribute("role","listitem"),r.tabIndex=-1,this._refreshRowDimensions(r),r},e.prototype._onTab=function(r){for(var o=0;o<r;o++)this._onChar(" ")},e.prototype._onChar=function(r){var o=this;this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==r&&(this._charsToAnnounce+=r):this._charsToAnnounce+=r,r===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=f.tooMuchOutput)),u.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(function(){o._accessibilityTreeRoot.appendChild(o._liveRegion)},0))},e.prototype._clearLiveRegion=function(){this._liveRegion.textContent="",this._liveRegionLineCount=0,u.isMac&&(0,h.removeElementFromParent)(this._liveRegion)},e.prototype._onKey=function(r){this._clearLiveRegion(),this._charsToConsume.push(r)},e.prototype._refreshRows=function(r,o){this._renderRowsDebouncer.refresh(r,o,this._terminal.rows)},e.prototype._renderRows=function(r,o){for(var c=this._terminal.buffer,p=c.lines.length.toString(),g=r;g<=o;g++){var C=c.translateBufferLineToString(c.ydisp+g,!0),b=(c.ydisp+g+1).toString(),y=this._rowElements[g];y&&(C.length===0?y.innerText="\xA0":y.textContent=C,y.setAttribute("aria-posinset",b),y.setAttribute("aria-setsize",p))}this._announceCharacters()},e.prototype._refreshRowsDimensions=function(){if(this._renderService.dimensions.actualCellHeight){this._rowElements.length!==this._terminal.rows&&this._onResize(this._terminal.rows);for(var r=0;r<this._terminal.rows;r++)this._refreshRowDimensions(this._rowElements[r])}},e.prototype._refreshRowDimensions=function(r){r.style.height=this._renderService.dimensions.actualCellHeight+"px"},e.prototype._announceCharacters=function(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")},e}(i.Disposable);s.AccessibilityManager=n},3614:(P,s)=>{function v(u){return u.replace(/\r?\n/g,"\r")}function l(u,S){return S?"[200~"+u+"[201~":u}function _(u,S,d){u=l(u=v(u),d.decPrivateModes.bracketedPasteMode),d.triggerDataEvent(u,!0),S.value=""}function f(u,S,d){var i=d.getBoundingClientRect(),a=u.clientX-i.left-10,h=u.clientY-i.top-10;S.style.width="20px",S.style.height="20px",S.style.left=a+"px",S.style.top=h+"px",S.style.zIndex="1000",S.focus()}Object.defineProperty(s,"__esModule",{value:!0}),s.rightClickHandler=s.moveTextAreaUnderMouseCursor=s.paste=s.handlePasteEvent=s.copyHandler=s.bracketTextForPaste=s.prepareTextForTerminal=void 0,s.prepareTextForTerminal=v,s.bracketTextForPaste=l,s.copyHandler=function(u,S){u.clipboardData&&u.clipboardData.setData("text/plain",S.selectionText),u.preventDefault()},s.handlePasteEvent=function(u,S,d){u.stopPropagation(),u.clipboardData&&_(u.clipboardData.getData("text/plain"),S,d)},s.paste=_,s.moveTextAreaUnderMouseCursor=f,s.rightClickHandler=function(u,S,d,i,a){f(u,S,d),a&&i.rightClickSelect(u),S.value=i.selectionText,S.select()}},4774:(P,s)=>{var v,l,_,f;function u(d){var i=d.toString(16);return i.length<2?"0"+i:i}function S(d,i){return d<i?(i+.05)/(d+.05):(d+.05)/(i+.05)}Object.defineProperty(s,"__esModule",{value:!0}),s.contrastRatio=s.toPaddedHex=s.rgba=s.rgb=s.css=s.color=s.channels=void 0,function(d){d.toCss=function(i,a,h,n){return n!==void 0?"#"+u(i)+u(a)+u(h)+u(n):"#"+u(i)+u(a)+u(h)},d.toRgba=function(i,a,h,n){return n===void 0&&(n=255),(i<<24|a<<16|h<<8|n)>>>0}}(v=s.channels||(s.channels={})),(l=s.color||(s.color={})).blend=function(d,i){var a=(255&i.rgba)/255;if(a===1)return{css:i.css,rgba:i.rgba};var h=i.rgba>>24&255,n=i.rgba>>16&255,t=i.rgba>>8&255,e=d.rgba>>24&255,r=d.rgba>>16&255,o=d.rgba>>8&255,c=e+Math.round((h-e)*a),p=r+Math.round((n-r)*a),g=o+Math.round((t-o)*a);return{css:v.toCss(c,p,g),rgba:v.toRgba(c,p,g)}},l.isOpaque=function(d){return(255&d.rgba)==255},l.ensureContrastRatio=function(d,i,a){var h=f.ensureContrastRatio(d.rgba,i.rgba,a);if(h)return f.toColor(h>>24&255,h>>16&255,h>>8&255)},l.opaque=function(d){var i=(255|d.rgba)>>>0,a=f.toChannels(i),h=a[0],n=a[1],t=a[2];return{css:v.toCss(h,n,t),rgba:i}},l.opacity=function(d,i){var a=Math.round(255*i),h=f.toChannels(d.rgba),n=h[0],t=h[1],e=h[2];return{css:v.toCss(n,t,e,a),rgba:v.toRgba(n,t,e,a)}},(s.css||(s.css={})).toColor=function(d){switch(d.length){case 7:return{css:d,rgba:(parseInt(d.slice(1),16)<<8|255)>>>0};case 9:return{css:d,rgba:parseInt(d.slice(1),16)>>>0}}throw new Error("css.toColor: Unsupported css format")},function(d){function i(a,h,n){var t=a/255,e=h/255,r=n/255;return .2126*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.7152*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.0722*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))}d.relativeLuminance=function(a){return i(a>>16&255,a>>8&255,255&a)},d.relativeLuminance2=i}(_=s.rgb||(s.rgb={})),function(d){function i(h,n,t){for(var e=h>>24&255,r=h>>16&255,o=h>>8&255,c=n>>24&255,p=n>>16&255,g=n>>8&255,C=S(_.relativeLuminance2(c,g,p),_.relativeLuminance2(e,r,o));C<t&&(c>0||p>0||g>0);)c-=Math.max(0,Math.ceil(.1*c)),p-=Math.max(0,Math.ceil(.1*p)),g-=Math.max(0,Math.ceil(.1*g)),C=S(_.relativeLuminance2(c,g,p),_.relativeLuminance2(e,r,o));return(c<<24|p<<16|g<<8|255)>>>0}function a(h,n,t){for(var e=h>>24&255,r=h>>16&255,o=h>>8&255,c=n>>24&255,p=n>>16&255,g=n>>8&255,C=S(_.relativeLuminance2(c,g,p),_.relativeLuminance2(e,r,o));C<t&&(c<255||p<255||g<255);)c=Math.min(255,c+Math.ceil(.1*(255-c))),p=Math.min(255,p+Math.ceil(.1*(255-p))),g=Math.min(255,g+Math.ceil(.1*(255-g))),C=S(_.relativeLuminance2(c,g,p),_.relativeLuminance2(e,r,o));return(c<<24|p<<16|g<<8|255)>>>0}d.ensureContrastRatio=function(h,n,t){var e=_.relativeLuminance(h>>8),r=_.relativeLuminance(n>>8);if(S(e,r)<t)return r<e?i(h,n,t):a(h,n,t)},d.reduceLuminance=i,d.increaseLuminance=a,d.toChannels=function(h){return[h>>24&255,h>>16&255,h>>8&255,255&h]},d.toColor=function(h,n,t){return{css:v.toCss(h,n,t),rgba:v.toRgba(h,n,t)}}}(f=s.rgba||(s.rgba={})),s.toPaddedHex=u,s.contrastRatio=S},7239:(P,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorContrastCache=void 0;var v=function(){function l(){this._color={},this._rgba={}}return l.prototype.clear=function(){this._color={},this._rgba={}},l.prototype.setCss=function(_,f,u){this._rgba[_]||(this._rgba[_]={}),this._rgba[_][f]=u},l.prototype.getCss=function(_,f){return this._rgba[_]?this._rgba[_][f]:void 0},l.prototype.setColor=function(_,f,u){this._color[_]||(this._color[_]={}),this._color[_][f]=u},l.prototype.getColor=function(_,f){return this._color[_]?this._color[_][f]:void 0},l}();s.ColorContrastCache=v},5680:(P,s,v)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorManager=s.DEFAULT_ANSI_COLORS=void 0;var l=v(4774),_=v(7239),f=l.css.toColor("#ffffff"),u=l.css.toColor("#000000"),S=l.css.toColor("#ffffff"),d=l.css.toColor("#000000"),i={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};s.DEFAULT_ANSI_COLORS=Object.freeze(function(){for(var h=[l.css.toColor("#2e3436"),l.css.toColor("#cc0000"),l.css.toColor("#4e9a06"),l.css.toColor("#c4a000"),l.css.toColor("#3465a4"),l.css.toColor("#75507b"),l.css.toColor("#06989a"),l.css.toColor("#d3d7cf"),l.css.toColor("#555753"),l.css.toColor("#ef2929"),l.css.toColor("#8ae234"),l.css.toColor("#fce94f"),l.css.toColor("#729fcf"),l.css.toColor("#ad7fa8"),l.css.toColor("#34e2e2"),l.css.toColor("#eeeeec")],n=[0,95,135,175,215,255],t=0;t<216;t++){var e=n[t/36%6|0],r=n[t/6%6|0],o=n[t%6];h.push({css:l.channels.toCss(e,r,o),rgba:l.channels.toRgba(e,r,o)})}for(t=0;t<24;t++){var c=8+10*t;h.push({css:l.channels.toCss(c,c,c),rgba:l.channels.toRgba(c,c,c)})}return h}());var a=function(){function h(n,t){this.allowTransparency=t;var e=n.createElement("canvas");e.width=1,e.height=1;var r=e.getContext("2d");if(!r)throw new Error("Could not get rendering context");this._ctx=r,this._ctx.globalCompositeOperation="copy",this._litmusColor=this._ctx.createLinearGradient(0,0,1,1),this._contrastCache=new _.ColorContrastCache,this.colors={foreground:f,background:u,cursor:S,cursorAccent:d,selectionTransparent:i,selectionOpaque:l.color.blend(u,i),ansi:s.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache}}return h.prototype.onOptionsChange=function(n){n==="minimumContrastRatio"&&this._contrastCache.clear()},h.prototype.setTheme=function(n){n===void 0&&(n={}),this.colors.foreground=this._parseColor(n.foreground,f),this.colors.background=this._parseColor(n.background,u),this.colors.cursor=this._parseColor(n.cursor,S,!0),this.colors.cursorAccent=this._parseColor(n.cursorAccent,d,!0),this.colors.selectionTransparent=this._parseColor(n.selection,i,!0),this.colors.selectionOpaque=l.color.blend(this.colors.background,this.colors.selectionTransparent),l.color.isOpaque(this.colors.selectionTransparent)&&(this.colors.selectionTransparent=l.color.opacity(this.colors.selectionTransparent,.3)),this.colors.ansi[0]=this._parseColor(n.black,s.DEFAULT_ANSI_COLORS[0]),this.colors.ansi[1]=this._parseColor(n.red,s.DEFAULT_ANSI_COLORS[1]),this.colors.ansi[2]=this._parseColor(n.green,s.DEFAULT_ANSI_COLORS[2]),this.colors.ansi[3]=this._parseColor(n.yellow,s.DEFAULT_ANSI_COLORS[3]),this.colors.ansi[4]=this._parseColor(n.blue,s.DEFAULT_ANSI_COLORS[4]),this.colors.ansi[5]=this._parseColor(n.magenta,s.DEFAULT_ANSI_COLORS[5]),this.colors.ansi[6]=this._parseColor(n.cyan,s.DEFAULT_ANSI_COLORS[6]),this.colors.ansi[7]=this._parseColor(n.white,s.DEFAULT_ANSI_COLORS[7]),this.colors.ansi[8]=this._parseColor(n.brightBlack,s.DEFAULT_ANSI_COLORS[8]),this.colors.ansi[9]=this._parseColor(n.brightRed,s.DEFAULT_ANSI_COLORS[9]),this.colors.ansi[10]=this._parseColor(n.brightGreen,s.DEFAULT_ANSI_COLORS[10]),this.colors.ansi[11]=this._parseColor(n.brightYellow,s.DEFAULT_ANSI_COLORS[11]),this.colors.ansi[12]=this._parseColor(n.brightBlue,s.DEFAULT_ANSI_COLORS[12]),this.colors.ansi[13]=this._parseColor(n.brightMagenta,s.DEFAULT_ANSI_COLORS[13]),this.colors.ansi[14]=this._parseColor(n.brightCyan,s.DEFAULT_ANSI_COLORS[14]),this.colors.ansi[15]=this._parseColor(n.brightWhite,s.DEFAULT_ANSI_COLORS[15]),this._contrastCache.clear()},h.prototype._parseColor=function(n,t,e){if(e===void 0&&(e=this.allowTransparency),n===void 0)return t;if(this._ctx.fillStyle=this._litmusColor,this._ctx.fillStyle=n,typeof this._ctx.fillStyle!="string")return console.warn("Color: "+n+" is invalid using fallback "+t.css),t;this._ctx.fillRect(0,0,1,1);var r=this._ctx.getImageData(0,0,1,1).data;if(r[3]!==255){if(!e)return console.warn("Color: "+n+" is using transparency, but allowTransparency is false. Using fallback "+t.css+"."),t;var o=this._ctx.fillStyle.substring(5,this._ctx.fillStyle.length-1).split(",").map(function(y){return Number(y)}),c=o[0],p=o[1],g=o[2],C=o[3],b=Math.round(255*C);return{rgba:l.channels.toRgba(c,p,g,b),css:n}}return{css:this._ctx.fillStyle,rgba:l.channels.toRgba(r[0],r[1],r[2],r[3])}},h}();s.ColorManager=a},9631:(P,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.removeElementFromParent=void 0,s.removeElementFromParent=function(){for(var v,l=[],_=0;_<arguments.length;_++)l[_]=arguments[_];for(var f=0,u=l;f<u.length;f++){var S=u[f];(v=S==null?void 0:S.parentElement)===null||v===void 0||v.removeChild(S)}}},3656:(P,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.addDisposableDomListener=void 0,s.addDisposableDomListener=function(v,l,_,f){v.addEventListener(l,_,f);var u=!1;return{dispose:function(){u||(u=!0,v.removeEventListener(l,_,f))}}}},3551:function(P,s,v){var l=this&&this.__decorate||function(i,a,h,n){var t,e=arguments.length,r=e<3?a:n===null?n=Object.getOwnPropertyDescriptor(a,h):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,a,h,n);else for(var o=i.length-1;o>=0;o--)(t=i[o])&&(r=(e<3?t(r):e>3?t(a,h,r):t(a,h))||r);return e>3&&r&&Object.defineProperty(a,h,r),r},_=this&&this.__param||function(i,a){return function(h,n){a(h,n,i)}};Object.defineProperty(s,"__esModule",{value:!0}),s.MouseZone=s.Linkifier=void 0;var f=v(8460),u=v(2585),S=function(){function i(a,h,n){this._bufferService=a,this._logService=h,this._unicodeService=n,this._linkMatchers=[],this._nextLinkMatcherId=0,this._onShowLinkUnderline=new f.EventEmitter,this._onHideLinkUnderline=new f.EventEmitter,this._onLinkTooltip=new f.EventEmitter,this._rowsToLinkify={start:void 0,end:void 0}}return Object.defineProperty(i.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onLinkTooltip",{get:function(){return this._onLinkTooltip.event},enumerable:!1,configurable:!0}),i.prototype.attachToDom=function(a,h){this._element=a,this._mouseZoneManager=h},i.prototype.linkifyRows=function(a,h){var n=this;this._mouseZoneManager&&(this._rowsToLinkify.start===void 0||this._rowsToLinkify.end===void 0?(this._rowsToLinkify.start=a,this._rowsToLinkify.end=h):(this._rowsToLinkify.start=Math.min(this._rowsToLinkify.start,a),this._rowsToLinkify.end=Math.max(this._rowsToLinkify.end,h)),this._mouseZoneManager.clearAll(a,h),this._rowsTimeoutId&&clearTimeout(this._rowsTimeoutId),this._rowsTimeoutId=setTimeout(function(){return n._linkifyRows()},i._timeBeforeLatency))},i.prototype._linkifyRows=function(){this._rowsTimeoutId=void 0;var a=this._bufferService.buffer;if(this._rowsToLinkify.start!==void 0&&this._rowsToLinkify.end!==void 0){var h=a.ydisp+this._rowsToLinkify.start;if(!(h>=a.lines.length)){for(var n=a.ydisp+Math.min(this._rowsToLinkify.end,this._bufferService.rows)+1,t=Math.ceil(2e3/this._bufferService.cols),e=this._bufferService.buffer.iterator(!1,h,n,t,t);e.hasNext();)for(var r=e.next(),o=0;o<this._linkMatchers.length;o++)this._doLinkifyRow(r.range.first,r.content,this._linkMatchers[o]);this._rowsToLinkify.start=void 0,this._rowsToLinkify.end=void 0}}else this._logService.debug("_rowToLinkify was unset before _linkifyRows was called")},i.prototype.registerLinkMatcher=function(a,h,n){if(n===void 0&&(n={}),!h)throw new Error("handler must be defined");var t={id:this._nextLinkMatcherId++,regex:a,handler:h,matchIndex:n.matchIndex,validationCallback:n.validationCallback,hoverTooltipCallback:n.tooltipCallback,hoverLeaveCallback:n.leaveCallback,willLinkActivate:n.willLinkActivate,priority:n.priority||0};return this._addLinkMatcherToList(t),t.id},i.prototype._addLinkMatcherToList=function(a){if(this._linkMatchers.length!==0){for(var h=this._linkMatchers.length-1;h>=0;h--)if(a.priority<=this._linkMatchers[h].priority)return void this._linkMatchers.splice(h+1,0,a);this._linkMatchers.splice(0,0,a)}else this._linkMatchers.push(a)},i.prototype.deregisterLinkMatcher=function(a){for(var h=0;h<this._linkMatchers.length;h++)if(this._linkMatchers[h].id===a)return this._linkMatchers.splice(h,1),!0;return!1},i.prototype._doLinkifyRow=function(a,h,n){for(var t,e=this,r=new RegExp(n.regex.source,(n.regex.flags||"")+"g"),o=-1,c=function(){var g=t[typeof n.matchIndex!="number"?0:n.matchIndex];if(!g)return p._logService.debug("match found without corresponding matchIndex",t,n),"break";if(o=h.indexOf(g,o+1),r.lastIndex=o+g.length,o<0)return"break";var C=p._bufferService.buffer.stringIndexToBufferIndex(a,o);if(C[0]<0)return"break";var b=p._bufferService.buffer.lines.get(C[0]);if(!b)return"break";var y=b.getFg(C[1]),m=y?y>>9&511:void 0;n.validationCallback?n.validationCallback(g,function(k){e._rowsTimeoutId||k&&e._addLink(C[1],C[0]-e._bufferService.buffer.ydisp,g,n,m)}):p._addLink(C[1],C[0]-p._bufferService.buffer.ydisp,g,n,m)},p=this;(t=r.exec(h))!==null&&c()!=="break";);},i.prototype._addLink=function(a,h,n,t,e){var r=this;if(this._mouseZoneManager&&this._element){var o=this._unicodeService.getStringCellWidth(n),c=a%this._bufferService.cols,p=h+Math.floor(a/this._bufferService.cols),g=(c+o)%this._bufferService.cols,C=p+Math.floor((c+o)/this._bufferService.cols);g===0&&(g=this._bufferService.cols,C--),this._mouseZoneManager.add(new d(c+1,p+1,g+1,C+1,function(b){if(t.handler)return t.handler(b,n);var y=window.open();y?(y.opener=null,y.location.href=n):console.warn("Opening link blocked as opener could not be cleared")},function(){r._onShowLinkUnderline.fire(r._createLinkHoverEvent(c,p,g,C,e)),r._element.classList.add("xterm-cursor-pointer")},function(b){r._onLinkTooltip.fire(r._createLinkHoverEvent(c,p,g,C,e)),t.hoverTooltipCallback&&t.hoverTooltipCallback(b,n,{start:{x:c,y:p},end:{x:g,y:C}})},function(){r._onHideLinkUnderline.fire(r._createLinkHoverEvent(c,p,g,C,e)),r._element.classList.remove("xterm-cursor-pointer"),t.hoverLeaveCallback&&t.hoverLeaveCallback()},function(b){return!t.willLinkActivate||t.willLinkActivate(b,n)}))}},i.prototype._createLinkHoverEvent=function(a,h,n,t,e){return{x1:a,y1:h,x2:n,y2:t,cols:this._bufferService.cols,fg:e}},i._timeBeforeLatency=200,i=l([_(0,u.IBufferService),_(1,u.ILogService),_(2,u.IUnicodeService)],i)}();s.Linkifier=S;var d=function(i,a,h,n,t,e,r,o,c){this.x1=i,this.y1=a,this.x2=h,this.y2=n,this.clickCallback=t,this.hoverCallback=e,this.tooltipCallback=r,this.leaveCallback=o,this.willLinkActivate=c};s.MouseZone=d},6465:function(P,s,v){var l,_=this&&this.__extends||(l=function(n,t){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},l(n,t)},function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}l(n,t),n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}),f=this&&this.__decorate||function(n,t,e,r){var o,c=arguments.length,p=c<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(n,t,e,r);else for(var g=n.length-1;g>=0;g--)(o=n[g])&&(p=(c<3?o(p):c>3?o(t,e,p):o(t,e))||p);return c>3&&p&&Object.defineProperty(t,e,p),p},u=this&&this.__param||function(n,t){return function(e,r){t(e,r,n)}};Object.defineProperty(s,"__esModule",{value:!0}),s.Linkifier2=void 0;var S=v(2585),d=v(8460),i=v(844),a=v(3656),h=function(n){function t(e){var r=n.call(this)||this;return r._bufferService=e,r._linkProviders=[],r._linkCacheDisposables=[],r._isMouseOut=!0,r._activeLine=-1,r._onShowLinkUnderline=r.register(new d.EventEmitter),r._onHideLinkUnderline=r.register(new d.EventEmitter),r.register((0,i.getDisposeArrayDisposable)(r._linkCacheDisposables)),r}return _(t,n),Object.defineProperty(t.prototype,"currentLink",{get:function(){return this._currentLink},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),t.prototype.registerLinkProvider=function(e){var r=this;return this._linkProviders.push(e),{dispose:function(){var o=r._linkProviders.indexOf(e);o!==-1&&r._linkProviders.splice(o,1)}}},t.prototype.attachToDom=function(e,r,o){var c=this;this._element=e,this._mouseService=r,this._renderService=o,this.register((0,a.addDisposableDomListener)(this._element,"mouseleave",function(){c._isMouseOut=!0,c._clearCurrentLink()})),this.register((0,a.addDisposableDomListener)(this._element,"mousemove",this._onMouseMove.bind(this))),this.register((0,a.addDisposableDomListener)(this._element,"click",this._onClick.bind(this)))},t.prototype._onMouseMove=function(e){if(this._lastMouseEvent=e,this._element&&this._mouseService){var r=this._positionFromMouseEvent(e,this._element,this._mouseService);if(r){this._isMouseOut=!1;for(var o=e.composedPath(),c=0;c<o.length;c++){var p=o[c];if(p.classList.contains("xterm"))break;if(p.classList.contains("xterm-hover"))return}this._lastBufferCell&&r.x===this._lastBufferCell.x&&r.y===this._lastBufferCell.y||(this._onHover(r),this._lastBufferCell=r)}}},t.prototype._onHover=function(e){if(this._activeLine!==e.y)return this._clearCurrentLink(),void this._askForLink(e,!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,e)||(this._clearCurrentLink(),this._askForLink(e,!0))},t.prototype._askForLink=function(e,r){var o,c=this;this._activeProviderReplies&&r||((o=this._activeProviderReplies)===null||o===void 0||o.forEach(function(g){g==null||g.forEach(function(C){C.link.dispose&&C.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=e.y);var p=!1;this._linkProviders.forEach(function(g,C){var b;r?((b=c._activeProviderReplies)===null||b===void 0?void 0:b.get(C))&&(p=c._checkLinkProviderResult(C,e,p)):g.provideLinks(e.y,function(y){var m,k;if(!c._isMouseOut){var w=y==null?void 0:y.map(function(A){return{link:A}});(m=c._activeProviderReplies)===null||m===void 0||m.set(C,w),p=c._checkLinkProviderResult(C,e,p),((k=c._activeProviderReplies)===null||k===void 0?void 0:k.size)===c._linkProviders.length&&c._removeIntersectingLinks(e.y,c._activeProviderReplies)}})})},t.prototype._removeIntersectingLinks=function(e,r){for(var o=new Set,c=0;c<r.size;c++){var p=r.get(c);if(p)for(var g=0;g<p.length;g++)for(var C=p[g],b=C.link.range.start.y<e?0:C.link.range.start.x,y=C.link.range.end.y>e?this._bufferService.cols:C.link.range.end.x,m=b;m<=y;m++){if(o.has(m)){p.splice(g--,1);break}o.add(m)}}},t.prototype._checkLinkProviderResult=function(e,r,o){var c,p=this;if(!this._activeProviderReplies)return o;for(var g=this._activeProviderReplies.get(e),C=!1,b=0;b<e;b++)this._activeProviderReplies.has(b)&&!this._activeProviderReplies.get(b)||(C=!0);if(!C&&g){var y=g.find(function(k){return p._linkAtPosition(k.link,r)});y&&(o=!0,this._handleNewLink(y))}if(this._activeProviderReplies.size===this._linkProviders.length&&!o)for(b=0;b<this._activeProviderReplies.size;b++){var m=(c=this._activeProviderReplies.get(b))===null||c===void 0?void 0:c.find(function(k){return p._linkAtPosition(k.link,r)});if(m){o=!0,this._handleNewLink(m);break}}return o},t.prototype._onClick=function(e){if(this._element&&this._mouseService&&this._currentLink){var r=this._positionFromMouseEvent(e,this._element,this._mouseService);r&&this._linkAtPosition(this._currentLink.link,r)&&this._currentLink.link.activate(e,this._currentLink.link.text)}},t.prototype._clearCurrentLink=function(e,r){this._element&&this._currentLink&&this._lastMouseEvent&&(!e||!r||this._currentLink.link.range.start.y>=e&&this._currentLink.link.range.end.y<=r)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,i.disposeArray)(this._linkCacheDisposables))},t.prototype._handleNewLink=function(e){var r=this;if(this._element&&this._lastMouseEvent&&this._mouseService){var o=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);o&&this._linkAtPosition(e.link,o)&&(this._currentLink=e,this._currentLink.state={decorations:{underline:e.link.decorations===void 0||e.link.decorations.underline,pointerCursor:e.link.decorations===void 0||e.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,e.link,this._lastMouseEvent),e.link.decorations={},Object.defineProperties(e.link.decorations,{pointerCursor:{get:function(){var c,p;return(p=(c=r._currentLink)===null||c===void 0?void 0:c.state)===null||p===void 0?void 0:p.decorations.pointerCursor},set:function(c){var p,g;((p=r._currentLink)===null||p===void 0?void 0:p.state)&&r._currentLink.state.decorations.pointerCursor!==c&&(r._currentLink.state.decorations.pointerCursor=c,r._currentLink.state.isHovered&&((g=r._element)===null||g===void 0||g.classList.toggle("xterm-cursor-pointer",c)))}},underline:{get:function(){var c,p;return(p=(c=r._currentLink)===null||c===void 0?void 0:c.state)===null||p===void 0?void 0:p.decorations.underline},set:function(c){var p,g,C;((p=r._currentLink)===null||p===void 0?void 0:p.state)&&((C=(g=r._currentLink)===null||g===void 0?void 0:g.state)===null||C===void 0?void 0:C.decorations.underline)!==c&&(r._currentLink.state.decorations.underline=c,r._currentLink.state.isHovered&&r._fireUnderlineEvent(e.link,c))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedBufferChange(function(c){var p=c.start===0?0:c.start+1+r._bufferService.buffer.ydisp;r._clearCurrentLink(p,c.end+1+r._bufferService.buffer.ydisp)})))}},t.prototype._linkHover=function(e,r,o){var c;((c=this._currentLink)===null||c===void 0?void 0:c.state)&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(r,!0),this._currentLink.state.decorations.pointerCursor&&e.classList.add("xterm-cursor-pointer")),r.hover&&r.hover(o,r.text)},t.prototype._fireUnderlineEvent=function(e,r){var o=e.range,c=this._bufferService.buffer.ydisp,p=this._createLinkUnderlineEvent(o.start.x-1,o.start.y-c-1,o.end.x,o.end.y-c-1,void 0);(r?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(p)},t.prototype._linkLeave=function(e,r,o){var c;((c=this._currentLink)===null||c===void 0?void 0:c.state)&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(r,!1),this._currentLink.state.decorations.pointerCursor&&e.classList.remove("xterm-cursor-pointer")),r.leave&&r.leave(o,r.text)},t.prototype._linkAtPosition=function(e,r){var o=e.range.start.y===e.range.end.y,c=e.range.start.y<r.y,p=e.range.end.y>r.y;return(o&&e.range.start.x<=r.x&&e.range.end.x>=r.x||c&&e.range.end.x>=r.x||p&&e.range.start.x<=r.x||c&&p)&&e.range.start.y<=r.y&&e.range.end.y>=r.y},t.prototype._positionFromMouseEvent=function(e,r,o){var c=o.getCoords(e,r,this._bufferService.cols,this._bufferService.rows);if(c)return{x:c[0],y:c[1]+this._bufferService.buffer.ydisp}},t.prototype._createLinkUnderlineEvent=function(e,r,o,c,p){return{x1:e,y1:r,x2:o,y2:c,cols:this._bufferService.cols,fg:p}},f([u(0,S.IBufferService)],t)}(i.Disposable);s.Linkifier2=h},9042:(P,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.tooMuchOutput=s.promptLabel=void 0,s.promptLabel="Terminal input",s.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},6954:function(P,s,v){var l,_=this&&this.__extends||(l=function(n,t){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},l(n,t)},function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}l(n,t),n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}),f=this&&this.__decorate||function(n,t,e,r){var o,c=arguments.length,p=c<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(n,t,e,r);else for(var g=n.length-1;g>=0;g--)(o=n[g])&&(p=(c<3?o(p):c>3?o(t,e,p):o(t,e))||p);return c>3&&p&&Object.defineProperty(t,e,p),p},u=this&&this.__param||function(n,t){return function(e,r){t(e,r,n)}};Object.defineProperty(s,"__esModule",{value:!0}),s.MouseZoneManager=void 0;var S=v(844),d=v(3656),i=v(4725),a=v(2585),h=function(n){function t(e,r,o,c,p,g){var C=n.call(this)||this;return C._element=e,C._screenElement=r,C._bufferService=o,C._mouseService=c,C._selectionService=p,C._optionsService=g,C._zones=[],C._areZonesActive=!1,C._lastHoverCoords=[void 0,void 0],C._initialSelectionLength=0,C.register((0,d.addDisposableDomListener)(C._element,"mousedown",function(b){return C._onMouseDown(b)})),C._mouseMoveListener=function(b){return C._onMouseMove(b)},C._mouseLeaveListener=function(b){return C._onMouseLeave(b)},C._clickListener=function(b){return C._onClick(b)},C}return _(t,n),t.prototype.dispose=function(){n.prototype.dispose.call(this),this._deactivate()},t.prototype.add=function(e){this._zones.push(e),this._zones.length===1&&this._activate()},t.prototype.clearAll=function(e,r){if(this._zones.length!==0){e&&r||(e=0,r=this._bufferService.rows-1);for(var o=0;o<this._zones.length;o++){var c=this._zones[o];(c.y1>e&&c.y1<=r+1||c.y2>e&&c.y2<=r+1||c.y1<e&&c.y2>r+1)&&(this._currentZone&&this._currentZone===c&&(this._currentZone.leaveCallback(),this._currentZone=void 0),this._zones.splice(o--,1))}this._zones.length===0&&this._deactivate()}},t.prototype._activate=function(){this._areZonesActive||(this._areZonesActive=!0,this._element.addEventListener("mousemove",this._mouseMoveListener),this._element.addEventListener("mouseleave",this._mouseLeaveListener),this._element.addEventListener("click",this._clickListener))},t.prototype._deactivate=function(){this._areZonesActive&&(this._areZonesActive=!1,this._element.removeEventListener("mousemove",this._mouseMoveListener),this._element.removeEventListener("mouseleave",this._mouseLeaveListener),this._element.removeEventListener("click",this._clickListener))},t.prototype._onMouseMove=function(e){this._lastHoverCoords[0]===e.pageX&&this._lastHoverCoords[1]===e.pageY||(this._onHover(e),this._lastHoverCoords=[e.pageX,e.pageY])},t.prototype._onHover=function(e){var r=this,o=this._findZoneEventAt(e);o!==this._currentZone&&(this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout)),o&&(this._currentZone=o,o.hoverCallback&&o.hoverCallback(e),this._tooltipTimeout=window.setTimeout(function(){return r._onTooltip(e)},this._optionsService.options.linkTooltipHoverDuration)))},t.prototype._onTooltip=function(e){this._tooltipTimeout=void 0;var r=this._findZoneEventAt(e);r==null||r.tooltipCallback(e)},t.prototype._onMouseDown=function(e){if(this._initialSelectionLength=this._getSelectionLength(),this._areZonesActive){var r=this._findZoneEventAt(e);(r==null?void 0:r.willLinkActivate(e))&&(e.preventDefault(),e.stopImmediatePropagation())}},t.prototype._onMouseLeave=function(e){this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout))},t.prototype._onClick=function(e){var r=this._findZoneEventAt(e),o=this._getSelectionLength();r&&o===this._initialSelectionLength&&(r.clickCallback(e),e.preventDefault(),e.stopImmediatePropagation())},t.prototype._getSelectionLength=function(){var e=this._selectionService.selectionText;return e?e.length:0},t.prototype._findZoneEventAt=function(e){var r=this._mouseService.getCoords(e,this._screenElement,this._bufferService.cols,this._bufferService.rows);if(r)for(var o=r[0],c=r[1],p=0;p<this._zones.length;p++){var g=this._zones[p];if(g.y1===g.y2){if(c===g.y1&&o>=g.x1&&o<g.x2)return g}else if(c===g.y1&&o>=g.x1||c===g.y2&&o<g.x2||c>g.y1&&c<g.y2)return g}},f([u(2,a.IBufferService),u(3,i.IMouseService),u(4,i.ISelectionService),u(5,a.IOptionsService)],t)}(S.Disposable);s.MouseZoneManager=h},6193:(P,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.RenderDebouncer=void 0;var v=function(){function l(_){this._renderCallback=_}return l.prototype.dispose=function(){this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},l.prototype.refresh=function(_,f,u){var S=this;this._rowCount=u,_=_!==void 0?_:0,f=f!==void 0?f:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,_):_,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,f):f,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){return S._innerRefresh()}))},l.prototype._innerRefresh=function(){if(this._rowStart!==void 0&&this._rowEnd!==void 0&&this._rowCount!==void 0){var _=Math.max(this._rowStart,0),f=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._animationFrame=void 0,this._renderCallback(_,f)}},l}();s.RenderDebouncer=v},5596:function(P,s,v){var l,_=this&&this.__extends||(l=function(u,S){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,i){d.__proto__=i}||function(d,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(d[a]=i[a])},l(u,S)},function(u,S){if(typeof S!="function"&&S!==null)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");function d(){this.constructor=u}l(u,S),u.prototype=S===null?Object.create(S):(d.prototype=S.prototype,new d)});Object.defineProperty(s,"__esModule",{value:!0}),s.ScreenDprMonitor=void 0;var f=function(u){function S(){var d=u!==null&&u.apply(this,arguments)||this;return d._currentDevicePixelRatio=window.devicePixelRatio,d}return _(S,u),S.prototype.setListener=function(d){var i=this;this._listener&&this.clearListener(),this._listener=d,this._outerListener=function(){i._listener&&(i._listener(window.devicePixelRatio,i._currentDevicePixelRatio),i._updateDpr())},this._updateDpr()},S.prototype.dispose=function(){u.prototype.dispose.call(this),this.clearListener()},S.prototype._updateDpr=function(){var d;this._outerListener&&((d=this._resolutionMediaMatchList)===null||d===void 0||d.removeListener(this._outerListener),this._currentDevicePixelRatio=window.devicePixelRatio,this._resolutionMediaMatchList=window.matchMedia("screen and (resolution: "+window.devicePixelRatio+"dppx)"),this._resolutionMediaMatchList.addListener(this._outerListener))},S.prototype.clearListener=function(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)},S}(v(844).Disposable);s.ScreenDprMonitor=f},3236:function(P,s,v){var l,_=this&&this.__extends||(l=function(G,E){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,R){M.__proto__=R}||function(M,R){for(var H in R)Object.prototype.hasOwnProperty.call(R,H)&&(M[H]=R[H])},l(G,E)},function(G,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");function M(){this.constructor=G}l(G,E),G.prototype=E===null?Object.create(E):(M.prototype=E.prototype,new M)});Object.defineProperty(s,"__esModule",{value:!0}),s.Terminal=void 0;var f=v(2950),u=v(1680),S=v(3614),d=v(2584),i=v(5435),a=v(3525),h=v(3551),n=v(9312),t=v(6114),e=v(3656),r=v(9042),o=v(357),c=v(6954),p=v(4567),g=v(1296),C=v(7399),b=v(8460),y=v(8437),m=v(5680),k=v(3230),w=v(4725),A=v(428),x=v(8934),L=v(6465),D=v(5114),T=v(8969),j=v(4774),W=v(4269),F=typeof window!="undefined"?window.document:null,N=function(G){function E(M){M===void 0&&(M={});var R=G.call(this,M)||this;return R.browser=t,R._keyDownHandled=!1,R._keyPressHandled=!1,R._unprocessedDeadKey=!1,R._onCursorMove=new b.EventEmitter,R._onKey=new b.EventEmitter,R._onRender=new b.EventEmitter,R._onSelectionChange=new b.EventEmitter,R._onTitleChange=new b.EventEmitter,R._onBell=new b.EventEmitter,R._onFocus=new b.EventEmitter,R._onBlur=new b.EventEmitter,R._onA11yCharEmitter=new b.EventEmitter,R._onA11yTabEmitter=new b.EventEmitter,R._setup(),R.linkifier=R._instantiationService.createInstance(h.Linkifier),R.linkifier2=R.register(R._instantiationService.createInstance(L.Linkifier2)),R.register(R._inputHandler.onRequestBell(function(){return R.bell()})),R.register(R._inputHandler.onRequestRefreshRows(function(H,B){return R.refresh(H,B)})),R.register(R._inputHandler.onRequestSendFocus(function(){return R._reportFocus()})),R.register(R._inputHandler.onRequestReset(function(){return R.reset()})),R.register(R._inputHandler.onRequestWindowsOptionsReport(function(H){return R._reportWindowsOptions(H)})),R.register(R._inputHandler.onAnsiColorChange(function(H){return R._changeAnsiColor(H)})),R.register((0,b.forwardEvent)(R._inputHandler.onCursorMove,R._onCursorMove)),R.register((0,b.forwardEvent)(R._inputHandler.onTitleChange,R._onTitleChange)),R.register((0,b.forwardEvent)(R._inputHandler.onA11yChar,R._onA11yCharEmitter)),R.register((0,b.forwardEvent)(R._inputHandler.onA11yTab,R._onA11yTabEmitter)),R.register(R._bufferService.onResize(function(H){return R._afterResize(H.cols,H.rows)})),R}return _(E,G),Object.defineProperty(E.prototype,"options",{get:function(){return this.optionsService.options},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"onKey",{get:function(){return this._onKey.event},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"onBell",{get:function(){return this._onBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"onFocus",{get:function(){return this._onFocus.event},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"onBlur",{get:function(){return this._onBlur.event},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"onA11yChar",{get:function(){return this._onA11yCharEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"onA11yTab",{get:function(){return this._onA11yTabEmitter.event},enumerable:!1,configurable:!0}),E.prototype._changeAnsiColor=function(M){var R,H;if(this._colorManager){for(var B=0,q=M.colors;B<q.length;B++){var z=q[B],te=j.rgba.toColor(z.red,z.green,z.blue);this._colorManager.colors.ansi[z.colorIndex]=te}(R=this._renderService)===null||R===void 0||R.setColors(this._colorManager.colors),(H=this.viewport)===null||H===void 0||H.onThemeChange(this._colorManager.colors)}},E.prototype.dispose=function(){var M,R,H;this._isDisposed||(G.prototype.dispose.call(this),(M=this._renderService)===null||M===void 0||M.dispose(),this._customKeyEventHandler=void 0,this.write=function(){},(H=(R=this.element)===null||R===void 0?void 0:R.parentNode)===null||H===void 0||H.removeChild(this.element))},E.prototype._setup=function(){G.prototype._setup.call(this),this._customKeyEventHandler=void 0},Object.defineProperty(E.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),E.prototype.focus=function(){this.textarea&&this.textarea.focus({preventScroll:!0})},E.prototype._updateOptions=function(M){var R,H,B,q;switch(G.prototype._updateOptions.call(this,M),M){case"fontFamily":case"fontSize":(R=this._renderService)===null||R===void 0||R.clear(),(H=this._charSizeService)===null||H===void 0||H.measure();break;case"cursorBlink":case"cursorStyle":this.refresh(this.buffer.y,this.buffer.y);break;case"customGlyphs":case"drawBoldTextInBrightColors":case"letterSpacing":case"lineHeight":case"fontWeight":case"fontWeightBold":case"minimumContrastRatio":this._renderService&&(this._renderService.clear(),this._renderService.onResize(this.cols,this.rows),this.refresh(0,this.rows-1));break;case"rendererType":this._renderService&&(this._renderService.setRenderer(this._createRenderer()),this._renderService.onResize(this.cols,this.rows));break;case"scrollback":(B=this.viewport)===null||B===void 0||B.syncScrollArea();break;case"screenReaderMode":this.optionsService.options.screenReaderMode?!this._accessibilityManager&&this._renderService&&(this._accessibilityManager=new p.AccessibilityManager(this,this._renderService)):((q=this._accessibilityManager)===null||q===void 0||q.dispose(),this._accessibilityManager=void 0);break;case"tabStopWidth":this.buffers.setupTabStops();break;case"theme":this._setTheme(this.optionsService.options.theme)}},E.prototype._onTextAreaFocus=function(M){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(d.C0.ESC+"[I"),this.updateCursorStyle(M),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()},E.prototype.blur=function(){var M;return(M=this.textarea)===null||M===void 0?void 0:M.blur()},E.prototype._onTextAreaBlur=function(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(d.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()},E.prototype._syncTextArea=function(){if(this.textarea&&this.buffer.isCursorInViewport&&!this._compositionHelper.isComposing&&this._renderService){var M=this.buffer.ybase+this.buffer.y,R=this.buffer.lines.get(M);if(R){var H=Math.min(this.buffer.x,this.cols-1),B=this._renderService.dimensions.actualCellHeight,q=R.getWidth(H),z=this._renderService.dimensions.actualCellWidth*q,te=this.buffer.y*this._renderService.dimensions.actualCellHeight,re=H*this._renderService.dimensions.actualCellWidth;this.textarea.style.left=re+"px",this.textarea.style.top=te+"px",this.textarea.style.width=z+"px",this.textarea.style.height=B+"px",this.textarea.style.lineHeight=B+"px",this.textarea.style.zIndex="-5"}}},E.prototype._initGlobal=function(){var M=this;this._bindKeys(),this.register((0,e.addDisposableDomListener)(this.element,"copy",function(H){M.hasSelection()&&(0,S.copyHandler)(H,M._selectionService)}));var R=function(H){return(0,S.handlePasteEvent)(H,M.textarea,M.coreService)};this.register((0,e.addDisposableDomListener)(this.textarea,"paste",R)),this.register((0,e.addDisposableDomListener)(this.element,"paste",R)),t.isFirefox?this.register((0,e.addDisposableDomListener)(this.element,"mousedown",function(H){H.button===2&&(0,S.rightClickHandler)(H,M.textarea,M.screenElement,M._selectionService,M.options.rightClickSelectsWord)})):this.register((0,e.addDisposableDomListener)(this.element,"contextmenu",function(H){(0,S.rightClickHandler)(H,M.textarea,M.screenElement,M._selectionService,M.options.rightClickSelectsWord)})),t.isLinux&&this.register((0,e.addDisposableDomListener)(this.element,"auxclick",function(H){H.button===1&&(0,S.moveTextAreaUnderMouseCursor)(H,M.textarea,M.screenElement)}))},E.prototype._bindKeys=function(){var M=this;this.register((0,e.addDisposableDomListener)(this.textarea,"keyup",function(R){return M._keyUp(R)},!0)),this.register((0,e.addDisposableDomListener)(this.textarea,"keydown",function(R){return M._keyDown(R)},!0)),this.register((0,e.addDisposableDomListener)(this.textarea,"keypress",function(R){return M._keyPress(R)},!0)),this.register((0,e.addDisposableDomListener)(this.textarea,"compositionstart",function(){return M._compositionHelper.compositionstart()})),this.register((0,e.addDisposableDomListener)(this.textarea,"compositionupdate",function(R){return M._compositionHelper.compositionupdate(R)})),this.register((0,e.addDisposableDomListener)(this.textarea,"compositionend",function(){return M._compositionHelper.compositionend()})),this.register((0,e.addDisposableDomListener)(this.textarea,"input",function(R){return M._inputEvent(R)},!0)),this.register(this.onRender(function(){return M._compositionHelper.updateCompositionElements()})),this.register(this.onRender(function(R){return M._queueLinkification(R.start,R.end)}))},E.prototype.open=function(M){var R=this;if(!M)throw new Error("Terminal requires a parent element.");M.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=M.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),this.element.setAttribute("tabindex","0"),M.appendChild(this.element);var H=F.createDocumentFragment();this._viewportElement=F.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),H.appendChild(this._viewportElement),this._viewportScrollArea=F.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=F.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=F.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),H.appendChild(this.screenElement),this.textarea=F.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",r.promptLabel),this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this.register((0,e.addDisposableDomListener)(this.textarea,"focus",function(z){return R._onTextAreaFocus(z)})),this.register((0,e.addDisposableDomListener)(this.textarea,"blur",function(){return R._onTextAreaBlur()})),this._helperContainer.appendChild(this.textarea);var B=this._instantiationService.createInstance(D.CoreBrowserService,this.textarea);this._instantiationService.setService(w.ICoreBrowserService,B),this._charSizeService=this._instantiationService.createInstance(A.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(w.ICharSizeService,this._charSizeService),this._theme=this.options.theme||this._theme,this._colorManager=new m.ColorManager(F,this.options.allowTransparency),this.register(this.optionsService.onOptionChange(function(z){return R._colorManager.onOptionsChange(z)})),this._colorManager.setTheme(this._theme),this._characterJoinerService=this._instantiationService.createInstance(W.CharacterJoinerService),this._instantiationService.setService(w.ICharacterJoinerService,this._characterJoinerService);var q=this._createRenderer();this._renderService=this.register(this._instantiationService.createInstance(k.RenderService,q,this.rows,this.screenElement)),this._instantiationService.setService(w.IRenderService,this._renderService),this.register(this._renderService.onRenderedBufferChange(function(z){return R._onRender.fire(z)})),this.onResize(function(z){return R._renderService.resize(z.cols,z.rows)}),this._compositionView=F.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(f.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(H),this._soundService=this._instantiationService.createInstance(o.SoundService),this._instantiationService.setService(w.ISoundService,this._soundService),this._mouseService=this._instantiationService.createInstance(x.MouseService),this._instantiationService.setService(w.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(u.Viewport,function(z){return R.scrollLines(z,!0,1)},this._viewportElement,this._viewportScrollArea,this.element),this.viewport.onThemeChange(this._colorManager.colors),this.register(this._inputHandler.onRequestSyncScrollBar(function(){return R.viewport.syncScrollArea()})),this.register(this.viewport),this.register(this.onCursorMove(function(){R._renderService.onCursorMove(),R._syncTextArea()})),this.register(this.onResize(function(){return R._renderService.onResize(R.cols,R.rows)})),this.register(this.onBlur(function(){return R._renderService.onBlur()})),this.register(this.onFocus(function(){return R._renderService.onFocus()})),this.register(this._renderService.onDimensionsChange(function(){return R.viewport.syncScrollArea()})),this._selectionService=this.register(this._instantiationService.createInstance(n.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(w.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(function(z){return R.scrollLines(z.amount,z.suppressScrollEvent)})),this.register(this._selectionService.onSelectionChange(function(){return R._onSelectionChange.fire()})),this.register(this._selectionService.onRequestRedraw(function(z){return R._renderService.onSelectionChanged(z.start,z.end,z.columnSelectMode)})),this.register(this._selectionService.onLinuxMouseSelection(function(z){R.textarea.value=z,R.textarea.focus(),R.textarea.select()})),this.register(this._onScroll.event(function(z){R.viewport.syncScrollArea(),R._selectionService.refresh()})),this.register((0,e.addDisposableDomListener)(this._viewportElement,"scroll",function(){return R._selectionService.refresh()})),this._mouseZoneManager=this._instantiationService.createInstance(c.MouseZoneManager,this.element,this.screenElement),this.register(this._mouseZoneManager),this.register(this.onScroll(function(){return R._mouseZoneManager.clearAll()})),this.linkifier.attachToDom(this.element,this._mouseZoneManager),this.linkifier2.attachToDom(this.element,this._mouseService,this._renderService),this.register((0,e.addDisposableDomListener)(this.element,"mousedown",function(z){return R._selectionService.onMouseDown(z)})),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager=new p.AccessibilityManager(this,this._renderService)),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()},E.prototype._createRenderer=function(){switch(this.options.rendererType){case"canvas":return this._instantiationService.createInstance(a.Renderer,this._colorManager.colors,this.screenElement,this.linkifier,this.linkifier2);case"dom":return this._instantiationService.createInstance(g.DomRenderer,this._colorManager.colors,this.element,this.screenElement,this._viewportElement,this.linkifier,this.linkifier2);default:throw new Error('Unrecognized rendererType "'+this.options.rendererType+'"')}},E.prototype._setTheme=function(M){var R,H,B;this._theme=M,(R=this._colorManager)===null||R===void 0||R.setTheme(M),(H=this._renderService)===null||H===void 0||H.setColors(this._colorManager.colors),(B=this.viewport)===null||B===void 0||B.onThemeChange(this._colorManager.colors)},E.prototype.bindMouse=function(){var M=this,R=this,H=this.element;function B(U){var Q,se,he=R._mouseService.getRawByteCoords(U,R.screenElement,R.cols,R.rows);if(!he)return!1;switch(U.overrideType||U.type){case"mousemove":se=32,U.buttons===void 0?(Q=3,U.button!==void 0&&(Q=U.button<3?U.button:3)):Q=1&U.buttons?0:4&U.buttons?1:2&U.buttons?2:3;break;case"mouseup":se=0,Q=U.button<3?U.button:3;break;case"mousedown":se=1,Q=U.button<3?U.button:3;break;case"wheel":U.deltaY!==0&&(se=U.deltaY<0?0:1),Q=4;break;default:return!1}return!(se===void 0||Q===void 0||Q>4)&&R.coreMouseService.triggerMouseEvent({col:he.x-33,row:he.y-33,button:Q,action:se,ctrl:U.ctrlKey,alt:U.altKey,shift:U.shiftKey})}var q={mouseup:null,wheel:null,mousedrag:null,mousemove:null},z=function(U){return B(U),U.buttons||(M._document.removeEventListener("mouseup",q.mouseup),q.mousedrag&&M._document.removeEventListener("mousemove",q.mousedrag)),M.cancel(U)},te=function(U){return B(U),M.cancel(U,!0)},re=function(U){U.buttons&&B(U)},oe=function(U){U.buttons||B(U)};this.register(this.coreMouseService.onProtocolChange(function(U){U?(M.optionsService.options.logLevel==="debug"&&M._logService.debug("Binding to mouse events:",M.coreMouseService.explainEvents(U)),M.element.classList.add("enable-mouse-events"),M._selectionService.disable()):(M._logService.debug("Unbinding from mouse events."),M.element.classList.remove("enable-mouse-events"),M._selectionService.enable()),8&U?q.mousemove||(H.addEventListener("mousemove",oe),q.mousemove=oe):(H.removeEventListener("mousemove",q.mousemove),q.mousemove=null),16&U?q.wheel||(H.addEventListener("wheel",te,{passive:!1}),q.wheel=te):(H.removeEventListener("wheel",q.wheel),q.wheel=null),2&U?q.mouseup||(q.mouseup=z):(M._document.removeEventListener("mouseup",q.mouseup),q.mouseup=null),4&U?q.mousedrag||(q.mousedrag=re):(M._document.removeEventListener("mousemove",q.mousedrag),q.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,e.addDisposableDomListener)(H,"mousedown",function(U){if(U.preventDefault(),M.focus(),M.coreMouseService.areMouseEventsActive&&!M._selectionService.shouldForceSelection(U))return B(U),q.mouseup&&M._document.addEventListener("mouseup",q.mouseup),q.mousedrag&&M._document.addEventListener("mousemove",q.mousedrag),M.cancel(U)})),this.register((0,e.addDisposableDomListener)(H,"wheel",function(U){if(!q.wheel){if(!M.buffer.hasScrollback){var Q=M.viewport.getLinesScrolled(U);if(Q===0)return;for(var se=d.C0.ESC+(M.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(U.deltaY<0?"A":"B"),he="",Ce=0;Ce<Math.abs(Q);Ce++)he+=se;return M.coreService.triggerDataEvent(he,!0),M.cancel(U,!0)}return M.viewport.onWheel(U)?void 0:M.cancel(U)}},{passive:!1})),this.register((0,e.addDisposableDomListener)(H,"touchstart",function(U){if(!M.coreMouseService.areMouseEventsActive)return M.viewport.onTouchStart(U),M.cancel(U)},{passive:!0})),this.register((0,e.addDisposableDomListener)(H,"touchmove",function(U){if(!M.coreMouseService.areMouseEventsActive)return M.viewport.onTouchMove(U)?void 0:M.cancel(U)},{passive:!1}))},E.prototype.refresh=function(M,R){var H;(H=this._renderService)===null||H===void 0||H.refreshRows(M,R)},E.prototype._queueLinkification=function(M,R){var H;(H=this.linkifier)===null||H===void 0||H.linkifyRows(M,R)},E.prototype.updateCursorStyle=function(M){var R;((R=this._selectionService)===null||R===void 0?void 0:R.shouldColumnSelect(M))?this.element.classList.add("column-select"):this.element.classList.remove("column-select")},E.prototype._showCursor=function(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))},E.prototype.scrollLines=function(M,R,H){H===void 0&&(H=0),G.prototype.scrollLines.call(this,M,R,H),this.refresh(0,this.rows-1)},E.prototype.paste=function(M){(0,S.paste)(M,this.textarea,this.coreService)},E.prototype.attachCustomKeyEventHandler=function(M){this._customKeyEventHandler=M},E.prototype.registerLinkMatcher=function(M,R,H){var B=this.linkifier.registerLinkMatcher(M,R,H);return this.refresh(0,this.rows-1),B},E.prototype.deregisterLinkMatcher=function(M){this.linkifier.deregisterLinkMatcher(M)&&this.refresh(0,this.rows-1)},E.prototype.registerLinkProvider=function(M){return this.linkifier2.registerLinkProvider(M)},E.prototype.registerCharacterJoiner=function(M){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");var R=this._characterJoinerService.register(M);return this.refresh(0,this.rows-1),R},E.prototype.deregisterCharacterJoiner=function(M){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(M)&&this.refresh(0,this.rows-1)},Object.defineProperty(E.prototype,"markers",{get:function(){return this.buffer.markers},enumerable:!1,configurable:!0}),E.prototype.addMarker=function(M){if(this.buffer===this.buffers.normal)return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+M)},E.prototype.hasSelection=function(){return!!this._selectionService&&this._selectionService.hasSelection},E.prototype.select=function(M,R,H){this._selectionService.setSelection(M,R,H)},E.prototype.getSelection=function(){return this._selectionService?this._selectionService.selectionText:""},E.prototype.getSelectionPosition=function(){if(this._selectionService&&this._selectionService.hasSelection)return{startColumn:this._selectionService.selectionStart[0],startRow:this._selectionService.selectionStart[1],endColumn:this._selectionService.selectionEnd[0],endRow:this._selectionService.selectionEnd[1]}},E.prototype.clearSelection=function(){var M;(M=this._selectionService)===null||M===void 0||M.clearSelection()},E.prototype.selectAll=function(){var M;(M=this._selectionService)===null||M===void 0||M.selectAll()},E.prototype.selectLines=function(M,R){var H;(H=this._selectionService)===null||H===void 0||H.selectLines(M,R)},E.prototype._keyDown=function(M){if(this._keyDownHandled=!1,this._customKeyEventHandler&&this._customKeyEventHandler(M)===!1)return!1;if(!this._compositionHelper.keydown(M))return this.buffer.ybase!==this.buffer.ydisp&&this._bufferService.scrollToBottom(),!1;M.key!=="Dead"&&M.key!=="AltGraph"||(this._unprocessedDeadKey=!0);var R=(0,C.evaluateKeyboardEvent)(M,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(M),R.type===3||R.type===2){var H=this.rows-1;return this.scrollLines(R.type===2?-H:H),this.cancel(M,!0)}return R.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,M)||(R.cancel&&this.cancel(M,!0),!R.key||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(R.key!==d.C0.ETX&&R.key!==d.C0.CR||(this.textarea.value=""),this._onKey.fire({key:R.key,domEvent:M}),this._showCursor(),this.coreService.triggerDataEvent(R.key,!0),this.optionsService.options.screenReaderMode?void(this._keyDownHandled=!0):this.cancel(M,!0))))},E.prototype._isThirdLevelShift=function(M,R){var H=M.isMac&&!this.options.macOptionIsMeta&&R.altKey&&!R.ctrlKey&&!R.metaKey||M.isWindows&&R.altKey&&R.ctrlKey&&!R.metaKey||M.isWindows&&R.getModifierState("AltGraph");return R.type==="keypress"?H:H&&(!R.keyCode||R.keyCode>47)},E.prototype._keyUp=function(M){this._customKeyEventHandler&&this._customKeyEventHandler(M)===!1||(function(R){return R.keyCode===16||R.keyCode===17||R.keyCode===18}(M)||this.focus(),this.updateCursorStyle(M),this._keyPressHandled=!1)},E.prototype._keyPress=function(M){var R;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(M)===!1)return!1;if(this.cancel(M),M.charCode)R=M.charCode;else if(M.which===null||M.which===void 0)R=M.keyCode;else{if(M.which===0||M.charCode===0)return!1;R=M.which}return!(!R||(M.altKey||M.ctrlKey||M.metaKey)&&!this._isThirdLevelShift(this.browser,M)||(R=String.fromCharCode(R),this._onKey.fire({key:R,domEvent:M}),this._showCursor(),this.coreService.triggerDataEvent(R,!0),this._keyPressHandled=!0,0))},E.prototype._inputEvent=function(M){if(M.data&&M.inputType==="insertText"&&!this.optionsService.options.screenReaderMode){if(this._keyPressHandled)return!1;var R=M.data;return this.coreService.triggerDataEvent(R,!0),this.cancel(M),!0}return!1},E.prototype.bell=function(){var M;this._soundBell()&&((M=this._soundService)===null||M===void 0||M.playBellSound()),this._onBell.fire()},E.prototype.resize=function(M,R){M!==this.cols||R!==this.rows?G.prototype.resize.call(this,M,R):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()},E.prototype._afterResize=function(M,R){var H,B;(H=this._charSizeService)===null||H===void 0||H.measure(),(B=this.viewport)===null||B===void 0||B.syncScrollArea(!0)},E.prototype.clear=function(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(var M=1;M<this.rows;M++)this.buffer.lines.push(this.buffer.getBlankLine(y.DEFAULT_ATTR_DATA));this.refresh(0,this.rows-1),this._onScroll.fire({position:this.buffer.ydisp,source:0})}},E.prototype.reset=function(){var M,R;this.options.rows=this.rows,this.options.cols=this.cols;var H=this._customKeyEventHandler;this._setup(),G.prototype.reset.call(this),(M=this._selectionService)===null||M===void 0||M.reset(),this._customKeyEventHandler=H,this.refresh(0,this.rows-1),(R=this.viewport)===null||R===void 0||R.syncScrollArea()},E.prototype.clearTextureAtlas=function(){var M;(M=this._renderService)===null||M===void 0||M.clearTextureAtlas()},E.prototype._reportFocus=function(){var M;((M=this.element)===null||M===void 0?void 0:M.classList.contains("focus"))?this.coreService.triggerDataEvent(d.C0.ESC+"[I"):this.coreService.triggerDataEvent(d.C0.ESC+"[O")},E.prototype._reportWindowsOptions=function(M){if(this._renderService)switch(M){case i.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:var R=this._renderService.dimensions.scaledCanvasWidth.toFixed(0),H=this._renderService.dimensions.scaledCanvasHeight.toFixed(0);this.coreService.triggerDataEvent(d.C0.ESC+"[4;"+H+";"+R+"t");break;case i.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:var B=this._renderService.dimensions.scaledCellWidth.toFixed(0),q=this._renderService.dimensions.scaledCellHeight.toFixed(0);this.coreService.triggerDataEvent(d.C0.ESC+"[6;"+q+";"+B+"t")}},E.prototype.cancel=function(M,R){if(this.options.cancelEvents||R)return M.preventDefault(),M.stopPropagation(),!1},E.prototype._visualBell=function(){return!1},E.prototype._soundBell=function(){return this.options.bellStyle==="sound"},E}(T.CoreTerminal);s.Terminal=N},9924:(P,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TimeBasedDebouncer=void 0;var v=function(){function l(_,f){f===void 0&&(f=1e3),this._renderCallback=_,this._debounceThresholdMS=f,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}return l.prototype.dispose=function(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)},l.prototype.refresh=function(_,f,u){var S=this;this._rowCount=u,_=_!==void 0?_:0,f=f!==void 0?f:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,_):_,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,f):f;var d=Date.now();if(d-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=d,this._innerRefresh();else if(!this._additionalRefreshRequested){var i=d-this._lastRefreshMs,a=this._debounceThresholdMS-i;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(function(){S._lastRefreshMs=Date.now(),S._innerRefresh(),S._additionalRefreshRequested=!1,S._refreshTimeoutID=void 0},a)}},l.prototype._innerRefresh=function(){if(this._rowStart!==void 0&&this._rowEnd!==void 0&&this._rowCount!==void 0){var _=Math.max(this._rowStart,0),f=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(_,f)}},l}();s.TimeBasedDebouncer=v},1680:function(P,s,v){var l,_=this&&this.__extends||(l=function(n,t){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},l(n,t)},function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}l(n,t),n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}),f=this&&this.__decorate||function(n,t,e,r){var o,c=arguments.length,p=c<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(n,t,e,r);else for(var g=n.length-1;g>=0;g--)(o=n[g])&&(p=(c<3?o(p):c>3?o(t,e,p):o(t,e))||p);return c>3&&p&&Object.defineProperty(t,e,p),p},u=this&&this.__param||function(n,t){return function(e,r){t(e,r,n)}};Object.defineProperty(s,"__esModule",{value:!0}),s.Viewport=void 0;var S=v(844),d=v(3656),i=v(4725),a=v(2585),h=function(n){function t(e,r,o,c,p,g,C,b){var y=n.call(this)||this;return y._scrollLines=e,y._viewportElement=r,y._scrollArea=o,y._element=c,y._bufferService=p,y._optionsService=g,y._charSizeService=C,y._renderService=b,y.scrollBarWidth=0,y._currentRowHeight=0,y._currentScaledCellHeight=0,y._lastRecordedBufferLength=0,y._lastRecordedViewportHeight=0,y._lastRecordedBufferHeight=0,y._lastTouchY=0,y._lastScrollTop=0,y._lastHadScrollBar=!1,y._wheelPartialScroll=0,y._refreshAnimationFrame=null,y._ignoreNextScrollEvent=!1,y.scrollBarWidth=y._viewportElement.offsetWidth-y._scrollArea.offsetWidth||15,y._lastHadScrollBar=!0,y.register((0,d.addDisposableDomListener)(y._viewportElement,"scroll",y._onScroll.bind(y))),y._activeBuffer=y._bufferService.buffer,y.register(y._bufferService.buffers.onBufferActivate(function(m){return y._activeBuffer=m.activeBuffer})),y._renderDimensions=y._renderService.dimensions,y.register(y._renderService.onDimensionsChange(function(m){return y._renderDimensions=m})),setTimeout(function(){return y.syncScrollArea()},0),y}return _(t,n),t.prototype.onThemeChange=function(e){this._viewportElement.style.backgroundColor=e.background.css},t.prototype._refresh=function(e){var r=this;if(e)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=requestAnimationFrame(function(){return r._innerRefresh()}))},t.prototype._innerRefresh=function(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.scaledCellHeight/window.devicePixelRatio,this._currentScaledCellHeight=this._renderService.dimensions.scaledCellHeight,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;var e=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.canvasHeight);this._lastRecordedBufferHeight!==e&&(this._lastRecordedBufferHeight=e,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}var r=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==r&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=r),this._optionsService.options.scrollback===0?this.scrollBarWidth=0:this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this._lastHadScrollBar=this.scrollBarWidth>0;var o=window.getComputedStyle(this._element),c=parseInt(o.paddingLeft)+parseInt(o.paddingRight);this._viewportElement.style.width=(this._renderService.dimensions.actualCellWidth*this._bufferService.cols+this.scrollBarWidth+(this._lastHadScrollBar?c:0)).toString()+"px",this._refreshAnimationFrame=null},t.prototype.syncScrollArea=function(e){if(e===void 0&&(e=!1),this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(e);this._lastRecordedViewportHeight===this._renderService.dimensions.canvasHeight&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.scaledCellHeight===this._currentScaledCellHeight?this._lastHadScrollBar!==this._optionsService.options.scrollback>0&&this._refresh(e):this._refresh(e)},t.prototype._onScroll=function(e){if(this._lastScrollTop=this._viewportElement.scrollTop,this._viewportElement.offsetParent){if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._scrollLines(0);var r=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._scrollLines(r)}},t.prototype._bubbleScroll=function(e,r){var o=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(r<0&&this._viewportElement.scrollTop!==0||r>0&&o<this._lastRecordedBufferHeight)||(e.cancelable&&e.preventDefault(),!1)},t.prototype.onWheel=function(e){var r=this._getPixelsScrolled(e);return r!==0&&(this._viewportElement.scrollTop+=r,this._bubbleScroll(e,r))},t.prototype._getPixelsScrolled=function(e){if(e.deltaY===0)return 0;var r=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_LINE?r*=this._currentRowHeight:e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(r*=this._currentRowHeight*this._bufferService.rows),r},t.prototype.getLinesScrolled=function(e){if(e.deltaY===0)return 0;var r=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(r/=this._currentRowHeight+0,this._wheelPartialScroll+=r,r=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(r*=this._bufferService.rows),r},t.prototype._applyScrollModifier=function(e,r){var o=this._optionsService.options.fastScrollModifier;return o==="alt"&&r.altKey||o==="ctrl"&&r.ctrlKey||o==="shift"&&r.shiftKey?e*this._optionsService.options.fastScrollSensitivity*this._optionsService.options.scrollSensitivity:e*this._optionsService.options.scrollSensitivity},t.prototype.onTouchStart=function(e){this._lastTouchY=e.touches[0].pageY},t.prototype.onTouchMove=function(e){var r=this._lastTouchY-e.touches[0].pageY;return this._lastTouchY=e.touches[0].pageY,r!==0&&(this._viewportElement.scrollTop+=r,this._bubbleScroll(e,r))},f([u(4,a.IBufferService),u(5,a.IOptionsService),u(6,i.ICharSizeService),u(7,i.IRenderService)],t)}(S.Disposable);s.Viewport=h},2950:function(P,s,v){var l=this&&this.__decorate||function(d,i,a,h){var n,t=arguments.length,e=t<3?i:h===null?h=Object.getOwnPropertyDescriptor(i,a):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")e=Reflect.decorate(d,i,a,h);else for(var r=d.length-1;r>=0;r--)(n=d[r])&&(e=(t<3?n(e):t>3?n(i,a,e):n(i,a))||e);return t>3&&e&&Object.defineProperty(i,a,e),e},_=this&&this.__param||function(d,i){return function(a,h){i(a,h,d)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CompositionHelper=void 0;var f=v(4725),u=v(2585),S=function(){function d(i,a,h,n,t,e){this._textarea=i,this._compositionView=a,this._bufferService=h,this._optionsService=n,this._coreService=t,this._renderService=e,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}return Object.defineProperty(d.prototype,"isComposing",{get:function(){return this._isComposing},enumerable:!1,configurable:!0}),d.prototype.compositionstart=function(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")},d.prototype.compositionupdate=function(i){var a=this;this._compositionView.textContent=i.data,this.updateCompositionElements(),setTimeout(function(){a._compositionPosition.end=a._textarea.value.length},0)},d.prototype.compositionend=function(){this._finalizeComposition(!0)},d.prototype.keydown=function(i){if(this._isComposing||this._isSendingComposition){if(i.keyCode===229||i.keyCode===16||i.keyCode===17||i.keyCode===18)return!1;this._finalizeComposition(!1)}return i.keyCode!==229||(this._handleAnyTextareaChanges(),!1)},d.prototype._finalizeComposition=function(i){var a=this;if(this._compositionView.classList.remove("active"),this._isComposing=!1,i){var h={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(function(){if(a._isSendingComposition){a._isSendingComposition=!1;var t;h.start+=a._dataAlreadySent.length,(t=a._isComposing?a._textarea.value.substring(h.start,h.end):a._textarea.value.substring(h.start)).length>0&&a._coreService.triggerDataEvent(t,!0)}},0)}else{this._isSendingComposition=!1;var n=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(n,!0)}},d.prototype._handleAnyTextareaChanges=function(){var i=this,a=this._textarea.value;setTimeout(function(){if(!i._isComposing){var h=i._textarea.value.replace(a,"");h.length>0&&(i._dataAlreadySent=h,i._coreService.triggerDataEvent(h,!0))}},0)},d.prototype.updateCompositionElements=function(i){var a=this;if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){var h=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),n=this._renderService.dimensions.actualCellHeight,t=this._bufferService.buffer.y*this._renderService.dimensions.actualCellHeight,e=h*this._renderService.dimensions.actualCellWidth;this._compositionView.style.left=e+"px",this._compositionView.style.top=t+"px",this._compositionView.style.height=n+"px",this._compositionView.style.lineHeight=n+"px",this._compositionView.style.fontFamily=this._optionsService.options.fontFamily,this._compositionView.style.fontSize=this._optionsService.options.fontSize+"px";var r=this._compositionView.getBoundingClientRect();this._textarea.style.left=e+"px",this._textarea.style.top=t+"px",this._textarea.style.width=Math.max(r.width,1)+"px",this._textarea.style.height=Math.max(r.height,1)+"px",this._textarea.style.lineHeight=r.height+"px"}i||setTimeout(function(){return a.updateCompositionElements(!0)},0)}},l([_(2,u.IBufferService),_(3,u.IOptionsService),_(4,u.ICoreService),_(5,f.IRenderService)],d)}();s.CompositionHelper=S},9806:(P,s)=>{function v(l,_){var f=_.getBoundingClientRect();return[l.clientX-f.left,l.clientY-f.top]}Object.defineProperty(s,"__esModule",{value:!0}),s.getRawByteCoords=s.getCoords=s.getCoordsRelativeToElement=void 0,s.getCoordsRelativeToElement=v,s.getCoords=function(l,_,f,u,S,d,i,a){if(S){var h=v(l,_);if(h)return h[0]=Math.ceil((h[0]+(a?d/2:0))/d),h[1]=Math.ceil(h[1]/i),h[0]=Math.min(Math.max(h[0],1),f+(a?1:0)),h[1]=Math.min(Math.max(h[1],1),u),h}},s.getRawByteCoords=function(l){if(l)return{x:l[0]+32,y:l[1]+32}}},9504:(P,s,v)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.moveToCellSequence=void 0;var l=v(2584);function _(a,h,n,t){var e=a-f(n,a),r=h-f(n,h),o=Math.abs(e-r)-function(c,p,g){for(var C=0,b=c-f(g,c),y=p-f(g,p),m=0;m<Math.abs(b-y);m++){var k=u(c,p)==="A"?-1:1,w=g.buffer.lines.get(b+k*m);w&&w.isWrapped&&C++}return C}(a,h,n);return i(o,d(u(a,h),t))}function f(a,h){for(var n=0,t=a.buffer.lines.get(h),e=t&&t.isWrapped;e&&h>=0&&h<a.rows;)n++,e=(t=a.buffer.lines.get(--h))&&t.isWrapped;return n}function u(a,h){return a>h?"A":"B"}function S(a,h,n,t,e,r){for(var o=a,c=h,p="";o!==n||c!==t;)o+=e?1:-1,e&&o>r.cols-1?(p+=r.buffer.translateBufferLineToString(c,!1,a,o),o=0,a=0,c++):!e&&o<0&&(p+=r.buffer.translateBufferLineToString(c,!1,0,a+1),a=o=r.cols-1,c--);return p+r.buffer.translateBufferLineToString(c,!1,a,o)}function d(a,h){var n=h?"O":"[";return l.C0.ESC+n+a}function i(a,h){a=Math.floor(a);for(var n="",t=0;t<a;t++)n+=h;return n}s.moveToCellSequence=function(a,h,n,t){var e,r=n.buffer.x,o=n.buffer.y;if(!n.buffer.hasScrollback)return function(p,g,C,b,y,m){return _(g,b,y,m).length===0?"":i(S(p,g,p,g-f(y,g),!1,y).length,d("D",m))}(r,o,0,h,n,t)+_(o,h,n,t)+function(p,g,C,b,y,m){var k;k=_(g,b,y,m).length>0?b-f(y,b):g;var w=b,A=function(x,L,D,T,j,W){var F;return F=_(D,T,j,W).length>0?T-f(j,T):L,x<D&&F<=T||x>=D&&F<T?"C":"D"}(p,g,C,b,y,m);return i(S(p,k,C,w,A==="C",y).length,d(A,m))}(r,o,a,h,n,t);if(o===h)return e=r>a?"D":"C",i(Math.abs(r-a),d(e,t));e=o>h?"D":"C";var c=Math.abs(o-h);return i(function(p,g){return g.cols-p}(o>h?a:r,n)+(c-1)*n.cols+1+((o>h?r:a)-1),d(e,t))}},1546:(P,s,v)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BaseRenderLayer=void 0;var l=v(643),_=v(8803),f=v(1420),u=v(3734),S=v(1752),d=v(4774),i=v(9631),a=v(8978),h=function(){function n(t,e,r,o,c,p,g,C){this._container=t,this._alpha=o,this._colors=c,this._rendererId=p,this._bufferService=g,this._optionsService=C,this._scaledCharWidth=0,this._scaledCharHeight=0,this._scaledCellWidth=0,this._scaledCellHeight=0,this._scaledCharLeft=0,this._scaledCharTop=0,this._currentGlyphIdentifier={chars:"",code:0,bg:0,fg:0,bold:!1,dim:!1,italic:!1},this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-"+e+"-layer"),this._canvas.style.zIndex=r.toString(),this._initCanvas(),this._container.appendChild(this._canvas)}return n.prototype.dispose=function(){var t;(0,i.removeElementFromParent)(this._canvas),(t=this._charAtlas)===null||t===void 0||t.dispose()},n.prototype._initCanvas=function(){this._ctx=(0,S.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()},n.prototype.onOptionsChanged=function(){},n.prototype.onBlur=function(){},n.prototype.onFocus=function(){},n.prototype.onCursorMove=function(){},n.prototype.onGridChanged=function(t,e){},n.prototype.onSelectionChanged=function(t,e,r){},n.prototype.setColors=function(t){this._refreshCharAtlas(t)},n.prototype._setTransparency=function(t){if(t!==this._alpha){var e=this._canvas;this._alpha=t,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,e),this._refreshCharAtlas(this._colors),this.onGridChanged(0,this._bufferService.rows-1)}},n.prototype._refreshCharAtlas=function(t){this._scaledCharWidth<=0&&this._scaledCharHeight<=0||(this._charAtlas=(0,f.acquireCharAtlas)(this._optionsService.options,this._rendererId,t,this._scaledCharWidth,this._scaledCharHeight),this._charAtlas.warmUp())},n.prototype.resize=function(t){this._scaledCellWidth=t.scaledCellWidth,this._scaledCellHeight=t.scaledCellHeight,this._scaledCharWidth=t.scaledCharWidth,this._scaledCharHeight=t.scaledCharHeight,this._scaledCharLeft=t.scaledCharLeft,this._scaledCharTop=t.scaledCharTop,this._canvas.width=t.scaledCanvasWidth,this._canvas.height=t.scaledCanvasHeight,this._canvas.style.width=t.canvasWidth+"px",this._canvas.style.height=t.canvasHeight+"px",this._alpha||this._clearAll(),this._refreshCharAtlas(this._colors)},n.prototype.clearTextureAtlas=function(){var t;(t=this._charAtlas)===null||t===void 0||t.clear()},n.prototype._fillCells=function(t,e,r,o){this._ctx.fillRect(t*this._scaledCellWidth,e*this._scaledCellHeight,r*this._scaledCellWidth,o*this._scaledCellHeight)},n.prototype._fillMiddleLineAtCells=function(t,e,r){r===void 0&&(r=1);var o=Math.ceil(.5*this._scaledCellHeight);this._ctx.fillRect(t*this._scaledCellWidth,(e+1)*this._scaledCellHeight-o-window.devicePixelRatio,r*this._scaledCellWidth,window.devicePixelRatio)},n.prototype._fillBottomLineAtCells=function(t,e,r){r===void 0&&(r=1),this._ctx.fillRect(t*this._scaledCellWidth,(e+1)*this._scaledCellHeight-window.devicePixelRatio-1,r*this._scaledCellWidth,window.devicePixelRatio)},n.prototype._fillLeftLineAtCell=function(t,e,r){this._ctx.fillRect(t*this._scaledCellWidth,e*this._scaledCellHeight,window.devicePixelRatio*r,this._scaledCellHeight)},n.prototype._strokeRectAtCell=function(t,e,r,o){this._ctx.lineWidth=window.devicePixelRatio,this._ctx.strokeRect(t*this._scaledCellWidth+window.devicePixelRatio/2,e*this._scaledCellHeight+window.devicePixelRatio/2,r*this._scaledCellWidth-window.devicePixelRatio,o*this._scaledCellHeight-window.devicePixelRatio)},n.prototype._clearAll=function(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))},n.prototype._clearCells=function(t,e,r,o){this._alpha?this._ctx.clearRect(t*this._scaledCellWidth,e*this._scaledCellHeight,r*this._scaledCellWidth,o*this._scaledCellHeight):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(t*this._scaledCellWidth,e*this._scaledCellHeight,r*this._scaledCellWidth,o*this._scaledCellHeight))},n.prototype._fillCharTrueColor=function(t,e,r){this._ctx.font=this._getFont(!1,!1),this._ctx.textBaseline=_.TEXT_BASELINE,this._clipRow(r);var o=!1;this._optionsService.options.customGlyphs!==!1&&(o=(0,a.tryDrawCustomChar)(this._ctx,t.getChars(),e*this._scaledCellWidth,r*this._scaledCellHeight,this._scaledCellWidth,this._scaledCellHeight)),o||this._ctx.fillText(t.getChars(),e*this._scaledCellWidth+this._scaledCharLeft,r*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight)},n.prototype._drawChars=function(t,e,r){var o,c,p=this._getContrastColor(t);p||t.isFgRGB()||t.isBgRGB()?this._drawUncachedChars(t,e,r,p):(t.isInverse()?(o=t.isBgDefault()?_.INVERTED_DEFAULT_COLOR:t.getBgColor(),c=t.isFgDefault()?_.INVERTED_DEFAULT_COLOR:t.getFgColor()):(c=t.isBgDefault()?l.DEFAULT_COLOR:t.getBgColor(),o=t.isFgDefault()?l.DEFAULT_COLOR:t.getFgColor()),o+=this._optionsService.options.drawBoldTextInBrightColors&&t.isBold()&&o<8?8:0,this._currentGlyphIdentifier.chars=t.getChars()||l.WHITESPACE_CELL_CHAR,this._currentGlyphIdentifier.code=t.getCode()||l.WHITESPACE_CELL_CODE,this._currentGlyphIdentifier.bg=c,this._currentGlyphIdentifier.fg=o,this._currentGlyphIdentifier.bold=!!t.isBold(),this._currentGlyphIdentifier.dim=!!t.isDim(),this._currentGlyphIdentifier.italic=!!t.isItalic(),this._charAtlas&&this._charAtlas.draw(this._ctx,this._currentGlyphIdentifier,e*this._scaledCellWidth+this._scaledCharLeft,r*this._scaledCellHeight+this._scaledCharTop)||this._drawUncachedChars(t,e,r))},n.prototype._drawUncachedChars=function(t,e,r,o){if(this._ctx.save(),this._ctx.font=this._getFont(!!t.isBold(),!!t.isItalic()),this._ctx.textBaseline=_.TEXT_BASELINE,t.isInverse())if(o)this._ctx.fillStyle=o.css;else if(t.isBgDefault())this._ctx.fillStyle=d.color.opaque(this._colors.background).css;else if(t.isBgRGB())this._ctx.fillStyle="rgb("+u.AttributeData.toColorRGB(t.getBgColor()).join(",")+")";else{var c=t.getBgColor();this._optionsService.options.drawBoldTextInBrightColors&&t.isBold()&&c<8&&(c+=8),this._ctx.fillStyle=this._colors.ansi[c].css}else if(o)this._ctx.fillStyle=o.css;else if(t.isFgDefault())this._ctx.fillStyle=this._colors.foreground.css;else if(t.isFgRGB())this._ctx.fillStyle="rgb("+u.AttributeData.toColorRGB(t.getFgColor()).join(",")+")";else{var p=t.getFgColor();this._optionsService.options.drawBoldTextInBrightColors&&t.isBold()&&p<8&&(p+=8),this._ctx.fillStyle=this._colors.ansi[p].css}this._clipRow(r),t.isDim()&&(this._ctx.globalAlpha=_.DIM_OPACITY);var g=!1;this._optionsService.options.customGlyphs!==!1&&(g=(0,a.tryDrawCustomChar)(this._ctx,t.getChars(),e*this._scaledCellWidth,r*this._scaledCellHeight,this._scaledCellWidth,this._scaledCellHeight)),g||this._ctx.fillText(t.getChars(),e*this._scaledCellWidth+this._scaledCharLeft,r*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight),this._ctx.restore()},n.prototype._clipRow=function(t){this._ctx.beginPath(),this._ctx.rect(0,t*this._scaledCellHeight,this._bufferService.cols*this._scaledCellWidth,this._scaledCellHeight),this._ctx.clip()},n.prototype._getFont=function(t,e){return(e?"italic":"")+" "+(t?this._optionsService.options.fontWeightBold:this._optionsService.options.fontWeight)+" "+this._optionsService.options.fontSize*window.devicePixelRatio+"px "+this._optionsService.options.fontFamily},n.prototype._getContrastColor=function(t){if(this._optionsService.options.minimumContrastRatio!==1){var e=this._colors.contrastCache.getColor(t.bg,t.fg);if(e!==void 0)return e||void 0;var r=t.getFgColor(),o=t.getFgColorMode(),c=t.getBgColor(),p=t.getBgColorMode(),g=!!t.isInverse(),C=!!t.isInverse();if(g){var b=r;r=c,c=b;var y=o;o=p,p=y}var m=this._resolveBackgroundRgba(p,c,g),k=this._resolveForegroundRgba(o,r,g,C),w=d.rgba.ensureContrastRatio(m,k,this._optionsService.options.minimumContrastRatio);if(w){var A={css:d.channels.toCss(w>>24&255,w>>16&255,w>>8&255),rgba:w};return this._colors.contrastCache.setColor(t.bg,t.fg,A),A}this._colors.contrastCache.setColor(t.bg,t.fg,null)}},n.prototype._resolveBackgroundRgba=function(t,e,r){switch(t){case 16777216:case 33554432:return this._colors.ansi[e].rgba;case 50331648:return e<<8;default:return r?this._colors.foreground.rgba:this._colors.background.rgba}},n.prototype._resolveForegroundRgba=function(t,e,r,o){switch(t){case 16777216:case 33554432:return this._optionsService.options.drawBoldTextInBrightColors&&o&&e<8&&(e+=8),this._colors.ansi[e].rgba;case 50331648:return e<<8;default:return r?this._colors.background.rgba:this._colors.foreground.rgba}},n}();s.BaseRenderLayer=h},2512:function(P,s,v){var l,_=this&&this.__extends||(l=function(e,r){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,c){o.__proto__=c}||function(o,c){for(var p in c)Object.prototype.hasOwnProperty.call(c,p)&&(o[p]=c[p])},l(e,r)},function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=e}l(e,r),e.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)}),f=this&&this.__decorate||function(e,r,o,c){var p,g=arguments.length,C=g<3?r:c===null?c=Object.getOwnPropertyDescriptor(r,o):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(e,r,o,c);else for(var b=e.length-1;b>=0;b--)(p=e[b])&&(C=(g<3?p(C):g>3?p(r,o,C):p(r,o))||C);return g>3&&C&&Object.defineProperty(r,o,C),C},u=this&&this.__param||function(e,r){return function(o,c){r(o,c,e)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CursorRenderLayer=void 0;var S=v(1546),d=v(511),i=v(2585),a=v(4725),h=600,n=function(e){function r(o,c,p,g,C,b,y,m,k){var w=e.call(this,o,"cursor",c,!0,p,g,b,y)||this;return w._onRequestRedraw=C,w._coreService=m,w._coreBrowserService=k,w._cell=new d.CellData,w._state={x:0,y:0,isFocused:!1,style:"",width:0},w._cursorRenderers={bar:w._renderBarCursor.bind(w),block:w._renderBlockCursor.bind(w),underline:w._renderUnderlineCursor.bind(w)},w}return _(r,e),r.prototype.dispose=function(){this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=void 0),e.prototype.dispose.call(this)},r.prototype.resize=function(o){e.prototype.resize.call(this,o),this._state={x:0,y:0,isFocused:!1,style:"",width:0}},r.prototype.reset=function(){var o;this._clearCursor(),(o=this._cursorBlinkStateManager)===null||o===void 0||o.restartBlinkAnimation(),this.onOptionsChanged()},r.prototype.onBlur=function(){var o;(o=this._cursorBlinkStateManager)===null||o===void 0||o.pause(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},r.prototype.onFocus=function(){var o;(o=this._cursorBlinkStateManager)===null||o===void 0||o.resume(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},r.prototype.onOptionsChanged=function(){var o,c=this;this._optionsService.options.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new t(this._coreBrowserService.isFocused,function(){c._render(!0)})):((o=this._cursorBlinkStateManager)===null||o===void 0||o.dispose(),this._cursorBlinkStateManager=void 0),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},r.prototype.onCursorMove=function(){var o;(o=this._cursorBlinkStateManager)===null||o===void 0||o.restartBlinkAnimation()},r.prototype.onGridChanged=function(o,c){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?this._render(!1):this._cursorBlinkStateManager.restartBlinkAnimation()},r.prototype._render=function(o){if(this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden){var c=this._bufferService.buffer.ybase+this._bufferService.buffer.y,p=c-this._bufferService.buffer.ydisp;if(p<0||p>=this._bufferService.rows)this._clearCursor();else{var g=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1);if(this._bufferService.buffer.lines.get(c).loadCell(g,this._cell),this._cell.content!==void 0){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css;var C=this._optionsService.options.cursorStyle;return C&&C!=="block"?this._cursorRenderers[C](g,p,this._cell):this._renderBlurCursor(g,p,this._cell),this._ctx.restore(),this._state.x=g,this._state.y=p,this._state.isFocused=!1,this._state.style=C,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isCursorVisible){if(this._state){if(this._state.x===g&&this._state.y===p&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===this._optionsService.options.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[this._optionsService.options.cursorStyle||"block"](g,p,this._cell),this._ctx.restore(),this._state.x=g,this._state.y=p,this._state.isFocused=!1,this._state.style=this._optionsService.options.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}}else this._clearCursor()},r.prototype._clearCursor=function(){this._state&&(window.devicePixelRatio<1?this._clearAll():this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})},r.prototype._renderBarCursor=function(o,c,p){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillLeftLineAtCell(o,c,this._optionsService.options.cursorWidth),this._ctx.restore()},r.prototype._renderBlockCursor=function(o,c,p){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillCells(o,c,p.getWidth(),1),this._ctx.fillStyle=this._colors.cursorAccent.css,this._fillCharTrueColor(p,o,c),this._ctx.restore()},r.prototype._renderUnderlineCursor=function(o,c,p){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillBottomLineAtCells(o,c),this._ctx.restore()},r.prototype._renderBlurCursor=function(o,c,p){this._ctx.save(),this._ctx.strokeStyle=this._colors.cursor.css,this._strokeRectAtCell(o,c,p.getWidth(),1),this._ctx.restore()},f([u(5,i.IBufferService),u(6,i.IOptionsService),u(7,i.ICoreService),u(8,a.ICoreBrowserService)],r)}(S.BaseRenderLayer);s.CursorRenderLayer=n;var t=function(){function e(r,o){this._renderCallback=o,this.isCursorVisible=!0,r&&this._restartInterval()}return Object.defineProperty(e.prototype,"isPaused",{get:function(){return!(this._blinkStartTimeout||this._blinkInterval)},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},e.prototype.restartBlinkAnimation=function(){var r=this;this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){r._renderCallback(),r._animationFrame=void 0})))},e.prototype._restartInterval=function(r){var o=this;r===void 0&&(r=h),this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=window.setTimeout(function(){if(o._animationTimeRestarted){var c=h-(Date.now()-o._animationTimeRestarted);if(o._animationTimeRestarted=void 0,c>0)return void o._restartInterval(c)}o.isCursorVisible=!1,o._animationFrame=window.requestAnimationFrame(function(){o._renderCallback(),o._animationFrame=void 0}),o._blinkInterval=window.setInterval(function(){if(o._animationTimeRestarted){var p=h-(Date.now()-o._animationTimeRestarted);return o._animationTimeRestarted=void 0,void o._restartInterval(p)}o.isCursorVisible=!o.isCursorVisible,o._animationFrame=window.requestAnimationFrame(function(){o._renderCallback(),o._animationFrame=void 0})},h)},r)},e.prototype.pause=function(){this.isCursorVisible=!0,this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},e.prototype.resume=function(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()},e}()},8978:(P,s,v)=>{var l,_,f,u,S,d,i,a,h,n,t,e,r,o,c,p,g,C,b,y,m,k,w,A,x,L,D,T,j,W,F,N,G,E,M,R,H,B,q,z,te,re,oe,U,Q,se,he,Ce,Rt,Tt,Bt,Dt,Ot,Pt,It,Ht,Ft,jt,Wt,Ut,qt,Nt,De,Oe,Pe,Ie,He,Fe,je,We,Ue,qe,Ne,ze,Ke,Ve,Ge,Xe,Ye,Ze,Je,$e,Qe,et,tt,rt,it,nt,ot,st,at,ct,lt,ht,ut,ft,_t,dt,pt,vt,gt,yt,mt,St,bt,Ct,wt,Lt,Et,xt,At,kt,zt,Kt,Vt,Gt,Xt,Yt,Zt,Jt,$t,Qt,er,tr,rr,ir,nr,or;Object.defineProperty(s,"__esModule",{value:!0}),s.tryDrawCustomChar=s.boxDrawingDefinitions=s.blockElementDefinitions=void 0;var hr=v(1752);s.blockElementDefinitions={"\u2580":[{x:0,y:0,w:8,h:4}],"\u2581":[{x:0,y:7,w:8,h:1}],"\u2582":[{x:0,y:6,w:8,h:2}],"\u2583":[{x:0,y:5,w:8,h:3}],"\u2584":[{x:0,y:4,w:8,h:4}],"\u2585":[{x:0,y:3,w:8,h:5}],"\u2586":[{x:0,y:2,w:8,h:6}],"\u2587":[{x:0,y:1,w:8,h:7}],"\u2588":[{x:0,y:0,w:8,h:8}],"\u2589":[{x:0,y:0,w:7,h:8}],"\u258A":[{x:0,y:0,w:6,h:8}],"\u258B":[{x:0,y:0,w:5,h:8}],"\u258C":[{x:0,y:0,w:4,h:8}],"\u258D":[{x:0,y:0,w:3,h:8}],"\u258E":[{x:0,y:0,w:2,h:8}],"\u258F":[{x:0,y:0,w:1,h:8}],"\u2590":[{x:4,y:0,w:4,h:8}],"\u2594":[{x:0,y:0,w:9,h:1}],"\u2595":[{x:7,y:0,w:1,h:8}],"\u2596":[{x:0,y:4,w:4,h:4}],"\u2597":[{x:4,y:4,w:4,h:4}],"\u2598":[{x:0,y:0,w:4,h:4}],"\u2599":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u259A":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"\u259B":[{x:0,y:0,w:4,h:8},{x:0,y:0,w:4,h:8}],"\u259C":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"\u259D":[{x:4,y:0,w:4,h:4}],"\u259E":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"\u259F":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u{1FB70}":[{x:1,y:0,w:1,h:8}],"\u{1FB71}":[{x:2,y:0,w:1,h:8}],"\u{1FB72}":[{x:3,y:0,w:1,h:8}],"\u{1FB73}":[{x:4,y:0,w:1,h:8}],"\u{1FB74}":[{x:5,y:0,w:1,h:8}],"\u{1FB75}":[{x:6,y:0,w:1,h:8}],"\u{1FB76}":[{x:0,y:1,w:8,h:1}],"\u{1FB77}":[{x:0,y:2,w:8,h:1}],"\u{1FB78}":[{x:0,y:3,w:8,h:1}],"\u{1FB79}":[{x:0,y:4,w:8,h:1}],"\u{1FB7A}":[{x:0,y:5,w:8,h:1}],"\u{1FB7B}":[{x:0,y:6,w:8,h:1}],"\u{1FB7C}":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB7D}":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7E}":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7F}":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB80}":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB81}":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB82}":[{x:0,y:0,w:8,h:2}],"\u{1FB83}":[{x:0,y:0,w:8,h:3}],"\u{1FB84}":[{x:0,y:0,w:8,h:5}],"\u{1FB85}":[{x:0,y:0,w:8,h:6}],"\u{1FB86}":[{x:0,y:0,w:8,h:7}],"\u{1FB87}":[{x:6,y:0,w:2,h:8}],"\u{1FB88}":[{x:5,y:0,w:3,h:8}],"\u{1FB89}":[{x:3,y:0,w:5,h:8}],"\u{1FB8A}":[{x:2,y:0,w:6,h:8}],"\u{1FB8B}":[{x:1,y:0,w:7,h:8}],"\u{1FB95}":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"\u{1FB96}":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"\u{1FB97}":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};var wr={"\u2591":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"\u2592":[[1,0],[0,0],[0,1],[0,0]],"\u2593":[[0,1],[1,1],[1,0],[1,1]]};s.boxDrawingDefinitions={"\u2500":(l={},l[1]="M0,.5 L1,.5",l),"\u2501":(_={},_[3]="M0,.5 L1,.5",_),"\u2502":(f={},f[1]="M.5,0 L.5,1",f),"\u2503":(u={},u[3]="M.5,0 L.5,1",u),"\u250C":(S={},S[1]="M0.5,1 L.5,.5 L1,.5",S),"\u250F":(d={},d[3]="M0.5,1 L.5,.5 L1,.5",d),"\u2510":(i={},i[1]="M0,.5 L.5,.5 L.5,1",i),"\u2513":(a={},a[3]="M0,.5 L.5,.5 L.5,1",a),"\u2514":(h={},h[1]="M.5,0 L.5,.5 L1,.5",h),"\u2517":(n={},n[3]="M.5,0 L.5,.5 L1,.5",n),"\u2518":(t={},t[1]="M.5,0 L.5,.5 L0,.5",t),"\u251B":(e={},e[3]="M.5,0 L.5,.5 L0,.5",e),"\u251C":(r={},r[1]="M.5,0 L.5,1 M.5,.5 L1,.5",r),"\u2523":(o={},o[3]="M.5,0 L.5,1 M.5,.5 L1,.5",o),"\u2524":(c={},c[1]="M.5,0 L.5,1 M.5,.5 L0,.5",c),"\u252B":(p={},p[3]="M.5,0 L.5,1 M.5,.5 L0,.5",p),"\u252C":(g={},g[1]="M0,.5 L1,.5 M.5,.5 L.5,1",g),"\u2533":(C={},C[3]="M0,.5 L1,.5 M.5,.5 L.5,1",C),"\u2534":(b={},b[1]="M0,.5 L1,.5 M.5,.5 L.5,0",b),"\u253B":(y={},y[3]="M0,.5 L1,.5 M.5,.5 L.5,0",y),"\u253C":(m={},m[1]="M0,.5 L1,.5 M.5,0 L.5,1",m),"\u254B":(k={},k[3]="M0,.5 L1,.5 M.5,0 L.5,1",k),"\u2574":(w={},w[1]="M.5,.5 L0,.5",w),"\u2578":(A={},A[3]="M.5,.5 L0,.5",A),"\u2575":(x={},x[1]="M.5,.5 L.5,0",x),"\u2579":(L={},L[3]="M.5,.5 L.5,0",L),"\u2576":(D={},D[1]="M.5,.5 L1,.5",D),"\u257A":(T={},T[3]="M.5,.5 L1,.5",T),"\u2577":(j={},j[1]="M.5,.5 L.5,1",j),"\u257B":(W={},W[3]="M.5,.5 L.5,1",W),"\u2550":(F={},F[1]=function(I,O){return"M0,"+(.5-O)+" L1,"+(.5-O)+" M0,"+(.5+O)+" L1,"+(.5+O)},F),"\u2551":(N={},N[1]=function(I,O){return"M"+(.5-I)+",0 L"+(.5-I)+",1 M"+(.5+I)+",0 L"+(.5+I)+",1"},N),"\u2552":(G={},G[1]=function(I,O){return"M.5,1 L.5,"+(.5-O)+" L1,"+(.5-O)+" M.5,"+(.5+O)+" L1,"+(.5+O)},G),"\u2553":(E={},E[1]=function(I,O){return"M"+(.5-I)+",1 L"+(.5-I)+",.5 L1,.5 M"+(.5+I)+",.5 L"+(.5+I)+",1"},E),"\u2554":(M={},M[1]=function(I,O){return"M1,"+(.5-O)+" L"+(.5-I)+","+(.5-O)+" L"+(.5-I)+",1 M1,"+(.5+O)+" L"+(.5+I)+","+(.5+O)+" L"+(.5+I)+",1"},M),"\u2555":(R={},R[1]=function(I,O){return"M0,"+(.5-O)+" L.5,"+(.5-O)+" L.5,1 M0,"+(.5+O)+" L.5,"+(.5+O)},R),"\u2556":(H={},H[1]=function(I,O){return"M"+(.5+I)+",1 L"+(.5+I)+",.5 L0,.5 M"+(.5-I)+",.5 L"+(.5-I)+",1"},H),"\u2557":(B={},B[1]=function(I,O){return"M0,"+(.5+O)+" L"+(.5-I)+","+(.5+O)+" L"+(.5-I)+",1 M0,"+(.5-O)+" L"+(.5+I)+","+(.5-O)+" L"+(.5+I)+",1"},B),"\u2558":(q={},q[1]=function(I,O){return"M.5,0 L.5,"+(.5+O)+" L1,"+(.5+O)+" M.5,"+(.5-O)+" L1,"+(.5-O)},q),"\u2559":(z={},z[1]=function(I,O){return"M1,.5 L"+(.5-I)+",.5 L"+(.5-I)+",0 M"+(.5+I)+",.5 L"+(.5+I)+",0"},z),"\u255A":(te={},te[1]=function(I,O){return"M1,"+(.5-O)+" L"+(.5+I)+","+(.5-O)+" L"+(.5+I)+",0 M1,"+(.5+O)+" L"+(.5-I)+","+(.5+O)+" L"+(.5-I)+",0"},te),"\u255B":(re={},re[1]=function(I,O){return"M0,"+(.5+O)+" L.5,"+(.5+O)+" L.5,0 M0,"+(.5-O)+" L.5,"+(.5-O)},re),"\u255C":(oe={},oe[1]=function(I,O){return"M0,.5 L"+(.5+I)+",.5 L"+(.5+I)+",0 M"+(.5-I)+",.5 L"+(.5-I)+",0"},oe),"\u255D":(U={},U[1]=function(I,O){return"M0,"+(.5-O)+" L"+(.5-I)+","+(.5-O)+" L"+(.5-I)+",0 M0,"+(.5+O)+" L"+(.5+I)+","+(.5+O)+" L"+(.5+I)+",0"},U),"\u255E":(Q={},Q[1]=function(I,O){return"M.5,0 L.5,1 M.5,"+(.5-O)+" L1,"+(.5-O)+" M.5,"+(.5+O)+" L1,"+(.5+O)},Q),"\u255F":(se={},se[1]=function(I,O){return"M"+(.5-I)+",0 L"+(.5-I)+",1 M"+(.5+I)+",0 L"+(.5+I)+",1 M"+(.5+I)+",.5 L1,.5"},se),"\u2560":(he={},he[1]=function(I,O){return"M"+(.5-I)+",0 L"+(.5-I)+",1 M1,"+(.5+O)+" L"+(.5+I)+","+(.5+O)+" L"+(.5+I)+",1 M1,"+(.5-O)+" L"+(.5+I)+","+(.5-O)+" L"+(.5+I)+",0"},he),"\u2561":(Ce={},Ce[1]=function(I,O){return"M.5,0 L.5,1 M0,"+(.5-O)+" L.5,"+(.5-O)+" M0,"+(.5+O)+" L.5,"+(.5+O)},Ce),"\u2562":(Rt={},Rt[1]=function(I,O){return"M0,.5 L"+(.5-I)+",.5 M"+(.5-I)+",0 L"+(.5-I)+",1 M"+(.5+I)+",0 L"+(.5+I)+",1"},Rt),"\u2563":(Tt={},Tt[1]=function(I,O){return"M"+(.5+I)+",0 L"+(.5+I)+",1 M0,"+(.5+O)+" L"+(.5-I)+","+(.5+O)+" L"+(.5-I)+",1 M0,"+(.5-O)+" L"+(.5-I)+","+(.5-O)+" L"+(.5-I)+",0"},Tt),"\u2564":(Bt={},Bt[1]=function(I,O){return"M0,"+(.5-O)+" L1,"+(.5-O)+" M0,"+(.5+O)+" L1,"+(.5+O)+" M.5,"+(.5+O)+" L.5,1"},Bt),"\u2565":(Dt={},Dt[1]=function(I,O){return"M0,.5 L1,.5 M"+(.5-I)+",.5 L"+(.5-I)+",1 M"+(.5+I)+",.5 L"+(.5+I)+",1"},Dt),"\u2566":(Ot={},Ot[1]=function(I,O){return"M0,"+(.5-O)+" L1,"+(.5-O)+" M0,"+(.5+O)+" L"+(.5-I)+","+(.5+O)+" L"+(.5-I)+",1 M1,"+(.5+O)+" L"+(.5+I)+","+(.5+O)+" L"+(.5+I)+",1"},Ot),"\u2567":(Pt={},Pt[1]=function(I,O){return"M.5,0 L.5,"+(.5-O)+" M0,"+(.5-O)+" L1,"+(.5-O)+" M0,"+(.5+O)+" L1,"+(.5+O)},Pt),"\u2568":(It={},It[1]=function(I,O){return"M0,.5 L1,.5 M"+(.5-I)+",.5 L"+(.5-I)+",0 M"+(.5+I)+",.5 L"+(.5+I)+",0"},It),"\u2569":(Ht={},Ht[1]=function(I,O){return"M0,"+(.5+O)+" L1,"+(.5+O)+" M0,"+(.5-O)+" L"+(.5-I)+","+(.5-O)+" L"+(.5-I)+",0 M1,"+(.5-O)+" L"+(.5+I)+","+(.5-O)+" L"+(.5+I)+",0"},Ht),"\u256A":(Ft={},Ft[1]=function(I,O){return"M.5,0 L.5,1 M0,"+(.5-O)+" L1,"+(.5-O)+" M0,"+(.5+O)+" L1,"+(.5+O)},Ft),"\u256B":(jt={},jt[1]=function(I,O){return"M0,.5 L1,.5 M"+(.5-I)+",0 L"+(.5-I)+",1 M"+(.5+I)+",0 L"+(.5+I)+",1"},jt),"\u256C":(Wt={},Wt[1]=function(I,O){return"M0,"+(.5+O)+" L"+(.5-I)+","+(.5+O)+" L"+(.5-I)+",1 M1,"+(.5+O)+" L"+(.5+I)+","+(.5+O)+" L"+(.5+I)+",1 M0,"+(.5-O)+" L"+(.5-I)+","+(.5-O)+" L"+(.5-I)+",0 M1,"+(.5-O)+" L"+(.5+I)+","+(.5-O)+" L"+(.5+I)+",0"},Wt),"\u2571":(Ut={},Ut[1]="M1,0 L0,1",Ut),"\u2572":(qt={},qt[1]="M0,0 L1,1",qt),"\u2573":(Nt={},Nt[1]="M1,0 L0,1 M0,0 L1,1",Nt),"\u257C":(De={},De[1]="M.5,.5 L0,.5",De[3]="M.5,.5 L1,.5",De),"\u257D":(Oe={},Oe[1]="M.5,.5 L.5,0",Oe[3]="M.5,.5 L.5,1",Oe),"\u257E":(Pe={},Pe[1]="M.5,.5 L1,.5",Pe[3]="M.5,.5 L0,.5",Pe),"\u257F":(Ie={},Ie[1]="M.5,.5 L.5,1",Ie[3]="M.5,.5 L.5,0",Ie),"\u250D":(He={},He[1]="M.5,.5 L.5,1",He[3]="M.5,.5 L1,.5",He),"\u250E":(Fe={},Fe[1]="M.5,.5 L1,.5",Fe[3]="M.5,.5 L.5,1",Fe),"\u2511":(je={},je[1]="M.5,.5 L.5,1",je[3]="M.5,.5 L0,.5",je),"\u2512":(We={},We[1]="M.5,.5 L0,.5",We[3]="M.5,.5 L.5,1",We),"\u2515":(Ue={},Ue[1]="M.5,.5 L.5,0",Ue[3]="M.5,.5 L1,.5",Ue),"\u2516":(qe={},qe[1]="M.5,.5 L1,.5",qe[3]="M.5,.5 L.5,0",qe),"\u2519":(Ne={},Ne[1]="M.5,.5 L.5,0",Ne[3]="M.5,.5 L0,.5",Ne),"\u251A":(ze={},ze[1]="M.5,.5 L0,.5",ze[3]="M.5,.5 L.5,0",ze),"\u251D":(Ke={},Ke[1]="M.5,0 L.5,1",Ke[3]="M.5,.5 L1,.5",Ke),"\u251E":(Ve={},Ve[1]="M0.5,1 L.5,.5 L1,.5",Ve[3]="M.5,.5 L.5,0",Ve),"\u251F":(Ge={},Ge[1]="M.5,0 L.5,.5 L1,.5",Ge[3]="M.5,.5 L.5,1",Ge),"\u2520":(Xe={},Xe[1]="M.5,.5 L1,.5",Xe[3]="M.5,0 L.5,1",Xe),"\u2521":(Ye={},Ye[1]="M.5,.5 L.5,1",Ye[3]="M.5,0 L.5,.5 L1,.5",Ye),"\u2522":(Ze={},Ze[1]="M.5,.5 L.5,0",Ze[3]="M0.5,1 L.5,.5 L1,.5",Ze),"\u2525":(Je={},Je[1]="M.5,0 L.5,1",Je[3]="M.5,.5 L0,.5",Je),"\u2526":($e={},$e[1]="M0,.5 L.5,.5 L.5,1",$e[3]="M.5,.5 L.5,0",$e),"\u2527":(Qe={},Qe[1]="M.5,0 L.5,.5 L0,.5",Qe[3]="M.5,.5 L.5,1",Qe),"\u2528":(et={},et[1]="M.5,.5 L0,.5",et[3]="M.5,0 L.5,1",et),"\u2529":(tt={},tt[1]="M.5,.5 L.5,1",tt[3]="M.5,0 L.5,.5 L0,.5",tt),"\u252A":(rt={},rt[1]="M.5,.5 L.5,0",rt[3]="M0,.5 L.5,.5 L.5,1",rt),"\u252D":(it={},it[1]="M0.5,1 L.5,.5 L1,.5",it[3]="M.5,.5 L0,.5",it),"\u252E":(nt={},nt[1]="M0,.5 L.5,.5 L.5,1",nt[3]="M.5,.5 L1,.5",nt),"\u252F":(ot={},ot[1]="M.5,.5 L.5,1",ot[3]="M0,.5 L1,.5",ot),"\u2530":(st={},st[1]="M0,.5 L1,.5",st[3]="M.5,.5 L.5,1",st),"\u2531":(at={},at[1]="M.5,.5 L1,.5",at[3]="M0,.5 L.5,.5 L.5,1",at),"\u2532":(ct={},ct[1]="M.5,.5 L0,.5",ct[3]="M0.5,1 L.5,.5 L1,.5",ct),"\u2535":(lt={},lt[1]="M.5,0 L.5,.5 L1,.5",lt[3]="M.5,.5 L0,.5",lt),"\u2536":(ht={},ht[1]="M.5,0 L.5,.5 L0,.5",ht[3]="M.5,.5 L1,.5",ht),"\u2537":(ut={},ut[1]="M.5,.5 L.5,0",ut[3]="M0,.5 L1,.5",ut),"\u2538":(ft={},ft[1]="M0,.5 L1,.5",ft[3]="M.5,.5 L.5,0",ft),"\u2539":(_t={},_t[1]="M.5,.5 L1,.5",_t[3]="M.5,0 L.5,.5 L0,.5",_t),"\u253A":(dt={},dt[1]="M.5,.5 L0,.5",dt[3]="M.5,0 L.5,.5 L1,.5",dt),"\u253D":(pt={},pt[1]="M.5,0 L.5,1 M.5,.5 L1,.5",pt[3]="M.5,.5 L0,.5",pt),"\u253E":(vt={},vt[1]="M.5,0 L.5,1 M.5,.5 L0,.5",vt[3]="M.5,.5 L1,.5",vt),"\u253F":(gt={},gt[1]="M.5,0 L.5,1",gt[3]="M0,.5 L1,.5",gt),"\u2540":(yt={},yt[1]="M0,.5 L1,.5 M.5,.5 L.5,1",yt[3]="M.5,.5 L.5,0",yt),"\u2541":(mt={},mt[1]="M.5,.5 L.5,0 M0,.5 L1,.5",mt[3]="M.5,.5 L.5,1",mt),"\u2542":(St={},St[1]="M0,.5 L1,.5",St[3]="M.5,0 L.5,1",St),"\u2543":(bt={},bt[1]="M0.5,1 L.5,.5 L1,.5",bt[3]="M.5,0 L.5,.5 L0,.5",bt),"\u2544":(Ct={},Ct[1]="M0,.5 L.5,.5 L.5,1",Ct[3]="M.5,0 L.5,.5 L1,.5",Ct),"\u2545":(wt={},wt[1]="M.5,0 L.5,.5 L1,.5",wt[3]="M0,.5 L.5,.5 L.5,1",wt),"\u2546":(Lt={},Lt[1]="M.5,0 L.5,.5 L0,.5",Lt[3]="M0.5,1 L.5,.5 L1,.5",Lt),"\u2547":(Et={},Et[1]="M.5,.5 L.5,1",Et[3]="M.5,.5 L.5,0 M0,.5 L1,.5",Et),"\u2548":(xt={},xt[1]="M.5,.5 L.5,0",xt[3]="M0,.5 L1,.5 M.5,.5 L.5,1",xt),"\u2549":(At={},At[1]="M.5,.5 L1,.5",At[3]="M.5,0 L.5,1 M.5,.5 L0,.5",At),"\u254A":(kt={},kt[1]="M.5,.5 L0,.5",kt[3]="M.5,0 L.5,1 M.5,.5 L1,.5",kt),"\u254C":(zt={},zt[1]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",zt),"\u254D":(Kt={},Kt[3]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",Kt),"\u2504":(Vt={},Vt[1]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",Vt),"\u2505":(Gt={},Gt[3]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",Gt),"\u2508":(Xt={},Xt[1]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",Xt),"\u2509":(Yt={},Yt[3]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",Yt),"\u254E":(Zt={},Zt[1]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",Zt),"\u254F":(Jt={},Jt[3]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",Jt),"\u2506":($t={},$t[1]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",$t),"\u2507":(Qt={},Qt[3]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",Qt),"\u250A":(er={},er[1]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",er),"\u250B":(tr={},tr[3]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",tr),"\u256D":(rr={},rr[1]="C.5,1,.5,.5,1,.5",rr),"\u256E":(ir={},ir[1]="C.5,1,.5,.5,0,.5",ir),"\u256F":(nr={},nr[1]="C.5,0,.5,.5,0,.5",nr),"\u2570":(or={},or[1]="C.5,0,.5,.5,1,.5",or)},s.tryDrawCustomChar=function(I,O,ue,Ae,ke,ee){var fe=s.blockElementDefinitions[O];if(fe)return function(ie,de,Re,Te,we,Le){for(var ae=0;ae<de.length;ae++){var ne=de[ae],$=we/8,pe=Le/8;ie.fillRect(Re+ne.x*$,Te+ne.y*pe,ne.w*$,ne.h*pe)}}(I,fe,ue,Ae,ke,ee),!0;var _e=wr[O];if(_e)return function(ie,de,Re,Te,we,Le){var ae,ne=ur.get(de);ne||(ne=new Map,ur.set(de,ne));var $=ie.fillStyle;if(typeof $!="string")throw new Error('Unexpected fillStyle type "'+$+'"');var pe=ne.get($);if(!pe){var ce=de[0].length,ge=de.length,ye=document.createElement("canvas");ye.width=ce,ye.height=ge;var Mt=(0,hr.throwIfFalsy)(ye.getContext("2d")),ve=new ImageData(ce,ge),Ee=void 0,me=void 0,sr=void 0,ar=void 0;if($.startsWith("#"))Ee=parseInt($.substr(1,2),16),me=parseInt($.substr(3,2),16),sr=parseInt($.substr(5,2),16),ar=$.length>7&&parseInt($.substr(7,2),16)||1;else{if(!$.startsWith("rgba"))throw new Error('Unexpected fillStyle color format "'+$+'" when drawing pattern glyph');Ee=(ae=$.substring(5,$.length-1).split(",").map(function(xr){return parseFloat(xr)}))[0],me=ae[1],sr=ae[2],ar=ae[3]}for(var Se=0;Se<ge;Se++)for(var be=0;be<ce;be++)ve.data[4*(Se*ce+be)]=Ee,ve.data[4*(Se*ce+be)+1]=me,ve.data[4*(Se*ce+be)+2]=sr,ve.data[4*(Se*ce+be)+3]=de[Se][be]*(255*ar);Mt.putImageData(ve,0,0),pe=(0,hr.throwIfFalsy)(ie.createPattern(ye,null)),ne.set($,pe)}ie.fillStyle=pe,ie.fillRect(Re,Te,we,Le)}(I,_e,ue,Ae,ke,ee),!0;var Me=s.boxDrawingDefinitions[O];return!!Me&&(function(ie,de,Re,Te,we,Le){ie.strokeStyle=ie.fillStyle;for(var ae=0,ne=Object.entries(de);ae<ne.length;ae++){var $=ne[ae],pe=$[0],ce=$[1];ie.beginPath(),ie.lineWidth=window.devicePixelRatio*Number.parseInt(pe);for(var ge=0,ye=(typeof ce=="function"?ce(.15,.15/Le*we):ce).split(" ");ge<ye.length;ge++){var Mt=ye[ge],ve=Mt[0],Ee=Lr[ve];if(Ee){var me=Mt.substring(1).split(",");me[0]&&me[1]&&Ee(ie,Er(me,we,Le,Re,Te))}else console.error('Could not find drawing instructions for "'+ve+'"')}ie.stroke(),ie.closePath()}}(I,Me,ue,Ae,ke,ee),!0)};var ur=new Map;function fr(I,O,ue){return ue===void 0&&(ue=0),Math.max(Math.min(I,O),ue)}var Lr={C:function(I,O){return I.bezierCurveTo(O[0],O[1],O[2],O[3],O[4],O[5])},L:function(I,O){return I.lineTo(O[0],O[1])},M:function(I,O){return I.moveTo(O[0],O[1])}};function Er(I,O,ue,Ae,ke){var ee=I.map(function(Me){return parseFloat(Me)||parseInt(Me)});if(ee.length<2)throw new Error("Too few arguments for instruction");for(var fe=0;fe<ee.length;fe+=2)ee[fe]*=O,ee[fe]!==0&&(ee[fe]=fr(Math.round(ee[fe]+.5)-.5,O,0)),ee[fe]+=Ae;for(var _e=1;_e<ee.length;_e+=2)ee[_e]*=ue,ee[_e]!==0&&(ee[_e]=fr(Math.round(ee[_e]+.5)-.5,ue,0)),ee[_e]+=ke;return ee}},3700:(P,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.GridCache=void 0;var v=function(){function l(){this.cache=[]}return l.prototype.resize=function(_,f){for(var u=0;u<_;u++){this.cache.length<=u&&this.cache.push([]);for(var S=this.cache[u].length;S<f;S++)this.cache[u].push(void 0);this.cache[u].length=f}this.cache.length=_},l.prototype.clear=function(){for(var _=0;_<this.cache.length;_++)for(var f=0;f<this.cache[_].length;f++)this.cache[_][f]=void 0},l}();s.GridCache=v},5098:function(P,s,v){var l,_=this&&this.__extends||(l=function(n,t){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},l(n,t)},function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}l(n,t),n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}),f=this&&this.__decorate||function(n,t,e,r){var o,c=arguments.length,p=c<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(n,t,e,r);else for(var g=n.length-1;g>=0;g--)(o=n[g])&&(p=(c<3?o(p):c>3?o(t,e,p):o(t,e))||p);return c>3&&p&&Object.defineProperty(t,e,p),p},u=this&&this.__param||function(n,t){return function(e,r){t(e,r,n)}};Object.defineProperty(s,"__esModule",{value:!0}),s.LinkRenderLayer=void 0;var S=v(1546),d=v(8803),i=v(2040),a=v(2585),h=function(n){function t(e,r,o,c,p,g,C,b){var y=n.call(this,e,"link",r,!0,o,c,C,b)||this;return p.onShowLinkUnderline(function(m){return y._onShowLinkUnderline(m)}),p.onHideLinkUnderline(function(m){return y._onHideLinkUnderline(m)}),g.onShowLinkUnderline(function(m){return y._onShowLinkUnderline(m)}),g.onHideLinkUnderline(function(m){return y._onHideLinkUnderline(m)}),y}return _(t,n),t.prototype.resize=function(e){n.prototype.resize.call(this,e),this._state=void 0},t.prototype.reset=function(){this._clearCurrentLink()},t.prototype._clearCurrentLink=function(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);var e=this._state.y2-this._state.y1-1;e>0&&this._clearCells(0,this._state.y1+1,this._state.cols,e),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}},t.prototype._onShowLinkUnderline=function(e){if(e.fg===d.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._colors.background.css:e.fg&&(0,i.is256Color)(e.fg)?this._ctx.fillStyle=this._colors.ansi[e.fg].css:this._ctx.fillStyle=this._colors.foreground.css,e.y1===e.y2)this._fillBottomLineAtCells(e.x1,e.y1,e.x2-e.x1);else{this._fillBottomLineAtCells(e.x1,e.y1,e.cols-e.x1);for(var r=e.y1+1;r<e.y2;r++)this._fillBottomLineAtCells(0,r,e.cols);this._fillBottomLineAtCells(0,e.y2,e.x2)}this._state=e},t.prototype._onHideLinkUnderline=function(e){this._clearCurrentLink()},f([u(6,a.IBufferService),u(7,a.IOptionsService)],t)}(S.BaseRenderLayer);s.LinkRenderLayer=h},3525:function(P,s,v){var l,_=this&&this.__extends||(l=function(p,g){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,b){C.__proto__=b}||function(C,b){for(var y in b)Object.prototype.hasOwnProperty.call(b,y)&&(C[y]=b[y])},l(p,g)},function(p,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");function C(){this.constructor=p}l(p,g),p.prototype=g===null?Object.create(g):(C.prototype=g.prototype,new C)}),f=this&&this.__decorate||function(p,g,C,b){var y,m=arguments.length,k=m<3?g:b===null?b=Object.getOwnPropertyDescriptor(g,C):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(p,g,C,b);else for(var w=p.length-1;w>=0;w--)(y=p[w])&&(k=(m<3?y(k):m>3?y(g,C,k):y(g,C))||k);return m>3&&k&&Object.defineProperty(g,C,k),k},u=this&&this.__param||function(p,g){return function(C,b){g(C,b,p)}};Object.defineProperty(s,"__esModule",{value:!0}),s.Renderer=void 0;var S=v(9596),d=v(4149),i=v(2512),a=v(5098),h=v(844),n=v(4725),t=v(2585),e=v(1420),r=v(8460),o=1,c=function(p){function g(C,b,y,m,k,w,A,x){var L=p.call(this)||this;L._colors=C,L._screenElement=b,L._bufferService=w,L._charSizeService=A,L._optionsService=x,L._id=o++,L._onRequestRedraw=new r.EventEmitter;var D=L._optionsService.options.allowTransparency;return L._renderLayers=[k.createInstance(S.TextRenderLayer,L._screenElement,0,L._colors,D,L._id),k.createInstance(d.SelectionRenderLayer,L._screenElement,1,L._colors,L._id),k.createInstance(a.LinkRenderLayer,L._screenElement,2,L._colors,L._id,y,m),k.createInstance(i.CursorRenderLayer,L._screenElement,3,L._colors,L._id,L._onRequestRedraw)],L.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},L._devicePixelRatio=window.devicePixelRatio,L._updateDimensions(),L.onOptionsChanged(),L}return _(g,p),Object.defineProperty(g.prototype,"onRequestRedraw",{get:function(){return this._onRequestRedraw.event},enumerable:!1,configurable:!0}),g.prototype.dispose=function(){for(var C=0,b=this._renderLayers;C<b.length;C++)b[C].dispose();p.prototype.dispose.call(this),(0,e.removeTerminalFromCache)(this._id)},g.prototype.onDevicePixelRatioChange=function(){this._devicePixelRatio!==window.devicePixelRatio&&(this._devicePixelRatio=window.devicePixelRatio,this.onResize(this._bufferService.cols,this._bufferService.rows))},g.prototype.setColors=function(C){this._colors=C;for(var b=0,y=this._renderLayers;b<y.length;b++){var m=y[b];m.setColors(this._colors),m.reset()}},g.prototype.onResize=function(C,b){this._updateDimensions();for(var y=0,m=this._renderLayers;y<m.length;y++)m[y].resize(this.dimensions);this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},g.prototype.onCharSizeChanged=function(){this.onResize(this._bufferService.cols,this._bufferService.rows)},g.prototype.onBlur=function(){this._runOperation(function(C){return C.onBlur()})},g.prototype.onFocus=function(){this._runOperation(function(C){return C.onFocus()})},g.prototype.onSelectionChanged=function(C,b,y){y===void 0&&(y=!1),this._runOperation(function(m){return m.onSelectionChanged(C,b,y)})},g.prototype.onCursorMove=function(){this._runOperation(function(C){return C.onCursorMove()})},g.prototype.onOptionsChanged=function(){this._runOperation(function(C){return C.onOptionsChanged()})},g.prototype.clear=function(){this._runOperation(function(C){return C.reset()})},g.prototype._runOperation=function(C){for(var b=0,y=this._renderLayers;b<y.length;b++)C(y[b])},g.prototype.renderRows=function(C,b){for(var y=0,m=this._renderLayers;y<m.length;y++)m[y].onGridChanged(C,b)},g.prototype.clearTextureAtlas=function(){for(var C=0,b=this._renderLayers;C<b.length;C++)b[C].clearTextureAtlas()},g.prototype._updateDimensions=function(){this._charSizeService.hasValidSize&&(this.dimensions.scaledCharWidth=Math.floor(this._charSizeService.width*window.devicePixelRatio),this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.options.lineHeight),this.dimensions.scaledCharTop=this._optionsService.options.lineHeight===1?0:Math.round((this.dimensions.scaledCellHeight-this.dimensions.scaledCharHeight)/2),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.options.letterSpacing),this.dimensions.scaledCharLeft=Math.floor(this._optionsService.options.letterSpacing/2),this.dimensions.scaledCanvasHeight=this._bufferService.rows*this.dimensions.scaledCellHeight,this.dimensions.scaledCanvasWidth=this._bufferService.cols*this.dimensions.scaledCellWidth,this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows,this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols)},f([u(4,t.IInstantiationService),u(5,t.IBufferService),u(6,n.ICharSizeService),u(7,t.IOptionsService)],g)}(h.Disposable);s.Renderer=c},1752:(P,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.throwIfFalsy=void 0,s.throwIfFalsy=function(v){if(!v)throw new Error("value must not be falsy");return v}},4149:function(P,s,v){var l,_=this&&this.__extends||(l=function(a,h){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e])},l(a,h)},function(a,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function n(){this.constructor=a}l(a,h),a.prototype=h===null?Object.create(h):(n.prototype=h.prototype,new n)}),f=this&&this.__decorate||function(a,h,n,t){var e,r=arguments.length,o=r<3?h:t===null?t=Object.getOwnPropertyDescriptor(h,n):t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(a,h,n,t);else for(var c=a.length-1;c>=0;c--)(e=a[c])&&(o=(r<3?e(o):r>3?e(h,n,o):e(h,n))||o);return r>3&&o&&Object.defineProperty(h,n,o),o},u=this&&this.__param||function(a,h){return function(n,t){h(n,t,a)}};Object.defineProperty(s,"__esModule",{value:!0}),s.SelectionRenderLayer=void 0;var S=v(1546),d=v(2585),i=function(a){function h(n,t,e,r,o,c){var p=a.call(this,n,"selection",t,!0,e,r,o,c)||this;return p._clearState(),p}return _(h,a),h.prototype._clearState=function(){this._state={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}},h.prototype.resize=function(n){a.prototype.resize.call(this,n),this._clearState()},h.prototype.reset=function(){this._state.start&&this._state.end&&(this._clearState(),this._clearAll())},h.prototype.onSelectionChanged=function(n,t,e){if(this._didStateChange(n,t,e,this._bufferService.buffer.ydisp))if(this._clearAll(),n&&t){var r=n[1]-this._bufferService.buffer.ydisp,o=t[1]-this._bufferService.buffer.ydisp,c=Math.max(r,0),p=Math.min(o,this._bufferService.rows-1);if(c>=this._bufferService.rows||p<0)this._state.ydisp=this._bufferService.buffer.ydisp;else{if(this._ctx.fillStyle=this._colors.selectionTransparent.css,e){var g=n[0],C=t[0]-g,b=p-c+1;this._fillCells(g,c,C,b)}else{g=r===c?n[0]:0;var y=c===o?t[0]:this._bufferService.cols;this._fillCells(g,c,y-g,1);var m=Math.max(p-c-1,0);if(this._fillCells(0,c+1,this._bufferService.cols,m),c!==p){var k=o===p?t[0]:this._bufferService.cols;this._fillCells(0,p,k,1)}}this._state.start=[n[0],n[1]],this._state.end=[t[0],t[1]],this._state.columnSelectMode=e,this._state.ydisp=this._bufferService.buffer.ydisp}}else this._clearState()},h.prototype._didStateChange=function(n,t,e,r){return!this._areCoordinatesEqual(n,this._state.start)||!this._areCoordinatesEqual(t,this._state.end)||e!==this._state.columnSelectMode||r!==this._state.ydisp},h.prototype._areCoordinatesEqual=function(n,t){return!(!n||!t)&&n[0]===t[0]&&n[1]===t[1]},f([u(4,d.IBufferService),u(5,d.IOptionsService)],h)}(S.BaseRenderLayer);s.SelectionRenderLayer=i},9596:function(P,s,v){var l,_=this&&this.__extends||(l=function(o,c){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,g){p.__proto__=g}||function(p,g){for(var C in g)Object.prototype.hasOwnProperty.call(g,C)&&(p[C]=g[C])},l(o,c)},function(o,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function p(){this.constructor=o}l(o,c),o.prototype=c===null?Object.create(c):(p.prototype=c.prototype,new p)}),f=this&&this.__decorate||function(o,c,p,g){var C,b=arguments.length,y=b<3?c:g===null?g=Object.getOwnPropertyDescriptor(c,p):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(o,c,p,g);else for(var m=o.length-1;m>=0;m--)(C=o[m])&&(y=(b<3?C(y):b>3?C(c,p,y):C(c,p))||y);return b>3&&y&&Object.defineProperty(c,p,y),y},u=this&&this.__param||function(o,c){return function(p,g){c(p,g,o)}};Object.defineProperty(s,"__esModule",{value:!0}),s.TextRenderLayer=void 0;var S=v(3700),d=v(1546),i=v(3734),a=v(643),h=v(511),n=v(2585),t=v(4725),e=v(4269),r=function(o){function c(p,g,C,b,y,m,k,w){var A=o.call(this,p,"text",g,b,C,y,m,k)||this;return A._characterJoinerService=w,A._characterWidth=0,A._characterFont="",A._characterOverlapCache={},A._workCell=new h.CellData,A._state=new S.GridCache,A}return _(c,o),c.prototype.resize=function(p){o.prototype.resize.call(this,p);var g=this._getFont(!1,!1);this._characterWidth===p.scaledCharWidth&&this._characterFont===g||(this._characterWidth=p.scaledCharWidth,this._characterFont=g,this._characterOverlapCache={}),this._state.clear(),this._state.resize(this._bufferService.cols,this._bufferService.rows)},c.prototype.reset=function(){this._state.clear(),this._clearAll()},c.prototype._forEachCell=function(p,g,C){for(var b=p;b<=g;b++)for(var y=b+this._bufferService.buffer.ydisp,m=this._bufferService.buffer.lines.get(y),k=this._characterJoinerService.getJoinedCharacters(y),w=0;w<this._bufferService.cols;w++){m.loadCell(w,this._workCell);var A=this._workCell,x=!1,L=w;if(A.getWidth()!==0){if(k.length>0&&w===k[0][0]){x=!0;var D=k.shift();A=new e.JoinedCellData(this._workCell,m.translateToString(!0,D[0],D[1]),D[1]-D[0]),L=D[1]-1}!x&&this._isOverlapping(A)&&L<m.length-1&&m.getCodePoint(L+1)===a.NULL_CELL_CODE&&(A.content&=-12582913,A.content|=2<<22),C(A,w,b),w=L}}},c.prototype._drawBackground=function(p,g){var C=this,b=this._ctx,y=this._bufferService.cols,m=0,k=0,w=null;b.save(),this._forEachCell(p,g,function(A,x,L){var D=null;A.isInverse()?D=A.isFgDefault()?C._colors.foreground.css:A.isFgRGB()?"rgb("+i.AttributeData.toColorRGB(A.getFgColor()).join(",")+")":C._colors.ansi[A.getFgColor()].css:A.isBgRGB()?D="rgb("+i.AttributeData.toColorRGB(A.getBgColor()).join(",")+")":A.isBgPalette()&&(D=C._colors.ansi[A.getBgColor()].css),w===null&&(m=x,k=L),L!==k?(b.fillStyle=w||"",C._fillCells(m,k,y-m,1),m=x,k=L):w!==D&&(b.fillStyle=w||"",C._fillCells(m,k,x-m,1),m=x,k=L),w=D}),w!==null&&(b.fillStyle=w,this._fillCells(m,k,y-m,1)),b.restore()},c.prototype._drawForeground=function(p,g){var C=this;this._forEachCell(p,g,function(b,y,m){if(!b.isInvisible()&&(C._drawChars(b,y,m),b.isUnderline()||b.isStrikethrough())){if(C._ctx.save(),b.isInverse())if(b.isBgDefault())C._ctx.fillStyle=C._colors.background.css;else if(b.isBgRGB())C._ctx.fillStyle="rgb("+i.AttributeData.toColorRGB(b.getBgColor()).join(",")+")";else{var k=b.getBgColor();C._optionsService.options.drawBoldTextInBrightColors&&b.isBold()&&k<8&&(k+=8),C._ctx.fillStyle=C._colors.ansi[k].css}else if(b.isFgDefault())C._ctx.fillStyle=C._colors.foreground.css;else if(b.isFgRGB())C._ctx.fillStyle="rgb("+i.AttributeData.toColorRGB(b.getFgColor()).join(",")+")";else{var w=b.getFgColor();C._optionsService.options.drawBoldTextInBrightColors&&b.isBold()&&w<8&&(w+=8),C._ctx.fillStyle=C._colors.ansi[w].css}b.isStrikethrough()&&C._fillMiddleLineAtCells(y,m,b.getWidth()),b.isUnderline()&&C._fillBottomLineAtCells(y,m,b.getWidth()),C._ctx.restore()}})},c.prototype.onGridChanged=function(p,g){this._state.cache.length!==0&&(this._charAtlas&&this._charAtlas.beginFrame(),this._clearCells(0,p,this._bufferService.cols,g-p+1),this._drawBackground(p,g),this._drawForeground(p,g))},c.prototype.onOptionsChanged=function(){this._setTransparency(this._optionsService.options.allowTransparency)},c.prototype._isOverlapping=function(p){if(p.getWidth()!==1||p.getCode()<256)return!1;var g=p.getChars();if(this._characterOverlapCache.hasOwnProperty(g))return this._characterOverlapCache[g];this._ctx.save(),this._ctx.font=this._characterFont;var C=Math.floor(this._ctx.measureText(g).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[g]=C,C},f([u(5,n.IBufferService),u(6,n.IOptionsService),u(7,t.ICharacterJoinerService)],c)}(d.BaseRenderLayer);s.TextRenderLayer=r},9616:(P,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BaseCharAtlas=void 0;var v=function(){function l(){this._didWarmUp=!1}return l.prototype.dispose=function(){},l.prototype.warmUp=function(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)},l.prototype._doWarmUp=function(){},l.prototype.clear=function(){},l.prototype.beginFrame=function(){},l}();s.BaseCharAtlas=v},1420:(P,s,v)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.removeTerminalFromCache=s.acquireCharAtlas=void 0;var l=v(2040),_=v(1906),f=[];s.acquireCharAtlas=function(u,S,d,i,a){for(var h=(0,l.generateConfig)(i,a,u,d),n=0;n<f.length;n++){var t=(e=f[n]).ownedBy.indexOf(S);if(t>=0){if((0,l.configEquals)(e.config,h))return e.atlas;e.ownedBy.length===1?(e.atlas.dispose(),f.splice(n,1)):e.ownedBy.splice(t,1);break}}for(n=0;n<f.length;n++){var e=f[n];if((0,l.configEquals)(e.config,h))return e.ownedBy.push(S),e.atlas}var r={atlas:new _.DynamicCharAtlas(document,h),config:h,ownedBy:[S]};return f.push(r),r.atlas},s.removeTerminalFromCache=function(u){for(var S=0;S<f.length;S++){var d=f[S].ownedBy.indexOf(u);if(d!==-1){f[S].ownedBy.length===1?(f[S].atlas.dispose(),f.splice(S,1)):f[S].ownedBy.splice(d,1);break}}}},2040:(P,s,v)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.is256Color=s.configEquals=s.generateConfig=void 0;var l=v(643);s.generateConfig=function(_,f,u,S){var d={foreground:S.foreground,background:S.background,cursor:void 0,cursorAccent:void 0,selection:void 0,ansi:S.ansi};return{devicePixelRatio:window.devicePixelRatio,scaledCharWidth:_,scaledCharHeight:f,fontFamily:u.fontFamily,fontSize:u.fontSize,fontWeight:u.fontWeight,fontWeightBold:u.fontWeightBold,allowTransparency:u.allowTransparency,colors:d}},s.configEquals=function(_,f){for(var u=0;u<_.colors.ansi.length;u++)if(_.colors.ansi[u].rgba!==f.colors.ansi[u].rgba)return!1;return _.devicePixelRatio===f.devicePixelRatio&&_.fontFamily===f.fontFamily&&_.fontSize===f.fontSize&&_.fontWeight===f.fontWeight&&_.fontWeightBold===f.fontWeightBold&&_.allowTransparency===f.allowTransparency&&_.scaledCharWidth===f.scaledCharWidth&&_.scaledCharHeight===f.scaledCharHeight&&_.colors.foreground===f.colors.foreground&&_.colors.background===f.colors.background},s.is256Color=function(_){return _<l.DEFAULT_COLOR}},8803:(P,s,v)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CHAR_ATLAS_CELL_SPACING=s.TEXT_BASELINE=s.DIM_OPACITY=s.INVERTED_DEFAULT_COLOR=void 0;var l=v(6114);s.INVERTED_DEFAULT_COLOR=257,s.DIM_OPACITY=.5,s.TEXT_BASELINE=l.isFirefox?"bottom":"ideographic",s.CHAR_ATLAS_CELL_SPACING=1},1906:function(P,s,v){var l,_=this&&this.__extends||(l=function(g,C){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,y){b.__proto__=y}||function(b,y){for(var m in y)Object.prototype.hasOwnProperty.call(y,m)&&(b[m]=y[m])},l(g,C)},function(g,C){if(typeof C!="function"&&C!==null)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");function b(){this.constructor=g}l(g,C),g.prototype=C===null?Object.create(C):(b.prototype=C.prototype,new b)});Object.defineProperty(s,"__esModule",{value:!0}),s.NoneCharAtlas=s.DynamicCharAtlas=s.getGlyphCacheKey=void 0;var f=v(8803),u=v(9616),S=v(5680),d=v(7001),i=v(6114),a=v(1752),h=v(4774),n=1024,t=1024,e={css:"rgba(0, 0, 0, 0)",rgba:0};function r(g){return g.code<<21|g.bg<<12|g.fg<<3|(g.bold?0:4)+(g.dim?0:2)+(g.italic?0:1)}s.getGlyphCacheKey=r;var o=function(g){function C(b,y){var m=g.call(this)||this;m._config=y,m._drawToCacheCount=0,m._glyphsWaitingOnBitmap=[],m._bitmapCommitTimeout=null,m._bitmap=null,m._cacheCanvas=b.createElement("canvas"),m._cacheCanvas.width=n,m._cacheCanvas.height=t,m._cacheCtx=(0,a.throwIfFalsy)(m._cacheCanvas.getContext("2d",{alpha:!0}));var k=b.createElement("canvas");k.width=m._config.scaledCharWidth,k.height=m._config.scaledCharHeight,m._tmpCtx=(0,a.throwIfFalsy)(k.getContext("2d",{alpha:m._config.allowTransparency})),m._width=Math.floor(n/m._config.scaledCharWidth),m._height=Math.floor(t/m._config.scaledCharHeight);var w=m._width*m._height;return m._cacheMap=new d.LRUMap(w),m._cacheMap.prealloc(w),m}return _(C,g),C.prototype.dispose=function(){this._bitmapCommitTimeout!==null&&(window.clearTimeout(this._bitmapCommitTimeout),this._bitmapCommitTimeout=null)},C.prototype.beginFrame=function(){this._drawToCacheCount=0},C.prototype.clear=function(){if(this._cacheMap.size>0){var b=this._width*this._height;this._cacheMap=new d.LRUMap(b),this._cacheMap.prealloc(b)}this._cacheCtx.clearRect(0,0,n,t),this._tmpCtx.clearRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight)},C.prototype.draw=function(b,y,m,k){if(y.code===32)return!0;if(!this._canCache(y))return!1;var w=r(y),A=this._cacheMap.get(w);if(A!=null)return this._drawFromCache(b,A,m,k),!0;if(this._drawToCacheCount<100){var x;x=this._cacheMap.size<this._cacheMap.capacity?this._cacheMap.size:this._cacheMap.peek().index;var L=this._drawToCache(y,x);return this._cacheMap.set(w,L),this._drawFromCache(b,L,m,k),!0}return!1},C.prototype._canCache=function(b){return b.code<256},C.prototype._toCoordinateX=function(b){return b%this._width*this._config.scaledCharWidth},C.prototype._toCoordinateY=function(b){return Math.floor(b/this._width)*this._config.scaledCharHeight},C.prototype._drawFromCache=function(b,y,m,k){if(!y.isEmpty){var w=this._toCoordinateX(y.index),A=this._toCoordinateY(y.index);b.drawImage(y.inBitmap?this._bitmap:this._cacheCanvas,w,A,this._config.scaledCharWidth,this._config.scaledCharHeight,m,k,this._config.scaledCharWidth,this._config.scaledCharHeight)}},C.prototype._getColorFromAnsiIndex=function(b){return b<this._config.colors.ansi.length?this._config.colors.ansi[b]:S.DEFAULT_ANSI_COLORS[b]},C.prototype._getBackgroundColor=function(b){return this._config.allowTransparency?e:b.bg===f.INVERTED_DEFAULT_COLOR?this._config.colors.foreground:b.bg<256?this._getColorFromAnsiIndex(b.bg):this._config.colors.background},C.prototype._getForegroundColor=function(b){return b.fg===f.INVERTED_DEFAULT_COLOR?h.color.opaque(this._config.colors.background):b.fg<256?this._getColorFromAnsiIndex(b.fg):this._config.colors.foreground},C.prototype._drawToCache=function(b,y){this._drawToCacheCount++,this._tmpCtx.save();var m=this._getBackgroundColor(b);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=m.css,this._tmpCtx.fillRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),this._tmpCtx.globalCompositeOperation="source-over";var k=b.bold?this._config.fontWeightBold:this._config.fontWeight,w=b.italic?"italic":"";this._tmpCtx.font=w+" "+k+" "+this._config.fontSize*this._config.devicePixelRatio+"px "+this._config.fontFamily,this._tmpCtx.textBaseline=f.TEXT_BASELINE,this._tmpCtx.fillStyle=this._getForegroundColor(b).css,b.dim&&(this._tmpCtx.globalAlpha=f.DIM_OPACITY),this._tmpCtx.fillText(b.chars,0,this._config.scaledCharHeight);var A=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),x=!1;if(this._config.allowTransparency||(x=p(A,m)),x&&b.chars==="_"&&!this._config.allowTransparency)for(var L=1;L<=5&&(this._tmpCtx.fillText(b.chars,0,this._config.scaledCharHeight-L),x=p(A=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),m));L++);this._tmpCtx.restore();var D=this._toCoordinateX(y),T=this._toCoordinateY(y);this._cacheCtx.putImageData(A,D,T);var j={index:y,isEmpty:x,inBitmap:!1};return this._addGlyphToBitmap(j),j},C.prototype._addGlyphToBitmap=function(b){var y=this;!("createImageBitmap"in window)||i.isFirefox||i.isSafari||(this._glyphsWaitingOnBitmap.push(b),this._bitmapCommitTimeout===null&&(this._bitmapCommitTimeout=window.setTimeout(function(){return y._generateBitmap()},100)))},C.prototype._generateBitmap=function(){var b=this,y=this._glyphsWaitingOnBitmap;this._glyphsWaitingOnBitmap=[],window.createImageBitmap(this._cacheCanvas).then(function(m){b._bitmap=m;for(var k=0;k<y.length;k++)y[k].inBitmap=!0}),this._bitmapCommitTimeout=null},C}(u.BaseCharAtlas);s.DynamicCharAtlas=o;var c=function(g){function C(b,y){return g.call(this)||this}return _(C,g),C.prototype.draw=function(b,y,m,k){return!1},C}(u.BaseCharAtlas);function p(g,C){for(var b=!0,y=C.rgba>>>24,m=C.rgba>>>16&255,k=C.rgba>>>8&255,w=0;w<g.data.length;w+=4)g.data[w]===y&&g.data[w+1]===m&&g.data[w+2]===k?g.data[w+3]=0:b=!1;return b}s.NoneCharAtlas=c},7001:(P,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.LRUMap=void 0;var v=function(){function l(_){this.capacity=_,this._map={},this._head=null,this._tail=null,this._nodePool=[],this.size=0}return l.prototype._unlinkNode=function(_){var f=_.prev,u=_.next;_===this._head&&(this._head=u),_===this._tail&&(this._tail=f),f!==null&&(f.next=u),u!==null&&(u.prev=f)},l.prototype._appendNode=function(_){var f=this._tail;f!==null&&(f.next=_),_.prev=f,_.next=null,this._tail=_,this._head===null&&(this._head=_)},l.prototype.prealloc=function(_){for(var f=this._nodePool,u=0;u<_;u++)f.push({prev:null,next:null,key:null,value:null})},l.prototype.get=function(_){var f=this._map[_];return f!==void 0?(this._unlinkNode(f),this._appendNode(f),f.value):null},l.prototype.peekValue=function(_){var f=this._map[_];return f!==void 0?f.value:null},l.prototype.peek=function(){var _=this._head;return _===null?null:_.value},l.prototype.set=function(_,f){var u=this._map[_];if(u!==void 0)u=this._map[_],this._unlinkNode(u),u.value=f;else if(this.size>=this.capacity)u=this._head,this._unlinkNode(u),delete this._map[u.key],u.key=_,u.value=f,this._map[_]=u;else{var S=this._nodePool;S.length>0?((u=S.pop()).key=_,u.value=f):u={prev:null,next:null,key:_,value:f},this._map[_]=u,this.size++}this._appendNode(u)},l}();s.LRUMap=v},1296:function(P,s,v){var l,_=this&&this.__extends||(l=function(b,y){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,k){m.__proto__=k}||function(m,k){for(var w in k)Object.prototype.hasOwnProperty.call(k,w)&&(m[w]=k[w])},l(b,y)},function(b,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function m(){this.constructor=b}l(b,y),b.prototype=y===null?Object.create(y):(m.prototype=y.prototype,new m)}),f=this&&this.__decorate||function(b,y,m,k){var w,A=arguments.length,x=A<3?y:k===null?k=Object.getOwnPropertyDescriptor(y,m):k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(b,y,m,k);else for(var L=b.length-1;L>=0;L--)(w=b[L])&&(x=(A<3?w(x):A>3?w(y,m,x):w(y,m))||x);return A>3&&x&&Object.defineProperty(y,m,x),x},u=this&&this.__param||function(b,y){return function(m,k){y(m,k,b)}};Object.defineProperty(s,"__esModule",{value:!0}),s.DomRenderer=void 0;var S=v(3787),d=v(8803),i=v(844),a=v(4725),h=v(2585),n=v(8460),t=v(4774),e=v(9631),r="xterm-dom-renderer-owner-",o="xterm-fg-",c="xterm-bg-",p="xterm-focus",g=1,C=function(b){function y(m,k,w,A,x,L,D,T,j,W){var F=b.call(this)||this;return F._colors=m,F._element=k,F._screenElement=w,F._viewportElement=A,F._linkifier=x,F._linkifier2=L,F._charSizeService=T,F._optionsService=j,F._bufferService=W,F._terminalClass=g++,F._rowElements=[],F._rowContainer=document.createElement("div"),F._rowContainer.classList.add("xterm-rows"),F._rowContainer.style.lineHeight="normal",F._rowContainer.setAttribute("aria-hidden","true"),F._refreshRowElements(F._bufferService.cols,F._bufferService.rows),F._selectionContainer=document.createElement("div"),F._selectionContainer.classList.add("xterm-selection"),F._selectionContainer.setAttribute("aria-hidden","true"),F.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},F._updateDimensions(),F._injectCss(),F._rowFactory=D.createInstance(S.DomRendererRowFactory,document,F._colors),F._element.classList.add(r+F._terminalClass),F._screenElement.appendChild(F._rowContainer),F._screenElement.appendChild(F._selectionContainer),F._linkifier.onShowLinkUnderline(function(N){return F._onLinkHover(N)}),F._linkifier.onHideLinkUnderline(function(N){return F._onLinkLeave(N)}),F._linkifier2.onShowLinkUnderline(function(N){return F._onLinkHover(N)}),F._linkifier2.onHideLinkUnderline(function(N){return F._onLinkLeave(N)}),F}return _(y,b),Object.defineProperty(y.prototype,"onRequestRedraw",{get:function(){return new n.EventEmitter().event},enumerable:!1,configurable:!0}),y.prototype.dispose=function(){this._element.classList.remove(r+this._terminalClass),(0,e.removeElementFromParent)(this._rowContainer,this._selectionContainer,this._themeStyleElement,this._dimensionsStyleElement),b.prototype.dispose.call(this)},y.prototype._updateDimensions=function(){this.dimensions.scaledCharWidth=this._charSizeService.width*window.devicePixelRatio,this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.options.letterSpacing),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.options.lineHeight),this.dimensions.scaledCharLeft=0,this.dimensions.scaledCharTop=0,this.dimensions.scaledCanvasWidth=this.dimensions.scaledCellWidth*this._bufferService.cols,this.dimensions.scaledCanvasHeight=this.dimensions.scaledCellHeight*this._bufferService.rows,this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols,this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows;for(var m=0,k=this._rowElements;m<k.length;m++){var w=k[m];w.style.width=this.dimensions.canvasWidth+"px",w.style.height=this.dimensions.actualCellHeight+"px",w.style.lineHeight=this.dimensions.actualCellHeight+"px",w.style.overflow="hidden"}this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));var A=this._terminalSelector+" .xterm-rows span { display: inline-block; height: 100%; vertical-align: top; width: "+this.dimensions.actualCellWidth+"px}";this._dimensionsStyleElement.textContent=A,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},y.prototype.setColors=function(m){this._colors=m,this._injectCss()},y.prototype._injectCss=function(){var m=this;this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));var k=this._terminalSelector+" .xterm-rows { color: "+this._colors.foreground.css+"; font-family: "+this._optionsService.options.fontFamily+"; font-size: "+this._optionsService.options.fontSize+"px;}";k+=this._terminalSelector+" span:not(."+S.BOLD_CLASS+") { font-weight: "+this._optionsService.options.fontWeight+";}"+this._terminalSelector+" span."+S.BOLD_CLASS+" { font-weight: "+this._optionsService.options.fontWeightBold+";}"+this._terminalSelector+" span."+S.ITALIC_CLASS+" { font-style: italic;}",k+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  box-shadow: none; }}",k+="@keyframes blink_block_"+this._terminalClass+" { 0% {  background-color: "+this._colors.cursor.css+";  color: "+this._colors.cursorAccent.css+"; } 50% {  background-color: "+this._colors.cursorAccent.css+";  color: "+this._colors.cursor.css+"; }}",k+=this._terminalSelector+" .xterm-rows:not(.xterm-focus) ."+S.CURSOR_CLASS+"."+S.CURSOR_STYLE_BLOCK_CLASS+" { outline: 1px solid "+this._colors.cursor.css+"; outline-offset: -1px;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+S.CURSOR_CLASS+"."+S.CURSOR_BLINK_CLASS+":not(."+S.CURSOR_STYLE_BLOCK_CLASS+") { animation: blink_box_shadow_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+S.CURSOR_CLASS+"."+S.CURSOR_BLINK_CLASS+"."+S.CURSOR_STYLE_BLOCK_CLASS+" { animation: blink_block_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+S.CURSOR_CLASS+"."+S.CURSOR_STYLE_BLOCK_CLASS+" { background-color: "+this._colors.cursor.css+"; color: "+this._colors.cursorAccent.css+";}"+this._terminalSelector+" .xterm-rows ."+S.CURSOR_CLASS+"."+S.CURSOR_STYLE_BAR_CLASS+" { box-shadow: "+this._optionsService.options.cursorWidth+"px 0 0 "+this._colors.cursor.css+" inset;}"+this._terminalSelector+" .xterm-rows ."+S.CURSOR_CLASS+"."+S.CURSOR_STYLE_UNDERLINE_CLASS+" { box-shadow: 0 -1px 0 "+this._colors.cursor.css+" inset;}",k+=this._terminalSelector+" .xterm-selection { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}"+this._terminalSelector+" .xterm-selection div { position: absolute; background-color: "+this._colors.selectionTransparent.css+";}",this._colors.ansi.forEach(function(w,A){k+=m._terminalSelector+" ."+o+A+" { color: "+w.css+"; }"+m._terminalSelector+" ."+c+A+" { background-color: "+w.css+"; }"}),k+=this._terminalSelector+" ."+o+d.INVERTED_DEFAULT_COLOR+" { color: "+t.color.opaque(this._colors.background).css+"; }"+this._terminalSelector+" ."+c+d.INVERTED_DEFAULT_COLOR+" { background-color: "+this._colors.foreground.css+"; }",this._themeStyleElement.textContent=k},y.prototype.onDevicePixelRatioChange=function(){this._updateDimensions()},y.prototype._refreshRowElements=function(m,k){for(var w=this._rowElements.length;w<=k;w++){var A=document.createElement("div");this._rowContainer.appendChild(A),this._rowElements.push(A)}for(;this._rowElements.length>k;)this._rowContainer.removeChild(this._rowElements.pop())},y.prototype.onResize=function(m,k){this._refreshRowElements(m,k),this._updateDimensions()},y.prototype.onCharSizeChanged=function(){this._updateDimensions()},y.prototype.onBlur=function(){this._rowContainer.classList.remove(p)},y.prototype.onFocus=function(){this._rowContainer.classList.add(p)},y.prototype.onSelectionChanged=function(m,k,w){for(;this._selectionContainer.children.length;)this._selectionContainer.removeChild(this._selectionContainer.children[0]);if(m&&k){var A=m[1]-this._bufferService.buffer.ydisp,x=k[1]-this._bufferService.buffer.ydisp,L=Math.max(A,0),D=Math.min(x,this._bufferService.rows-1);if(!(L>=this._bufferService.rows||D<0)){var T=document.createDocumentFragment();if(w)T.appendChild(this._createSelectionElement(L,m[0],k[0],D-L+1));else{var j=A===L?m[0]:0,W=L===x?k[0]:this._bufferService.cols;T.appendChild(this._createSelectionElement(L,j,W));var F=D-L-1;if(T.appendChild(this._createSelectionElement(L+1,0,this._bufferService.cols,F)),L!==D){var N=x===D?k[0]:this._bufferService.cols;T.appendChild(this._createSelectionElement(D,0,N))}}this._selectionContainer.appendChild(T)}}},y.prototype._createSelectionElement=function(m,k,w,A){A===void 0&&(A=1);var x=document.createElement("div");return x.style.height=A*this.dimensions.actualCellHeight+"px",x.style.top=m*this.dimensions.actualCellHeight+"px",x.style.left=k*this.dimensions.actualCellWidth+"px",x.style.width=this.dimensions.actualCellWidth*(w-k)+"px",x},y.prototype.onCursorMove=function(){},y.prototype.onOptionsChanged=function(){this._updateDimensions(),this._injectCss()},y.prototype.clear=function(){for(var m=0,k=this._rowElements;m<k.length;m++)k[m].innerText=""},y.prototype.renderRows=function(m,k){for(var w=this._bufferService.buffer.ybase+this._bufferService.buffer.y,A=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),x=this._optionsService.options.cursorBlink,L=m;L<=k;L++){var D=this._rowElements[L];D.innerText="";var T=L+this._bufferService.buffer.ydisp,j=this._bufferService.buffer.lines.get(T),W=this._optionsService.options.cursorStyle;D.appendChild(this._rowFactory.createRow(j,T,T===w,W,A,x,this.dimensions.actualCellWidth,this._bufferService.cols))}},Object.defineProperty(y.prototype,"_terminalSelector",{get:function(){return"."+r+this._terminalClass},enumerable:!1,configurable:!0}),y.prototype._onLinkHover=function(m){this._setCellUnderline(m.x1,m.x2,m.y1,m.y2,m.cols,!0)},y.prototype._onLinkLeave=function(m){this._setCellUnderline(m.x1,m.x2,m.y1,m.y2,m.cols,!1)},y.prototype._setCellUnderline=function(m,k,w,A,x,L){for(;m!==k||w!==A;){var D=this._rowElements[w];if(!D)return;var T=D.children[m];T&&(T.style.textDecoration=L?"underline":"none"),++m>=x&&(m=0,w++)}},f([u(6,h.IInstantiationService),u(7,a.ICharSizeService),u(8,h.IOptionsService),u(9,h.IBufferService)],y)}(i.Disposable);s.DomRenderer=C},3787:function(P,s,v){var l=this&&this.__decorate||function(e,r,o,c){var p,g=arguments.length,C=g<3?r:c===null?c=Object.getOwnPropertyDescriptor(r,o):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(e,r,o,c);else for(var b=e.length-1;b>=0;b--)(p=e[b])&&(C=(g<3?p(C):g>3?p(r,o,C):p(r,o))||C);return g>3&&C&&Object.defineProperty(r,o,C),C},_=this&&this.__param||function(e,r){return function(o,c){r(o,c,e)}};Object.defineProperty(s,"__esModule",{value:!0}),s.DomRendererRowFactory=s.CURSOR_STYLE_UNDERLINE_CLASS=s.CURSOR_STYLE_BAR_CLASS=s.CURSOR_STYLE_BLOCK_CLASS=s.CURSOR_BLINK_CLASS=s.CURSOR_CLASS=s.STRIKETHROUGH_CLASS=s.UNDERLINE_CLASS=s.ITALIC_CLASS=s.DIM_CLASS=s.BOLD_CLASS=void 0;var f=v(8803),u=v(643),S=v(511),d=v(2585),i=v(4774),a=v(4725),h=v(4269);s.BOLD_CLASS="xterm-bold",s.DIM_CLASS="xterm-dim",s.ITALIC_CLASS="xterm-italic",s.UNDERLINE_CLASS="xterm-underline",s.STRIKETHROUGH_CLASS="xterm-strikethrough",s.CURSOR_CLASS="xterm-cursor",s.CURSOR_BLINK_CLASS="xterm-cursor-blink",s.CURSOR_STYLE_BLOCK_CLASS="xterm-cursor-block",s.CURSOR_STYLE_BAR_CLASS="xterm-cursor-bar",s.CURSOR_STYLE_UNDERLINE_CLASS="xterm-cursor-underline";var n=function(){function e(r,o,c,p,g){this._document=r,this._colors=o,this._characterJoinerService=c,this._optionsService=p,this._coreService=g,this._workCell=new S.CellData}return e.prototype.setColors=function(r){this._colors=r},e.prototype.createRow=function(r,o,c,p,g,C,b,y){for(var m=this._document.createDocumentFragment(),k=this._characterJoinerService.getJoinedCharacters(o),w=0,A=Math.min(r.length,y)-1;A>=0;A--)if(r.loadCell(A,this._workCell).getCode()!==u.NULL_CELL_CODE||c&&A===g){w=A+1;break}for(A=0;A<w;A++){r.loadCell(A,this._workCell);var x=this._workCell.getWidth();if(x!==0){var L=!1,D=A,T=this._workCell;if(k.length>0&&A===k[0][0]){L=!0;var j=k.shift();T=new h.JoinedCellData(this._workCell,r.translateToString(!0,j[0],j[1]),j[1]-j[0]),D=j[1]-1,x=T.getWidth()}var W=this._document.createElement("span");if(x>1&&(W.style.width=b*x+"px"),L&&(W.style.display="inline",g>=A&&g<=D&&(g=A)),!this._coreService.isCursorHidden&&c&&A===g)switch(W.classList.add(s.CURSOR_CLASS),C&&W.classList.add(s.CURSOR_BLINK_CLASS),p){case"bar":W.classList.add(s.CURSOR_STYLE_BAR_CLASS);break;case"underline":W.classList.add(s.CURSOR_STYLE_UNDERLINE_CLASS);break;default:W.classList.add(s.CURSOR_STYLE_BLOCK_CLASS)}T.isBold()&&W.classList.add(s.BOLD_CLASS),T.isItalic()&&W.classList.add(s.ITALIC_CLASS),T.isDim()&&W.classList.add(s.DIM_CLASS),T.isUnderline()&&W.classList.add(s.UNDERLINE_CLASS),T.isInvisible()?W.textContent=u.WHITESPACE_CELL_CHAR:W.textContent=T.getChars()||u.WHITESPACE_CELL_CHAR,T.isStrikethrough()&&W.classList.add(s.STRIKETHROUGH_CLASS);var F=T.getFgColor(),N=T.getFgColorMode(),G=T.getBgColor(),E=T.getBgColorMode(),M=!!T.isInverse();if(M){var R=F;F=G,G=R;var H=N;N=E,E=H}switch(N){case 16777216:case 33554432:T.isBold()&&F<8&&this._optionsService.options.drawBoldTextInBrightColors&&(F+=8),this._applyMinimumContrast(W,this._colors.background,this._colors.ansi[F])||W.classList.add("xterm-fg-"+F);break;case 50331648:var B=i.rgba.toColor(F>>16&255,F>>8&255,255&F);this._applyMinimumContrast(W,this._colors.background,B)||this._addStyle(W,"color:#"+t(F.toString(16),"0",6));break;default:this._applyMinimumContrast(W,this._colors.background,this._colors.foreground)||M&&W.classList.add("xterm-fg-"+f.INVERTED_DEFAULT_COLOR)}switch(E){case 16777216:case 33554432:W.classList.add("xterm-bg-"+G);break;case 50331648:this._addStyle(W,"background-color:#"+t(G.toString(16),"0",6));break;default:M&&W.classList.add("xterm-bg-"+f.INVERTED_DEFAULT_COLOR)}m.appendChild(W),A=D}}return m},e.prototype._applyMinimumContrast=function(r,o,c){if(this._optionsService.options.minimumContrastRatio===1)return!1;var p=this._colors.contrastCache.getColor(this._workCell.bg,this._workCell.fg);return p===void 0&&(p=i.color.ensureContrastRatio(o,c,this._optionsService.options.minimumContrastRatio),this._colors.contrastCache.setColor(this._workCell.bg,this._workCell.fg,p!=null?p:null)),!!p&&(this._addStyle(r,"color:"+p.css),!0)},e.prototype._addStyle=function(r,o){r.setAttribute("style",""+(r.getAttribute("style")||"")+o+";")},l([_(2,a.ICharacterJoinerService),_(3,d.IOptionsService),_(4,d.ICoreService)],e)}();function t(e,r,o){for(;e.length<o;)e=r+e;return e}s.DomRendererRowFactory=n},456:(P,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SelectionModel=void 0;var v=function(){function l(_){this._bufferService=_,this.isSelectAllActive=!1,this.selectionStartLength=0}return l.prototype.clearSelection=function(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0},Object.defineProperty(l.prototype,"finalSelectionStart",{get:function(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"finalSelectionEnd",{get:function(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){var _=this.selectionStart[0]+this.selectionStartLength;return _>this._bufferService.cols?[_%this._bufferService.cols,this.selectionStart[1]+Math.floor(_/this._bufferService.cols)]:[_,this.selectionStart[1]]}return this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]?[Math.max(this.selectionStart[0]+this.selectionStartLength,this.selectionEnd[0]),this.selectionEnd[1]]:this.selectionEnd}},enumerable:!1,configurable:!0}),l.prototype.areSelectionValuesReversed=function(){var _=this.selectionStart,f=this.selectionEnd;return!(!_||!f)&&(_[1]>f[1]||_[1]===f[1]&&_[0]>f[0])},l.prototype.onTrim=function(_){return this.selectionStart&&(this.selectionStart[1]-=_),this.selectionEnd&&(this.selectionEnd[1]-=_),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)},l}();s.SelectionModel=v},428:function(P,s,v){var l=this&&this.__decorate||function(i,a,h,n){var t,e=arguments.length,r=e<3?a:n===null?n=Object.getOwnPropertyDescriptor(a,h):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,a,h,n);else for(var o=i.length-1;o>=0;o--)(t=i[o])&&(r=(e<3?t(r):e>3?t(a,h,r):t(a,h))||r);return e>3&&r&&Object.defineProperty(a,h,r),r},_=this&&this.__param||function(i,a){return function(h,n){a(h,n,i)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CharSizeService=void 0;var f=v(2585),u=v(8460),S=function(){function i(a,h,n){this._optionsService=n,this.width=0,this.height=0,this._onCharSizeChange=new u.EventEmitter,this._measureStrategy=new d(a,h,this._optionsService)}return Object.defineProperty(i.prototype,"hasValidSize",{get:function(){return this.width>0&&this.height>0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onCharSizeChange",{get:function(){return this._onCharSizeChange.event},enumerable:!1,configurable:!0}),i.prototype.measure=function(){var a=this._measureStrategy.measure();a.width===this.width&&a.height===this.height||(this.width=a.width,this.height=a.height,this._onCharSizeChange.fire())},l([_(2,f.IOptionsService)],i)}();s.CharSizeService=S;var d=function(){function i(a,h,n){this._document=a,this._parentElement=h,this._optionsService=n,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W",this._measureElement.setAttribute("aria-hidden","true"),this._parentElement.appendChild(this._measureElement)}return i.prototype.measure=function(){this._measureElement.style.fontFamily=this._optionsService.options.fontFamily,this._measureElement.style.fontSize=this._optionsService.options.fontSize+"px";var a=this._measureElement.getBoundingClientRect();return a.width!==0&&a.height!==0&&(this._result.width=a.width,this._result.height=Math.ceil(a.height)),this._result},i}()},4269:function(P,s,v){var l,_=this&&this.__extends||(l=function(t,e){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])},l(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}l(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}),f=this&&this.__decorate||function(t,e,r,o){var c,p=arguments.length,g=p<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,r):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(t,e,r,o);else for(var C=t.length-1;C>=0;C--)(c=t[C])&&(g=(p<3?c(g):p>3?c(e,r,g):c(e,r))||g);return p>3&&g&&Object.defineProperty(e,r,g),g},u=this&&this.__param||function(t,e){return function(r,o){e(r,o,t)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CharacterJoinerService=s.JoinedCellData=void 0;var S=v(3734),d=v(643),i=v(511),a=v(2585),h=function(t){function e(r,o,c){var p=t.call(this)||this;return p.content=0,p.combinedData="",p.fg=r.fg,p.bg=r.bg,p.combinedData=o,p._width=c,p}return _(e,t),e.prototype.isCombined=function(){return 2097152},e.prototype.getWidth=function(){return this._width},e.prototype.getChars=function(){return this.combinedData},e.prototype.getCode=function(){return 2097151},e.prototype.setFromCharData=function(r){throw new Error("not implemented")},e.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},e}(S.AttributeData);s.JoinedCellData=h;var n=function(){function t(e){this._bufferService=e,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new i.CellData}return t.prototype.register=function(e){var r={id:this._nextCharacterJoinerId++,handler:e};return this._characterJoiners.push(r),r.id},t.prototype.deregister=function(e){for(var r=0;r<this._characterJoiners.length;r++)if(this._characterJoiners[r].id===e)return this._characterJoiners.splice(r,1),!0;return!1},t.prototype.getJoinedCharacters=function(e){if(this._characterJoiners.length===0)return[];var r=this._bufferService.buffer.lines.get(e);if(!r||r.length===0)return[];for(var o=[],c=r.translateToString(!0),p=0,g=0,C=0,b=r.getFg(0),y=r.getBg(0),m=0;m<r.getTrimmedLength();m++)if(r.loadCell(m,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==b||this._workCell.bg!==y){if(m-p>1)for(var k=this._getJoinedRanges(c,C,g,r,p),w=0;w<k.length;w++)o.push(k[w]);p=m,C=g,b=this._workCell.fg,y=this._workCell.bg}g+=this._workCell.getChars().length||d.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-p>1)for(k=this._getJoinedRanges(c,C,g,r,p),w=0;w<k.length;w++)o.push(k[w]);return o},t.prototype._getJoinedRanges=function(e,r,o,c,p){for(var g=e.substring(r,o),C=this._characterJoiners[0].handler(g),b=1;b<this._characterJoiners.length;b++)for(var y=this._characterJoiners[b].handler(g),m=0;m<y.length;m++)t._mergeRanges(C,y[m]);return this._stringRangesToCellRanges(C,c,p),C},t.prototype._stringRangesToCellRanges=function(e,r,o){var c=0,p=!1,g=0,C=e[c];if(C){for(var b=o;b<this._bufferService.cols;b++){var y=r.getWidth(b),m=r.getString(b).length||d.WHITESPACE_CELL_CHAR.length;if(y!==0){if(!p&&C[0]<=g&&(C[0]=b,p=!0),C[1]<=g){if(C[1]=b,!(C=e[++c]))break;C[0]<=g?(C[0]=b,p=!0):p=!1}g+=m}}C&&(C[1]=this._bufferService.cols)}},t._mergeRanges=function(e,r){for(var o=!1,c=0;c<e.length;c++){var p=e[c];if(o){if(r[1]<=p[0])return e[c-1][1]=r[1],e;if(r[1]<=p[1])return e[c-1][1]=Math.max(r[1],p[1]),e.splice(c,1),e;e.splice(c,1),c--}else{if(r[1]<=p[0])return e.splice(c,0,r),e;if(r[1]<=p[1])return p[0]=Math.min(r[0],p[0]),e;r[0]<p[1]&&(p[0]=Math.min(r[0],p[0]),o=!0)}}return o?e[e.length-1][1]=r[1]:e.push(r),e},t=f([u(0,a.IBufferService)],t)}();s.CharacterJoinerService=n},5114:(P,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CoreBrowserService=void 0;var v=function(){function l(_){this._textarea=_}return Object.defineProperty(l.prototype,"isFocused",{get:function(){return(this._textarea.getRootNode?this._textarea.getRootNode():document).activeElement===this._textarea&&document.hasFocus()},enumerable:!1,configurable:!0}),l}();s.CoreBrowserService=v},8934:function(P,s,v){var l=this&&this.__decorate||function(d,i,a,h){var n,t=arguments.length,e=t<3?i:h===null?h=Object.getOwnPropertyDescriptor(i,a):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")e=Reflect.decorate(d,i,a,h);else for(var r=d.length-1;r>=0;r--)(n=d[r])&&(e=(t<3?n(e):t>3?n(i,a,e):n(i,a))||e);return t>3&&e&&Object.defineProperty(i,a,e),e},_=this&&this.__param||function(d,i){return function(a,h){i(a,h,d)}};Object.defineProperty(s,"__esModule",{value:!0}),s.MouseService=void 0;var f=v(4725),u=v(9806),S=function(){function d(i,a){this._renderService=i,this._charSizeService=a}return d.prototype.getCoords=function(i,a,h,n,t){return(0,u.getCoords)(i,a,h,n,this._charSizeService.hasValidSize,this._renderService.dimensions.actualCellWidth,this._renderService.dimensions.actualCellHeight,t)},d.prototype.getRawByteCoords=function(i,a,h,n){var t=this.getCoords(i,a,h,n);return(0,u.getRawByteCoords)(t)},l([_(0,f.IRenderService),_(1,f.ICharSizeService)],d)}();s.MouseService=S},3230:function(P,s,v){var l,_=this&&this.__extends||(l=function(r,o){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,p){c.__proto__=p}||function(c,p){for(var g in p)Object.prototype.hasOwnProperty.call(p,g)&&(c[g]=p[g])},l(r,o)},function(r,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=r}l(r,o),r.prototype=o===null?Object.create(o):(c.prototype=o.prototype,new c)}),f=this&&this.__decorate||function(r,o,c,p){var g,C=arguments.length,b=C<3?o:p===null?p=Object.getOwnPropertyDescriptor(o,c):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(r,o,c,p);else for(var y=r.length-1;y>=0;y--)(g=r[y])&&(b=(C<3?g(b):C>3?g(o,c,b):g(o,c))||b);return C>3&&b&&Object.defineProperty(o,c,b),b},u=this&&this.__param||function(r,o){return function(c,p){o(c,p,r)}};Object.defineProperty(s,"__esModule",{value:!0}),s.RenderService=void 0;var S=v(6193),d=v(8460),i=v(844),a=v(5596),h=v(3656),n=v(2585),t=v(4725),e=function(r){function o(c,p,g,C,b,y){var m=r.call(this)||this;if(m._renderer=c,m._rowCount=p,m._charSizeService=b,m._isPaused=!1,m._needsFullRefresh=!1,m._isNextRenderRedrawOnly=!0,m._needsSelectionRefresh=!1,m._canvasWidth=0,m._canvasHeight=0,m._selectionState={start:void 0,end:void 0,columnSelectMode:!1},m._onDimensionsChange=new d.EventEmitter,m._onRender=new d.EventEmitter,m._onRefreshRequest=new d.EventEmitter,m.register({dispose:function(){return m._renderer.dispose()}}),m._renderDebouncer=new S.RenderDebouncer(function(w,A){return m._renderRows(w,A)}),m.register(m._renderDebouncer),m._screenDprMonitor=new a.ScreenDprMonitor,m._screenDprMonitor.setListener(function(){return m.onDevicePixelRatioChange()}),m.register(m._screenDprMonitor),m.register(y.onResize(function(w){return m._fullRefresh()})),m.register(C.onOptionChange(function(){return m._renderer.onOptionsChanged()})),m.register(m._charSizeService.onCharSizeChange(function(){return m.onCharSizeChanged()})),m._renderer.onRequestRedraw(function(w){return m.refreshRows(w.start,w.end,!0)}),m.register((0,h.addDisposableDomListener)(window,"resize",function(){return m.onDevicePixelRatioChange()})),"IntersectionObserver"in window){var k=new IntersectionObserver(function(w){return m._onIntersectionChange(w[w.length-1])},{threshold:0});k.observe(g),m.register({dispose:function(){return k.disconnect()}})}return m}return _(o,r),Object.defineProperty(o.prototype,"onDimensionsChange",{get:function(){return this._onDimensionsChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onRenderedBufferChange",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onRefreshRequest",{get:function(){return this._onRefreshRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"dimensions",{get:function(){return this._renderer.dimensions},enumerable:!1,configurable:!0}),o.prototype._onIntersectionChange=function(c){this._isPaused=c.isIntersecting===void 0?c.intersectionRatio===0:!c.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)},o.prototype.refreshRows=function(c,p,g){g===void 0&&(g=!1),this._isPaused?this._needsFullRefresh=!0:(g||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(c,p,this._rowCount))},o.prototype._renderRows=function(c,p){this._renderer.renderRows(c,p),this._needsSelectionRefresh&&(this._renderer.onSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRender.fire({start:c,end:p}),this._isNextRenderRedrawOnly=!0},o.prototype.resize=function(c,p){this._rowCount=p,this._fireOnCanvasResize()},o.prototype.changeOptions=function(){this._renderer.onOptionsChanged(),this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize()},o.prototype._fireOnCanvasResize=function(){this._renderer.dimensions.canvasWidth===this._canvasWidth&&this._renderer.dimensions.canvasHeight===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.dimensions)},o.prototype.dispose=function(){r.prototype.dispose.call(this)},o.prototype.setRenderer=function(c){var p=this;this._renderer.dispose(),this._renderer=c,this._renderer.onRequestRedraw(function(g){return p.refreshRows(g.start,g.end,!0)}),this._needsSelectionRefresh=!0,this._fullRefresh()},o.prototype._fullRefresh=function(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)},o.prototype.clearTextureAtlas=function(){var c,p;(p=(c=this._renderer)===null||c===void 0?void 0:c.clearTextureAtlas)===null||p===void 0||p.call(c),this._fullRefresh()},o.prototype.setColors=function(c){this._renderer.setColors(c),this._fullRefresh()},o.prototype.onDevicePixelRatioChange=function(){this._charSizeService.measure(),this._renderer.onDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1)},o.prototype.onResize=function(c,p){this._renderer.onResize(c,p),this._fullRefresh()},o.prototype.onCharSizeChanged=function(){this._renderer.onCharSizeChanged()},o.prototype.onBlur=function(){this._renderer.onBlur()},o.prototype.onFocus=function(){this._renderer.onFocus()},o.prototype.onSelectionChanged=function(c,p,g){this._selectionState.start=c,this._selectionState.end=p,this._selectionState.columnSelectMode=g,this._renderer.onSelectionChanged(c,p,g)},o.prototype.onCursorMove=function(){this._renderer.onCursorMove()},o.prototype.clear=function(){this._renderer.clear()},f([u(3,n.IOptionsService),u(4,t.ICharSizeService),u(5,n.IBufferService)],o)}(i.Disposable);s.RenderService=e},9312:function(P,s,v){var l,_=this&&this.__extends||(l=function(C,b){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,m){y.__proto__=m}||function(y,m){for(var k in m)Object.prototype.hasOwnProperty.call(m,k)&&(y[k]=m[k])},l(C,b)},function(C,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function y(){this.constructor=C}l(C,b),C.prototype=b===null?Object.create(b):(y.prototype=b.prototype,new y)}),f=this&&this.__decorate||function(C,b,y,m){var k,w=arguments.length,A=w<3?b:m===null?m=Object.getOwnPropertyDescriptor(b,y):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(C,b,y,m);else for(var x=C.length-1;x>=0;x--)(k=C[x])&&(A=(w<3?k(A):w>3?k(b,y,A):k(b,y))||A);return w>3&&A&&Object.defineProperty(b,y,A),A},u=this&&this.__param||function(C,b){return function(y,m){b(y,m,C)}};Object.defineProperty(s,"__esModule",{value:!0}),s.SelectionService=void 0;var S=v(6114),d=v(456),i=v(511),a=v(8460),h=v(4725),n=v(2585),t=v(9806),e=v(9504),r=v(844),o=v(4841),c=String.fromCharCode(160),p=new RegExp(c,"g"),g=function(C){function b(y,m,k,w,A,x,L,D){var T=C.call(this)||this;return T._element=y,T._screenElement=m,T._linkifier=k,T._bufferService=w,T._coreService=A,T._mouseService=x,T._optionsService=L,T._renderService=D,T._dragScrollAmount=0,T._enabled=!0,T._workCell=new i.CellData,T._mouseDownTimeStamp=0,T._oldHasSelection=!1,T._oldSelectionStart=void 0,T._oldSelectionEnd=void 0,T._onLinuxMouseSelection=T.register(new a.EventEmitter),T._onRedrawRequest=T.register(new a.EventEmitter),T._onSelectionChange=T.register(new a.EventEmitter),T._onRequestScrollLines=T.register(new a.EventEmitter),T._mouseMoveListener=function(j){return T._onMouseMove(j)},T._mouseUpListener=function(j){return T._onMouseUp(j)},T._coreService.onUserInput(function(){T.hasSelection&&T.clearSelection()}),T._trimListener=T._bufferService.buffer.lines.onTrim(function(j){return T._onTrim(j)}),T.register(T._bufferService.buffers.onBufferActivate(function(j){return T._onBufferActivate(j)})),T.enable(),T._model=new d.SelectionModel(T._bufferService),T._activeSelectionMode=0,T}return _(b,C),Object.defineProperty(b.prototype,"onLinuxMouseSelection",{get:function(){return this._onLinuxMouseSelection.event},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onRequestRedraw",{get:function(){return this._onRedrawRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onRequestScrollLines",{get:function(){return this._onRequestScrollLines.event},enumerable:!1,configurable:!0}),b.prototype.dispose=function(){this._removeMouseDownListeners()},b.prototype.reset=function(){this.clearSelection()},b.prototype.disable=function(){this.clearSelection(),this._enabled=!1},b.prototype.enable=function(){this._enabled=!0},Object.defineProperty(b.prototype,"selectionStart",{get:function(){return this._model.finalSelectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"selectionEnd",{get:function(){return this._model.finalSelectionEnd},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"hasSelection",{get:function(){var y=this._model.finalSelectionStart,m=this._model.finalSelectionEnd;return!(!y||!m||y[0]===m[0]&&y[1]===m[1])},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"selectionText",{get:function(){var y=this._model.finalSelectionStart,m=this._model.finalSelectionEnd;if(!y||!m)return"";var k=this._bufferService.buffer,w=[];if(this._activeSelectionMode===3){if(y[0]===m[0])return"";for(var A=y[1];A<=m[1];A++){var x=k.translateBufferLineToString(A,!0,y[0],m[0]);w.push(x)}}else{var L=y[1]===m[1]?m[0]:void 0;for(w.push(k.translateBufferLineToString(y[1],!0,y[0],L)),A=y[1]+1;A<=m[1]-1;A++){var D=k.lines.get(A);x=k.translateBufferLineToString(A,!0),D&&D.isWrapped?w[w.length-1]+=x:w.push(x)}y[1]!==m[1]&&(D=k.lines.get(m[1]),x=k.translateBufferLineToString(m[1],!0,0,m[0]),D&&D.isWrapped?w[w.length-1]+=x:w.push(x))}return w.map(function(T){return T.replace(p," ")}).join(S.isWindows?`\r
`:`
`)},enumerable:!1,configurable:!0}),b.prototype.clearSelection=function(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()},b.prototype.refresh=function(y){var m=this;this._refreshAnimationFrame||(this._refreshAnimationFrame=window.requestAnimationFrame(function(){return m._refresh()})),S.isLinux&&y&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)},b.prototype._refresh=function(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})},b.prototype._isClickInSelection=function(y){var m=this._getMouseBufferCoords(y),k=this._model.finalSelectionStart,w=this._model.finalSelectionEnd;return!!(k&&w&&m)&&this._areCoordsInSelection(m,k,w)},b.prototype._areCoordsInSelection=function(y,m,k){return y[1]>m[1]&&y[1]<k[1]||m[1]===k[1]&&y[1]===m[1]&&y[0]>=m[0]&&y[0]<k[0]||m[1]<k[1]&&y[1]===k[1]&&y[0]<k[0]||m[1]<k[1]&&y[1]===m[1]&&y[0]>=m[0]},b.prototype._selectWordAtCursor=function(y,m){var k,w,A=(w=(k=this._linkifier.currentLink)===null||k===void 0?void 0:k.link)===null||w===void 0?void 0:w.range;if(A)return this._model.selectionStart=[A.start.x-1,A.start.y-1],this._model.selectionStartLength=(0,o.getRangeLength)(A,this._bufferService.cols),this._model.selectionEnd=void 0,!0;var x=this._getMouseBufferCoords(y);return!!x&&(this._selectWordAt(x,m),this._model.selectionEnd=void 0,!0)},b.prototype.selectAll=function(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()},b.prototype.selectLines=function(y,m){this._model.clearSelection(),y=Math.max(y,0),m=Math.min(m,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,y],this._model.selectionEnd=[this._bufferService.cols,m],this.refresh(),this._onSelectionChange.fire()},b.prototype._onTrim=function(y){this._model.onTrim(y)&&this.refresh()},b.prototype._getMouseBufferCoords=function(y){var m=this._mouseService.getCoords(y,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(m)return m[0]--,m[1]--,m[1]+=this._bufferService.buffer.ydisp,m},b.prototype._getMouseEventScrollAmount=function(y){var m=(0,t.getCoordsRelativeToElement)(y,this._screenElement)[1],k=this._renderService.dimensions.canvasHeight;return m>=0&&m<=k?0:(m>k&&(m-=k),m=Math.min(Math.max(m,-50),50),(m/=50)/Math.abs(m)+Math.round(14*m))},b.prototype.shouldForceSelection=function(y){return S.isMac?y.altKey&&this._optionsService.options.macOptionClickForcesSelection:y.shiftKey},b.prototype.onMouseDown=function(y){if(this._mouseDownTimeStamp=y.timeStamp,(y.button!==2||!this.hasSelection)&&y.button===0){if(!this._enabled){if(!this.shouldForceSelection(y))return;y.stopPropagation()}y.preventDefault(),this._dragScrollAmount=0,this._enabled&&y.shiftKey?this._onIncrementalClick(y):y.detail===1?this._onSingleClick(y):y.detail===2?this._onDoubleClick(y):y.detail===3&&this._onTripleClick(y),this._addMouseDownListeners(),this.refresh(!0)}},b.prototype._addMouseDownListeners=function(){var y=this;this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=window.setInterval(function(){return y._dragScroll()},50)},b.prototype._removeMouseDownListeners=function(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0},b.prototype._onIncrementalClick=function(y){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(y))},b.prototype._onSingleClick=function(y){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(y)?3:0,this._model.selectionStart=this._getMouseBufferCoords(y),this._model.selectionStart){this._model.selectionEnd=void 0;var m=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);m&&m.length!==this._model.selectionStart[0]&&m.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}},b.prototype._onDoubleClick=function(y){this._selectWordAtCursor(y,!0)&&(this._activeSelectionMode=1)},b.prototype._onTripleClick=function(y){var m=this._getMouseBufferCoords(y);m&&(this._activeSelectionMode=2,this._selectLineAt(m[1]))},b.prototype.shouldColumnSelect=function(y){return y.altKey&&!(S.isMac&&this._optionsService.options.macOptionClickForcesSelection)},b.prototype._onMouseMove=function(y){if(y.stopImmediatePropagation(),this._model.selectionStart){var m=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(y),this._model.selectionEnd){this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(y),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));var k=this._bufferService.buffer;if(this._model.selectionEnd[1]<k.lines.length){var w=k.lines.get(this._model.selectionEnd[1]);w&&w.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}m&&m[0]===this._model.selectionEnd[0]&&m[1]===this._model.selectionEnd[1]||this.refresh(!0)}else this.refresh(!0)}},b.prototype._dragScroll=function(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});var y=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(y.ydisp+this._bufferService.rows,y.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=y.ydisp),this.refresh()}},b.prototype._onMouseUp=function(y){var m=y.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&m<500&&y.altKey&&this._optionsService.getOption("altClickMovesCursor")){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){var k=this._mouseService.getCoords(y,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(k&&k[0]!==void 0&&k[1]!==void 0){var w=(0,e.moveToCellSequence)(k[0]-1,k[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(w,!0)}}}else this._fireEventIfSelectionChanged()},b.prototype._fireEventIfSelectionChanged=function(){var y=this._model.finalSelectionStart,m=this._model.finalSelectionEnd,k=!(!y||!m||y[0]===m[0]&&y[1]===m[1]);k?y&&m&&(this._oldSelectionStart&&this._oldSelectionEnd&&y[0]===this._oldSelectionStart[0]&&y[1]===this._oldSelectionStart[1]&&m[0]===this._oldSelectionEnd[0]&&m[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(y,m,k)):this._oldHasSelection&&this._fireOnSelectionChange(y,m,k)},b.prototype._fireOnSelectionChange=function(y,m,k){this._oldSelectionStart=y,this._oldSelectionEnd=m,this._oldHasSelection=k,this._onSelectionChange.fire()},b.prototype._onBufferActivate=function(y){var m=this;this.clearSelection(),this._trimListener.dispose(),this._trimListener=y.activeBuffer.lines.onTrim(function(k){return m._onTrim(k)})},b.prototype._convertViewportColToCharacterIndex=function(y,m){for(var k=m[0],w=0;m[0]>=w;w++){var A=y.loadCell(w,this._workCell).getChars().length;this._workCell.getWidth()===0?k--:A>1&&m[0]!==w&&(k+=A-1)}return k},b.prototype.setSelection=function(y,m,k){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[y,m],this._model.selectionStartLength=k,this.refresh()},b.prototype.rightClickSelect=function(y){this._isClickInSelection(y)||(this._selectWordAtCursor(y,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())},b.prototype._getWordAt=function(y,m,k,w){if(k===void 0&&(k=!0),w===void 0&&(w=!0),!(y[0]>=this._bufferService.cols)){var A=this._bufferService.buffer,x=A.lines.get(y[1]);if(x){var L=A.translateBufferLineToString(y[1],!1),D=this._convertViewportColToCharacterIndex(x,y),T=D,j=y[0]-D,W=0,F=0,N=0,G=0;if(L.charAt(D)===" "){for(;D>0&&L.charAt(D-1)===" ";)D--;for(;T<L.length&&L.charAt(T+1)===" ";)T++}else{var E=y[0],M=y[0];x.getWidth(E)===0&&(W++,E--),x.getWidth(M)===2&&(F++,M++);var R=x.getString(M).length;for(R>1&&(G+=R-1,T+=R-1);E>0&&D>0&&!this._isCharWordSeparator(x.loadCell(E-1,this._workCell));){x.loadCell(E-1,this._workCell);var H=this._workCell.getChars().length;this._workCell.getWidth()===0?(W++,E--):H>1&&(N+=H-1,D-=H-1),D--,E--}for(;M<x.length&&T+1<L.length&&!this._isCharWordSeparator(x.loadCell(M+1,this._workCell));){x.loadCell(M+1,this._workCell);var B=this._workCell.getChars().length;this._workCell.getWidth()===2?(F++,M++):B>1&&(G+=B-1,T+=B-1),T++,M++}}T++;var q=D+j-W+N,z=Math.min(this._bufferService.cols,T-D+W+F-N-G);if(m||L.slice(D,T).trim()!==""){if(k&&q===0&&x.getCodePoint(0)!==32){var te=A.lines.get(y[1]-1);if(te&&x.isWrapped&&te.getCodePoint(this._bufferService.cols-1)!==32){var re=this._getWordAt([this._bufferService.cols-1,y[1]-1],!1,!0,!1);if(re){var oe=this._bufferService.cols-re.start;q-=oe,z+=oe}}}if(w&&q+z===this._bufferService.cols&&x.getCodePoint(this._bufferService.cols-1)!==32){var U=A.lines.get(y[1]+1);if(U&&U.isWrapped&&U.getCodePoint(0)!==32){var Q=this._getWordAt([0,y[1]+1],!1,!1,!0);Q&&(z+=Q.length)}}return{start:q,length:z}}}}},b.prototype._selectWordAt=function(y,m){var k=this._getWordAt(y,m);if(k){for(;k.start<0;)k.start+=this._bufferService.cols,y[1]--;this._model.selectionStart=[k.start,y[1]],this._model.selectionStartLength=k.length}},b.prototype._selectToWordAt=function(y){var m=this._getWordAt(y,!0);if(m){for(var k=y[1];m.start<0;)m.start+=this._bufferService.cols,k--;if(!this._model.areSelectionValuesReversed())for(;m.start+m.length>this._bufferService.cols;)m.length-=this._bufferService.cols,k++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?m.start:m.start+m.length,k]}},b.prototype._isCharWordSeparator=function(y){return y.getWidth()!==0&&this._optionsService.options.wordSeparator.indexOf(y.getChars())>=0},b.prototype._selectLineAt=function(y){var m=this._bufferService.buffer.getWrappedRangeForLine(y);this._model.selectionStart=[0,m.first],this._model.selectionEnd=[this._bufferService.cols,m.last],this._model.selectionStartLength=0},f([u(3,n.IBufferService),u(4,n.ICoreService),u(5,h.IMouseService),u(6,n.IOptionsService),u(7,h.IRenderService)],b)}(r.Disposable);s.SelectionService=g},4725:(P,s,v)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ICharacterJoinerService=s.ISoundService=s.ISelectionService=s.IRenderService=s.IMouseService=s.ICoreBrowserService=s.ICharSizeService=void 0;var l=v(8343);s.ICharSizeService=(0,l.createDecorator)("CharSizeService"),s.ICoreBrowserService=(0,l.createDecorator)("CoreBrowserService"),s.IMouseService=(0,l.createDecorator)("MouseService"),s.IRenderService=(0,l.createDecorator)("RenderService"),s.ISelectionService=(0,l.createDecorator)("SelectionService"),s.ISoundService=(0,l.createDecorator)("SoundService"),s.ICharacterJoinerService=(0,l.createDecorator)("CharacterJoinerService")},357:function(P,s,v){var l=this&&this.__decorate||function(S,d,i,a){var h,n=arguments.length,t=n<3?d:a===null?a=Object.getOwnPropertyDescriptor(d,i):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(S,d,i,a);else for(var e=S.length-1;e>=0;e--)(h=S[e])&&(t=(n<3?h(t):n>3?h(d,i,t):h(d,i))||t);return n>3&&t&&Object.defineProperty(d,i,t),t},_=this&&this.__param||function(S,d){return function(i,a){d(i,a,S)}};Object.defineProperty(s,"__esModule",{value:!0}),s.SoundService=void 0;var f=v(2585),u=function(){function S(d){this._optionsService=d}return Object.defineProperty(S,"audioContext",{get:function(){if(!S._audioContext){var d=window.AudioContext||window.webkitAudioContext;if(!d)return console.warn("Web Audio API is not supported by this browser. Consider upgrading to the latest version"),null;S._audioContext=new d}return S._audioContext},enumerable:!1,configurable:!0}),S.prototype.playBellSound=function(){var d=S.audioContext;if(d){var i=d.createBufferSource();d.decodeAudioData(this._base64ToArrayBuffer(this._removeMimeType(this._optionsService.options.bellSound)),function(a){i.buffer=a,i.connect(d.destination),i.start(0)})}},S.prototype._base64ToArrayBuffer=function(d){for(var i=window.atob(d),a=i.length,h=new Uint8Array(a),n=0;n<a;n++)h[n]=i.charCodeAt(n);return h.buffer},S.prototype._removeMimeType=function(d){return d.split(",")[1]},S=l([_(0,f.IOptionsService)],S)}();s.SoundService=u},6349:(P,s,v)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CircularList=void 0;var l=v(8460),_=function(){function f(u){this._maxLength=u,this.onDeleteEmitter=new l.EventEmitter,this.onInsertEmitter=new l.EventEmitter,this.onTrimEmitter=new l.EventEmitter,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}return Object.defineProperty(f.prototype,"onDelete",{get:function(){return this.onDeleteEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"onInsert",{get:function(){return this.onInsertEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"onTrim",{get:function(){return this.onTrimEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"maxLength",{get:function(){return this._maxLength},set:function(u){if(this._maxLength!==u){for(var S=new Array(u),d=0;d<Math.min(u,this.length);d++)S[d]=this._array[this._getCyclicIndex(d)];this._array=S,this._maxLength=u,this._startIndex=0}},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"length",{get:function(){return this._length},set:function(u){if(u>this._length)for(var S=this._length;S<u;S++)this._array[S]=void 0;this._length=u},enumerable:!1,configurable:!0}),f.prototype.get=function(u){return this._array[this._getCyclicIndex(u)]},f.prototype.set=function(u,S){this._array[this._getCyclicIndex(u)]=S},f.prototype.push=function(u){this._array[this._getCyclicIndex(this._length)]=u,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++},f.prototype.recycle=function(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]},Object.defineProperty(f.prototype,"isFull",{get:function(){return this._length===this._maxLength},enumerable:!1,configurable:!0}),f.prototype.pop=function(){return this._array[this._getCyclicIndex(this._length---1)]},f.prototype.splice=function(u,S){for(var d=[],i=2;i<arguments.length;i++)d[i-2]=arguments[i];if(S){for(var a=u;a<this._length-S;a++)this._array[this._getCyclicIndex(a)]=this._array[this._getCyclicIndex(a+S)];this._length-=S,this.onDeleteEmitter.fire({index:u,amount:S})}for(a=this._length-1;a>=u;a--)this._array[this._getCyclicIndex(a+d.length)]=this._array[this._getCyclicIndex(a)];for(a=0;a<d.length;a++)this._array[this._getCyclicIndex(u+a)]=d[a];if(d.length&&this.onInsertEmitter.fire({index:u,amount:d.length}),this._length+d.length>this._maxLength){var h=this._length+d.length-this._maxLength;this._startIndex+=h,this._length=this._maxLength,this.onTrimEmitter.fire(h)}else this._length+=d.length},f.prototype.trimStart=function(u){u>this._length&&(u=this._length),this._startIndex+=u,this._length-=u,this.onTrimEmitter.fire(u)},f.prototype.shiftElements=function(u,S,d){if(!(S<=0)){if(u<0||u>=this._length)throw new Error("start argument out of range");if(u+d<0)throw new Error("Cannot shift elements in list beyond index 0");if(d>0){for(var i=S-1;i>=0;i--)this.set(u+i+d,this.get(u+i));var a=u+S+d-this._length;if(a>0)for(this._length+=a;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(i=0;i<S;i++)this.set(u+i+d,this.get(u+i))}},f.prototype._getCyclicIndex=function(u){return(this._startIndex+u)%this._maxLength},f}();s.CircularList=_},1439:(P,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.clone=void 0,s.clone=function v(l,_){if(_===void 0&&(_=5),typeof l!="object")return l;var f=Array.isArray(l)?[]:{};for(var u in l)f[u]=_<=1?l[u]:l[u]&&v(l[u],_-1);return f}},8969:function(P,s,v){var l,_=this&&this.__extends||(l=function(y,m){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,w){k.__proto__=w}||function(k,w){for(var A in w)Object.prototype.hasOwnProperty.call(w,A)&&(k[A]=w[A])},l(y,m)},function(y,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");function k(){this.constructor=y}l(y,m),y.prototype=m===null?Object.create(m):(k.prototype=m.prototype,new k)});Object.defineProperty(s,"__esModule",{value:!0}),s.CoreTerminal=void 0;var f=v(844),u=v(2585),S=v(4348),d=v(7866),i=v(744),a=v(7302),h=v(6975),n=v(8460),t=v(1753),e=v(3730),r=v(1480),o=v(7994),c=v(9282),p=v(5435),g=v(5981),C=!1,b=function(y){function m(k){var w=y.call(this)||this;return w._onBinary=new n.EventEmitter,w._onData=new n.EventEmitter,w._onLineFeed=new n.EventEmitter,w._onResize=new n.EventEmitter,w._onScroll=new n.EventEmitter,w._instantiationService=new S.InstantiationService,w.optionsService=new a.OptionsService(k),w._instantiationService.setService(u.IOptionsService,w.optionsService),w._bufferService=w.register(w._instantiationService.createInstance(i.BufferService)),w._instantiationService.setService(u.IBufferService,w._bufferService),w._logService=w._instantiationService.createInstance(d.LogService),w._instantiationService.setService(u.ILogService,w._logService),w.coreService=w.register(w._instantiationService.createInstance(h.CoreService,function(){return w.scrollToBottom()})),w._instantiationService.setService(u.ICoreService,w.coreService),w.coreMouseService=w._instantiationService.createInstance(t.CoreMouseService),w._instantiationService.setService(u.ICoreMouseService,w.coreMouseService),w._dirtyRowService=w._instantiationService.createInstance(e.DirtyRowService),w._instantiationService.setService(u.IDirtyRowService,w._dirtyRowService),w.unicodeService=w._instantiationService.createInstance(r.UnicodeService),w._instantiationService.setService(u.IUnicodeService,w.unicodeService),w._charsetService=w._instantiationService.createInstance(o.CharsetService),w._instantiationService.setService(u.ICharsetService,w._charsetService),w._inputHandler=new p.InputHandler(w._bufferService,w._charsetService,w.coreService,w._dirtyRowService,w._logService,w.optionsService,w.coreMouseService,w.unicodeService),w.register((0,n.forwardEvent)(w._inputHandler.onLineFeed,w._onLineFeed)),w.register(w._inputHandler),w.register((0,n.forwardEvent)(w._bufferService.onResize,w._onResize)),w.register((0,n.forwardEvent)(w.coreService.onData,w._onData)),w.register((0,n.forwardEvent)(w.coreService.onBinary,w._onBinary)),w.register(w.optionsService.onOptionChange(function(A){return w._updateOptions(A)})),w.register(w._bufferService.onScroll(function(A){w._onScroll.fire({position:w._bufferService.buffer.ydisp,source:0}),w._dirtyRowService.markRangeDirty(w._bufferService.buffer.scrollTop,w._bufferService.buffer.scrollBottom)})),w.register(w._inputHandler.onScroll(function(A){w._onScroll.fire({position:w._bufferService.buffer.ydisp,source:0}),w._dirtyRowService.markRangeDirty(w._bufferService.buffer.scrollTop,w._bufferService.buffer.scrollBottom)})),w._writeBuffer=new g.WriteBuffer(function(A,x){return w._inputHandler.parse(A,x)}),w}return _(m,y),Object.defineProperty(m.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"onScroll",{get:function(){var k=this;return this._onScrollApi||(this._onScrollApi=new n.EventEmitter,this.register(this._onScroll.event(function(w){var A;(A=k._onScrollApi)===null||A===void 0||A.fire(w.position)}))),this._onScrollApi.event},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"cols",{get:function(){return this._bufferService.cols},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"rows",{get:function(){return this._bufferService.rows},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"buffers",{get:function(){return this._bufferService.buffers},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"options",{get:function(){return this.optionsService.publicOptions},enumerable:!1,configurable:!0}),m.prototype.dispose=function(){var k;this._isDisposed||(y.prototype.dispose.call(this),(k=this._windowsMode)===null||k===void 0||k.dispose(),this._windowsMode=void 0)},m.prototype.write=function(k,w){this._writeBuffer.write(k,w)},m.prototype.writeSync=function(k,w){this._logService.logLevel<=u.LogLevelEnum.WARN&&!C&&(this._logService.warn("writeSync is unreliable and will be removed soon."),C=!0),this._writeBuffer.writeSync(k,w)},m.prototype.resize=function(k,w){isNaN(k)||isNaN(w)||(k=Math.max(k,i.MINIMUM_COLS),w=Math.max(w,i.MINIMUM_ROWS),this._bufferService.resize(k,w))},m.prototype.scroll=function(k,w){w===void 0&&(w=!1),this._bufferService.scroll(k,w)},m.prototype.scrollLines=function(k,w,A){this._bufferService.scrollLines(k,w,A)},m.prototype.scrollPages=function(k){this._bufferService.scrollPages(k)},m.prototype.scrollToTop=function(){this._bufferService.scrollToTop()},m.prototype.scrollToBottom=function(){this._bufferService.scrollToBottom()},m.prototype.scrollToLine=function(k){this._bufferService.scrollToLine(k)},m.prototype.registerEscHandler=function(k,w){return this._inputHandler.registerEscHandler(k,w)},m.prototype.registerDcsHandler=function(k,w){return this._inputHandler.registerDcsHandler(k,w)},m.prototype.registerCsiHandler=function(k,w){return this._inputHandler.registerCsiHandler(k,w)},m.prototype.registerOscHandler=function(k,w){return this._inputHandler.registerOscHandler(k,w)},m.prototype._setup=function(){this.optionsService.options.windowsMode&&this._enableWindowsMode()},m.prototype.reset=function(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()},m.prototype._updateOptions=function(k){var w;switch(k){case"scrollback":this.buffers.resize(this.cols,this.rows);break;case"windowsMode":this.optionsService.options.windowsMode?this._enableWindowsMode():((w=this._windowsMode)===null||w===void 0||w.dispose(),this._windowsMode=void 0)}},m.prototype._enableWindowsMode=function(){var k=this;if(!this._windowsMode){var w=[];w.push(this.onLineFeed(c.updateWindowsModeWrappedState.bind(null,this._bufferService))),w.push(this.registerCsiHandler({final:"H"},function(){return(0,c.updateWindowsModeWrappedState)(k._bufferService),!1})),this._windowsMode={dispose:function(){for(var A=0,x=w;A<x.length;A++)x[A].dispose()}}}},m}(f.Disposable);s.CoreTerminal=b},8460:(P,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.forwardEvent=s.EventEmitter=void 0;var v=function(){function l(){this._listeners=[],this._disposed=!1}return Object.defineProperty(l.prototype,"event",{get:function(){var _=this;return this._event||(this._event=function(f){return _._listeners.push(f),{dispose:function(){if(!_._disposed){for(var u=0;u<_._listeners.length;u++)if(_._listeners[u]===f)return void _._listeners.splice(u,1)}}}}),this._event},enumerable:!1,configurable:!0}),l.prototype.fire=function(_,f){for(var u=[],S=0;S<this._listeners.length;S++)u.push(this._listeners[S]);for(S=0;S<u.length;S++)u[S].call(void 0,_,f)},l.prototype.dispose=function(){this._listeners&&(this._listeners.length=0),this._disposed=!0},l}();s.EventEmitter=v,s.forwardEvent=function(l,_){return l(function(f){return _.fire(f)})}},5435:function(P,s,v){var l,_=this&&this.__extends||(l=function(w,A){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,L){x.__proto__=L}||function(x,L){for(var D in L)Object.prototype.hasOwnProperty.call(L,D)&&(x[D]=L[D])},l(w,A)},function(w,A){if(typeof A!="function"&&A!==null)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");function x(){this.constructor=w}l(w,A),w.prototype=A===null?Object.create(A):(x.prototype=A.prototype,new x)});Object.defineProperty(s,"__esModule",{value:!0}),s.InputHandler=s.WindowsOptionsReportType=void 0;var f,u=v(2584),S=v(7116),d=v(2015),i=v(844),a=v(8273),h=v(482),n=v(8437),t=v(8460),e=v(643),r=v(511),o=v(3734),c=v(2585),p=v(6242),g=v(6351),C={"(":0,")":1,"*":2,"+":3,"-":1,".":2},b=131072;function y(w,A){if(w>24)return A.setWinLines||!1;switch(w){case 1:return!!A.restoreWin;case 2:return!!A.minimizeWin;case 3:return!!A.setWinPosition;case 4:return!!A.setWinSizePixels;case 5:return!!A.raiseWin;case 6:return!!A.lowerWin;case 7:return!!A.refreshWin;case 8:return!!A.setWinSizeChars;case 9:return!!A.maximizeWin;case 10:return!!A.fullscreenWin;case 11:return!!A.getWinState;case 13:return!!A.getWinPosition;case 14:return!!A.getWinSizePixels;case 15:return!!A.getScreenSizePixels;case 16:return!!A.getCellSizePixels;case 18:return!!A.getWinSizeChars;case 19:return!!A.getScreenSizeChars;case 20:return!!A.getIconTitle;case 21:return!!A.getWinTitle;case 22:return!!A.pushTitle;case 23:return!!A.popTitle;case 24:return!!A.setWinLines}return!1}(function(w){w[w.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",w[w.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(f=s.WindowsOptionsReportType||(s.WindowsOptionsReportType={}));var m=function(){function w(A,x,L,D){this._bufferService=A,this._coreService=x,this._logService=L,this._optionsService=D,this._data=new Uint32Array(0)}return w.prototype.hook=function(A){this._data=new Uint32Array(0)},w.prototype.put=function(A,x,L){this._data=(0,a.concat)(this._data,A.subarray(x,L))},w.prototype.unhook=function(A){if(!A)return this._data=new Uint32Array(0),!0;var x=(0,h.utf32ToString)(this._data);switch(this._data=new Uint32Array(0),x){case'"q':this._coreService.triggerDataEvent(u.C0.ESC+'P1$r0"q'+u.C0.ESC+"\\");break;case'"p':this._coreService.triggerDataEvent(u.C0.ESC+'P1$r61;1"p'+u.C0.ESC+"\\");break;case"r":var L=this._bufferService.buffer.scrollTop+1+";"+(this._bufferService.buffer.scrollBottom+1)+"r";this._coreService.triggerDataEvent(u.C0.ESC+"P1$r"+L+u.C0.ESC+"\\");break;case"m":this._coreService.triggerDataEvent(u.C0.ESC+"P1$r0m"+u.C0.ESC+"\\");break;case" q":var D={block:2,underline:4,bar:6}[this._optionsService.options.cursorStyle];D-=this._optionsService.options.cursorBlink?1:0,this._coreService.triggerDataEvent(u.C0.ESC+"P1$r"+D+" q"+u.C0.ESC+"\\");break;default:this._logService.debug("Unknown DCS $q %s",x),this._coreService.triggerDataEvent(u.C0.ESC+"P0$r"+u.C0.ESC+"\\")}return!0},w}(),k=function(w){function A(x,L,D,T,j,W,F,N,G){G===void 0&&(G=new d.EscapeSequenceParser);var E=w.call(this)||this;E._bufferService=x,E._charsetService=L,E._coreService=D,E._dirtyRowService=T,E._logService=j,E._optionsService=W,E._coreMouseService=F,E._unicodeService=N,E._parser=G,E._parseBuffer=new Uint32Array(4096),E._stringDecoder=new h.StringToUtf32,E._utf8Decoder=new h.Utf8ToUtf32,E._workCell=new r.CellData,E._windowTitle="",E._iconName="",E._windowTitleStack=[],E._iconNameStack=[],E._curAttrData=n.DEFAULT_ATTR_DATA.clone(),E._eraseAttrDataInternal=n.DEFAULT_ATTR_DATA.clone(),E._onRequestBell=new t.EventEmitter,E._onRequestRefreshRows=new t.EventEmitter,E._onRequestReset=new t.EventEmitter,E._onRequestSendFocus=new t.EventEmitter,E._onRequestSyncScrollBar=new t.EventEmitter,E._onRequestWindowsOptionsReport=new t.EventEmitter,E._onA11yChar=new t.EventEmitter,E._onA11yTab=new t.EventEmitter,E._onCursorMove=new t.EventEmitter,E._onLineFeed=new t.EventEmitter,E._onScroll=new t.EventEmitter,E._onTitleChange=new t.EventEmitter,E._onAnsiColorChange=new t.EventEmitter,E._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},E.register(E._parser),E._activeBuffer=E._bufferService.buffer,E.register(E._bufferService.buffers.onBufferActivate(function(B){return E._activeBuffer=B.activeBuffer})),E._parser.setCsiHandlerFallback(function(B,q){E._logService.debug("Unknown CSI code: ",{identifier:E._parser.identToString(B),params:q.toArray()})}),E._parser.setEscHandlerFallback(function(B){E._logService.debug("Unknown ESC code: ",{identifier:E._parser.identToString(B)})}),E._parser.setExecuteHandlerFallback(function(B){E._logService.debug("Unknown EXECUTE code: ",{code:B})}),E._parser.setOscHandlerFallback(function(B,q,z){E._logService.debug("Unknown OSC code: ",{identifier:B,action:q,data:z})}),E._parser.setDcsHandlerFallback(function(B,q,z){q==="HOOK"&&(z=z.toArray()),E._logService.debug("Unknown DCS code: ",{identifier:E._parser.identToString(B),action:q,payload:z})}),E._parser.setPrintHandler(function(B,q,z){return E.print(B,q,z)}),E._parser.registerCsiHandler({final:"@"},function(B){return E.insertChars(B)}),E._parser.registerCsiHandler({intermediates:" ",final:"@"},function(B){return E.scrollLeft(B)}),E._parser.registerCsiHandler({final:"A"},function(B){return E.cursorUp(B)}),E._parser.registerCsiHandler({intermediates:" ",final:"A"},function(B){return E.scrollRight(B)}),E._parser.registerCsiHandler({final:"B"},function(B){return E.cursorDown(B)}),E._parser.registerCsiHandler({final:"C"},function(B){return E.cursorForward(B)}),E._parser.registerCsiHandler({final:"D"},function(B){return E.cursorBackward(B)}),E._parser.registerCsiHandler({final:"E"},function(B){return E.cursorNextLine(B)}),E._parser.registerCsiHandler({final:"F"},function(B){return E.cursorPrecedingLine(B)}),E._parser.registerCsiHandler({final:"G"},function(B){return E.cursorCharAbsolute(B)}),E._parser.registerCsiHandler({final:"H"},function(B){return E.cursorPosition(B)}),E._parser.registerCsiHandler({final:"I"},function(B){return E.cursorForwardTab(B)}),E._parser.registerCsiHandler({final:"J"},function(B){return E.eraseInDisplay(B)}),E._parser.registerCsiHandler({prefix:"?",final:"J"},function(B){return E.eraseInDisplay(B)}),E._parser.registerCsiHandler({final:"K"},function(B){return E.eraseInLine(B)}),E._parser.registerCsiHandler({prefix:"?",final:"K"},function(B){return E.eraseInLine(B)}),E._parser.registerCsiHandler({final:"L"},function(B){return E.insertLines(B)}),E._parser.registerCsiHandler({final:"M"},function(B){return E.deleteLines(B)}),E._parser.registerCsiHandler({final:"P"},function(B){return E.deleteChars(B)}),E._parser.registerCsiHandler({final:"S"},function(B){return E.scrollUp(B)}),E._parser.registerCsiHandler({final:"T"},function(B){return E.scrollDown(B)}),E._parser.registerCsiHandler({final:"X"},function(B){return E.eraseChars(B)}),E._parser.registerCsiHandler({final:"Z"},function(B){return E.cursorBackwardTab(B)}),E._parser.registerCsiHandler({final:"`"},function(B){return E.charPosAbsolute(B)}),E._parser.registerCsiHandler({final:"a"},function(B){return E.hPositionRelative(B)}),E._parser.registerCsiHandler({final:"b"},function(B){return E.repeatPrecedingCharacter(B)}),E._parser.registerCsiHandler({final:"c"},function(B){return E.sendDeviceAttributesPrimary(B)}),E._parser.registerCsiHandler({prefix:">",final:"c"},function(B){return E.sendDeviceAttributesSecondary(B)}),E._parser.registerCsiHandler({final:"d"},function(B){return E.linePosAbsolute(B)}),E._parser.registerCsiHandler({final:"e"},function(B){return E.vPositionRelative(B)}),E._parser.registerCsiHandler({final:"f"},function(B){return E.hVPosition(B)}),E._parser.registerCsiHandler({final:"g"},function(B){return E.tabClear(B)}),E._parser.registerCsiHandler({final:"h"},function(B){return E.setMode(B)}),E._parser.registerCsiHandler({prefix:"?",final:"h"},function(B){return E.setModePrivate(B)}),E._parser.registerCsiHandler({final:"l"},function(B){return E.resetMode(B)}),E._parser.registerCsiHandler({prefix:"?",final:"l"},function(B){return E.resetModePrivate(B)}),E._parser.registerCsiHandler({final:"m"},function(B){return E.charAttributes(B)}),E._parser.registerCsiHandler({final:"n"},function(B){return E.deviceStatus(B)}),E._parser.registerCsiHandler({prefix:"?",final:"n"},function(B){return E.deviceStatusPrivate(B)}),E._parser.registerCsiHandler({intermediates:"!",final:"p"},function(B){return E.softReset(B)}),E._parser.registerCsiHandler({intermediates:" ",final:"q"},function(B){return E.setCursorStyle(B)}),E._parser.registerCsiHandler({final:"r"},function(B){return E.setScrollRegion(B)}),E._parser.registerCsiHandler({final:"s"},function(B){return E.saveCursor(B)}),E._parser.registerCsiHandler({final:"t"},function(B){return E.windowOptions(B)}),E._parser.registerCsiHandler({final:"u"},function(B){return E.restoreCursor(B)}),E._parser.registerCsiHandler({intermediates:"'",final:"}"},function(B){return E.insertColumns(B)}),E._parser.registerCsiHandler({intermediates:"'",final:"~"},function(B){return E.deleteColumns(B)}),E._parser.setExecuteHandler(u.C0.BEL,function(){return E.bell()}),E._parser.setExecuteHandler(u.C0.LF,function(){return E.lineFeed()}),E._parser.setExecuteHandler(u.C0.VT,function(){return E.lineFeed()}),E._parser.setExecuteHandler(u.C0.FF,function(){return E.lineFeed()}),E._parser.setExecuteHandler(u.C0.CR,function(){return E.carriageReturn()}),E._parser.setExecuteHandler(u.C0.BS,function(){return E.backspace()}),E._parser.setExecuteHandler(u.C0.HT,function(){return E.tab()}),E._parser.setExecuteHandler(u.C0.SO,function(){return E.shiftOut()}),E._parser.setExecuteHandler(u.C0.SI,function(){return E.shiftIn()}),E._parser.setExecuteHandler(u.C1.IND,function(){return E.index()}),E._parser.setExecuteHandler(u.C1.NEL,function(){return E.nextLine()}),E._parser.setExecuteHandler(u.C1.HTS,function(){return E.tabSet()}),E._parser.registerOscHandler(0,new p.OscHandler(function(B){return E.setTitle(B),E.setIconName(B),!0})),E._parser.registerOscHandler(1,new p.OscHandler(function(B){return E.setIconName(B)})),E._parser.registerOscHandler(2,new p.OscHandler(function(B){return E.setTitle(B)})),E._parser.registerOscHandler(4,new p.OscHandler(function(B){return E.setAnsiColor(B)})),E._parser.registerEscHandler({final:"7"},function(){return E.saveCursor()}),E._parser.registerEscHandler({final:"8"},function(){return E.restoreCursor()}),E._parser.registerEscHandler({final:"D"},function(){return E.index()}),E._parser.registerEscHandler({final:"E"},function(){return E.nextLine()}),E._parser.registerEscHandler({final:"H"},function(){return E.tabSet()}),E._parser.registerEscHandler({final:"M"},function(){return E.reverseIndex()}),E._parser.registerEscHandler({final:"="},function(){return E.keypadApplicationMode()}),E._parser.registerEscHandler({final:">"},function(){return E.keypadNumericMode()}),E._parser.registerEscHandler({final:"c"},function(){return E.fullReset()}),E._parser.registerEscHandler({final:"n"},function(){return E.setgLevel(2)}),E._parser.registerEscHandler({final:"o"},function(){return E.setgLevel(3)}),E._parser.registerEscHandler({final:"|"},function(){return E.setgLevel(3)}),E._parser.registerEscHandler({final:"}"},function(){return E.setgLevel(2)}),E._parser.registerEscHandler({final:"~"},function(){return E.setgLevel(1)}),E._parser.registerEscHandler({intermediates:"%",final:"@"},function(){return E.selectDefaultCharset()}),E._parser.registerEscHandler({intermediates:"%",final:"G"},function(){return E.selectDefaultCharset()});var M=function(B){R._parser.registerEscHandler({intermediates:"(",final:B},function(){return E.selectCharset("("+B)}),R._parser.registerEscHandler({intermediates:")",final:B},function(){return E.selectCharset(")"+B)}),R._parser.registerEscHandler({intermediates:"*",final:B},function(){return E.selectCharset("*"+B)}),R._parser.registerEscHandler({intermediates:"+",final:B},function(){return E.selectCharset("+"+B)}),R._parser.registerEscHandler({intermediates:"-",final:B},function(){return E.selectCharset("-"+B)}),R._parser.registerEscHandler({intermediates:".",final:B},function(){return E.selectCharset("."+B)}),R._parser.registerEscHandler({intermediates:"/",final:B},function(){return E.selectCharset("/"+B)})},R=this;for(var H in S.CHARSETS)M(H);return E._parser.registerEscHandler({intermediates:"#",final:"8"},function(){return E.screenAlignmentPattern()}),E._parser.setErrorHandler(function(B){return E._logService.error("Parsing error: ",B),B}),E._parser.registerDcsHandler({intermediates:"$",final:"q"},new m(E._bufferService,E._coreService,E._logService,E._optionsService)),E}return _(A,w),Object.defineProperty(A.prototype,"onRequestBell",{get:function(){return this._onRequestBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"onRequestRefreshRows",{get:function(){return this._onRequestRefreshRows.event},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"onRequestReset",{get:function(){return this._onRequestReset.event},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"onRequestSendFocus",{get:function(){return this._onRequestSendFocus.event},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"onRequestSyncScrollBar",{get:function(){return this._onRequestSyncScrollBar.event},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"onRequestWindowsOptionsReport",{get:function(){return this._onRequestWindowsOptionsReport.event},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"onA11yChar",{get:function(){return this._onA11yChar.event},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"onA11yTab",{get:function(){return this._onA11yTab.event},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"onAnsiColorChange",{get:function(){return this._onAnsiColorChange.event},enumerable:!1,configurable:!0}),A.prototype.dispose=function(){w.prototype.dispose.call(this)},A.prototype._preserveStack=function(x,L,D,T){this._parseStack.paused=!0,this._parseStack.cursorStartX=x,this._parseStack.cursorStartY=L,this._parseStack.decodedLength=D,this._parseStack.position=T},A.prototype._logSlowResolvingAsync=function(x){this._logService.logLevel<=c.LogLevelEnum.WARN&&Promise.race([x,new Promise(function(L,D){return setTimeout(function(){return D("#SLOW_TIMEOUT")},5e3)})]).catch(function(L){if(L!=="#SLOW_TIMEOUT")throw L;console.warn("async parser handler taking longer than 5000 ms")})},A.prototype.parse=function(x,L){var D,T=this._activeBuffer.x,j=this._activeBuffer.y,W=0,F=this._parseStack.paused;if(F){if(D=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,L))return this._logSlowResolvingAsync(D),D;T=this._parseStack.cursorStartX,j=this._parseStack.cursorStartY,this._parseStack.paused=!1,x.length>b&&(W=this._parseStack.position+b)}if(this._logService.debug("parsing data",x),this._parseBuffer.length<x.length&&this._parseBuffer.length<b&&(this._parseBuffer=new Uint32Array(Math.min(x.length,b))),F||this._dirtyRowService.clearRange(),x.length>b)for(var N=W;N<x.length;N+=b){var G=N+b<x.length?N+b:x.length,E=typeof x=="string"?this._stringDecoder.decode(x.substring(N,G),this._parseBuffer):this._utf8Decoder.decode(x.subarray(N,G),this._parseBuffer);if(D=this._parser.parse(this._parseBuffer,E))return this._preserveStack(T,j,E,N),this._logSlowResolvingAsync(D),D}else if(!F&&(E=typeof x=="string"?this._stringDecoder.decode(x,this._parseBuffer):this._utf8Decoder.decode(x,this._parseBuffer),D=this._parser.parse(this._parseBuffer,E)))return this._preserveStack(T,j,E,0),this._logSlowResolvingAsync(D),D;this._activeBuffer.x===T&&this._activeBuffer.y===j||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowService.start,this._dirtyRowService.end)},A.prototype.print=function(x,L,D){var T,j,W=this._charsetService.charset,F=this._optionsService.options.screenReaderMode,N=this._bufferService.cols,G=this._coreService.decPrivateModes.wraparound,E=this._coreService.modes.insertMode,M=this._curAttrData,R=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowService.markDirty(this._activeBuffer.y),this._activeBuffer.x&&D-L>0&&R.getWidth(this._activeBuffer.x-1)===2&&R.setCellFromCodePoint(this._activeBuffer.x-1,0,1,M.fg,M.bg,M.extended);for(var H=L;H<D;++H){if(T=x[H],j=this._unicodeService.wcwidth(T),T<127&&W){var B=W[String.fromCharCode(T)];B&&(T=B.charCodeAt(0))}if(F&&this._onA11yChar.fire((0,h.stringFromCodePoint)(T)),j||!this._activeBuffer.x){if(this._activeBuffer.x+j-1>=N){if(G){for(;this._activeBuffer.x<N;)R.setCellFromCodePoint(this._activeBuffer.x++,0,1,M.fg,M.bg,M.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),R=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=N-1,j===2)continue}if(E&&(R.insertCells(this._activeBuffer.x,j,this._activeBuffer.getNullCell(M),M),R.getWidth(N-1)===2&&R.setCellFromCodePoint(N-1,e.NULL_CELL_CODE,e.NULL_CELL_WIDTH,M.fg,M.bg,M.extended)),R.setCellFromCodePoint(this._activeBuffer.x++,T,j,M.fg,M.bg,M.extended),j>0)for(;--j;)R.setCellFromCodePoint(this._activeBuffer.x++,0,0,M.fg,M.bg,M.extended)}else R.getWidth(this._activeBuffer.x-1)?R.addCodepointToCell(this._activeBuffer.x-1,T):R.addCodepointToCell(this._activeBuffer.x-2,T)}D-L>0&&(R.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<N&&D-L>0&&R.getWidth(this._activeBuffer.x)===0&&!R.hasContent(this._activeBuffer.x)&&R.setCellFromCodePoint(this._activeBuffer.x,0,1,M.fg,M.bg,M.extended),this._dirtyRowService.markDirty(this._activeBuffer.y)},A.prototype.registerCsiHandler=function(x,L){var D=this;return x.final!=="t"||x.prefix||x.intermediates?this._parser.registerCsiHandler(x,L):this._parser.registerCsiHandler(x,function(T){return!y(T.params[0],D._optionsService.options.windowOptions)||L(T)})},A.prototype.registerDcsHandler=function(x,L){return this._parser.registerDcsHandler(x,new g.DcsHandler(L))},A.prototype.registerEscHandler=function(x,L){return this._parser.registerEscHandler(x,L)},A.prototype.registerOscHandler=function(x,L){return this._parser.registerOscHandler(x,new p.OscHandler(L))},A.prototype.bell=function(){return this._onRequestBell.fire(),!0},A.prototype.lineFeed=function(){return this._dirtyRowService.markDirty(this._activeBuffer.y),this._optionsService.options.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowService.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0},A.prototype.carriageReturn=function(){return this._activeBuffer.x=0,!0},A.prototype.backspace=function(){var x;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&((x=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||x===void 0?void 0:x.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;var L=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);L.hasWidth(this._activeBuffer.x)&&!L.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0},A.prototype.tab=function(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;var x=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.options.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-x),!0},A.prototype.shiftOut=function(){return this._charsetService.setgLevel(1),!0},A.prototype.shiftIn=function(){return this._charsetService.setgLevel(0),!0},A.prototype._restrictCursor=function(x){x===void 0&&(x=this._bufferService.cols-1),this._activeBuffer.x=Math.min(x,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowService.markDirty(this._activeBuffer.y)},A.prototype._setCursor=function(x,L){this._dirtyRowService.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=x,this._activeBuffer.y=this._activeBuffer.scrollTop+L):(this._activeBuffer.x=x,this._activeBuffer.y=L),this._restrictCursor(),this._dirtyRowService.markDirty(this._activeBuffer.y)},A.prototype._moveCursor=function(x,L){this._restrictCursor(),this._setCursor(this._activeBuffer.x+x,this._activeBuffer.y+L)},A.prototype.cursorUp=function(x){var L=this._activeBuffer.y-this._activeBuffer.scrollTop;return L>=0?this._moveCursor(0,-Math.min(L,x.params[0]||1)):this._moveCursor(0,-(x.params[0]||1)),!0},A.prototype.cursorDown=function(x){var L=this._activeBuffer.scrollBottom-this._activeBuffer.y;return L>=0?this._moveCursor(0,Math.min(L,x.params[0]||1)):this._moveCursor(0,x.params[0]||1),!0},A.prototype.cursorForward=function(x){return this._moveCursor(x.params[0]||1,0),!0},A.prototype.cursorBackward=function(x){return this._moveCursor(-(x.params[0]||1),0),!0},A.prototype.cursorNextLine=function(x){return this.cursorDown(x),this._activeBuffer.x=0,!0},A.prototype.cursorPrecedingLine=function(x){return this.cursorUp(x),this._activeBuffer.x=0,!0},A.prototype.cursorCharAbsolute=function(x){return this._setCursor((x.params[0]||1)-1,this._activeBuffer.y),!0},A.prototype.cursorPosition=function(x){return this._setCursor(x.length>=2?(x.params[1]||1)-1:0,(x.params[0]||1)-1),!0},A.prototype.charPosAbsolute=function(x){return this._setCursor((x.params[0]||1)-1,this._activeBuffer.y),!0},A.prototype.hPositionRelative=function(x){return this._moveCursor(x.params[0]||1,0),!0},A.prototype.linePosAbsolute=function(x){return this._setCursor(this._activeBuffer.x,(x.params[0]||1)-1),!0},A.prototype.vPositionRelative=function(x){return this._moveCursor(0,x.params[0]||1),!0},A.prototype.hVPosition=function(x){return this.cursorPosition(x),!0},A.prototype.tabClear=function(x){var L=x.params[0];return L===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:L===3&&(this._activeBuffer.tabs={}),!0},A.prototype.cursorForwardTab=function(x){if(this._activeBuffer.x>=this._bufferService.cols)return!0;for(var L=x.params[0]||1;L--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0},A.prototype.cursorBackwardTab=function(x){if(this._activeBuffer.x>=this._bufferService.cols)return!0;for(var L=x.params[0]||1;L--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0},A.prototype._eraseInBufferLine=function(x,L,D,T){T===void 0&&(T=!1);var j=this._activeBuffer.lines.get(this._activeBuffer.ybase+x);j.replaceCells(L,D,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),T&&(j.isWrapped=!1)},A.prototype._resetBufferLine=function(x){var L=this._activeBuffer.lines.get(this._activeBuffer.ybase+x);L.fill(this._activeBuffer.getNullCell(this._eraseAttrData())),L.isWrapped=!1},A.prototype.eraseInDisplay=function(x){var L;switch(this._restrictCursor(this._bufferService.cols),x.params[0]){case 0:for(L=this._activeBuffer.y,this._dirtyRowService.markDirty(L),this._eraseInBufferLine(L++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0);L<this._bufferService.rows;L++)this._resetBufferLine(L);this._dirtyRowService.markDirty(L);break;case 1:for(L=this._activeBuffer.y,this._dirtyRowService.markDirty(L),this._eraseInBufferLine(L,0,this._activeBuffer.x+1,!0),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(L+1).isWrapped=!1);L--;)this._resetBufferLine(L);this._dirtyRowService.markDirty(0);break;case 2:for(L=this._bufferService.rows,this._dirtyRowService.markDirty(L-1);L--;)this._resetBufferLine(L);this._dirtyRowService.markDirty(0);break;case 3:var D=this._activeBuffer.lines.length-this._bufferService.rows;D>0&&(this._activeBuffer.lines.trimStart(D),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-D,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-D,0),this._onScroll.fire(0))}return!0},A.prototype.eraseInLine=function(x){switch(this._restrictCursor(this._bufferService.cols),x.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols)}return this._dirtyRowService.markDirty(this._activeBuffer.y),!0},A.prototype.insertLines=function(x){this._restrictCursor();var L=x.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var D=this._activeBuffer.ybase+this._activeBuffer.y,T=this._bufferService.rows-1-this._activeBuffer.scrollBottom,j=this._bufferService.rows-1+this._activeBuffer.ybase-T+1;L--;)this._activeBuffer.lines.splice(j-1,1),this._activeBuffer.lines.splice(D,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0},A.prototype.deleteLines=function(x){this._restrictCursor();var L=x.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;var D,T=this._activeBuffer.ybase+this._activeBuffer.y;for(D=this._bufferService.rows-1-this._activeBuffer.scrollBottom,D=this._bufferService.rows-1+this._activeBuffer.ybase-D;L--;)this._activeBuffer.lines.splice(T,1),this._activeBuffer.lines.splice(D,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0},A.prototype.insertChars=function(x){this._restrictCursor();var L=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return L&&(L.insertCells(this._activeBuffer.x,x.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},A.prototype.deleteChars=function(x){this._restrictCursor();var L=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return L&&(L.deleteCells(this._activeBuffer.x,x.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},A.prototype.scrollUp=function(x){for(var L=x.params[0]||1;L--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},A.prototype.scrollDown=function(x){for(var L=x.params[0]||1;L--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(n.DEFAULT_ATTR_DATA));return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},A.prototype.scrollLeft=function(x){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var L=x.params[0]||1,D=this._activeBuffer.scrollTop;D<=this._activeBuffer.scrollBottom;++D){var T=this._activeBuffer.lines.get(this._activeBuffer.ybase+D);T.deleteCells(0,L,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),T.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},A.prototype.scrollRight=function(x){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var L=x.params[0]||1,D=this._activeBuffer.scrollTop;D<=this._activeBuffer.scrollBottom;++D){var T=this._activeBuffer.lines.get(this._activeBuffer.ybase+D);T.insertCells(0,L,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),T.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},A.prototype.insertColumns=function(x){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var L=x.params[0]||1,D=this._activeBuffer.scrollTop;D<=this._activeBuffer.scrollBottom;++D){var T=this._activeBuffer.lines.get(this._activeBuffer.ybase+D);T.insertCells(this._activeBuffer.x,L,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),T.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},A.prototype.deleteColumns=function(x){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var L=x.params[0]||1,D=this._activeBuffer.scrollTop;D<=this._activeBuffer.scrollBottom;++D){var T=this._activeBuffer.lines.get(this._activeBuffer.ybase+D);T.deleteCells(this._activeBuffer.x,L,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),T.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},A.prototype.eraseChars=function(x){this._restrictCursor();var L=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return L&&(L.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(x.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},A.prototype.repeatPrecedingCharacter=function(x){if(!this._parser.precedingCodepoint)return!0;for(var L=x.params[0]||1,D=new Uint32Array(L),T=0;T<L;++T)D[T]=this._parser.precedingCodepoint;return this.print(D,0,D.length),!0},A.prototype.sendDeviceAttributesPrimary=function(x){return x.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(u.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(u.C0.ESC+"[?6c")),!0},A.prototype.sendDeviceAttributesSecondary=function(x){return x.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(u.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(u.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(x.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(u.C0.ESC+"[>83;40003;0c")),!0},A.prototype._is=function(x){return(this._optionsService.options.termName+"").indexOf(x)===0},A.prototype.setMode=function(x){for(var L=0;L<x.length;L++)x.params[L]===4&&(this._coreService.modes.insertMode=!0);return!0},A.prototype.setModePrivate=function(x){for(var L=0;L<x.length;L++)switch(x.params[L]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,S.DEFAULT_CHARSET),this._charsetService.setgCharset(1,S.DEFAULT_CHARSET),this._charsetService.setgCharset(2,S.DEFAULT_CHARSET),this._charsetService.setgCharset(3,S.DEFAULT_CHARSET);break;case 3:this._optionsService.options.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0},A.prototype.resetMode=function(x){for(var L=0;L<x.length;L++)x.params[L]===4&&(this._coreService.modes.insertMode=!1);return!0},A.prototype.resetModePrivate=function(x){for(var L=0;L<x.length;L++)switch(x.params[L]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.options.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),x.params[L]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0},A.prototype._updateAttrColor=function(x,L,D,T,j){return L===2?(x|=50331648,x&=-16777216,x|=o.AttributeData.fromColorRGB([D,T,j])):L===5&&(x&=-50331904,x|=33554432|255&D),x},A.prototype._extractColor=function(x,L,D){var T=[0,0,-1,0,0,0],j=0,W=0;do{if(T[W+j]=x.params[L+W],x.hasSubParams(L+W)){var F=x.getSubParams(L+W),N=0;do T[1]===5&&(j=1),T[W+N+1+j]=F[N];while(++N<F.length&&N+W+1+j<T.length);break}if(T[1]===5&&W+j>=2||T[1]===2&&W+j>=5)break;T[1]&&(j=1)}while(++W+L<x.length&&W+j<T.length);for(N=2;N<T.length;++N)T[N]===-1&&(T[N]=0);switch(T[0]){case 38:D.fg=this._updateAttrColor(D.fg,T[1],T[3],T[4],T[5]);break;case 48:D.bg=this._updateAttrColor(D.bg,T[1],T[3],T[4],T[5]);break;case 58:D.extended=D.extended.clone(),D.extended.underlineColor=this._updateAttrColor(D.extended.underlineColor,T[1],T[3],T[4],T[5])}return W},A.prototype._processUnderline=function(x,L){L.extended=L.extended.clone(),(!~x||x>5)&&(x=1),L.extended.underlineStyle=x,L.fg|=268435456,x===0&&(L.fg&=-268435457),L.updateExtended()},A.prototype.charAttributes=function(x){if(x.length===1&&x.params[0]===0)return this._curAttrData.fg=n.DEFAULT_ATTR_DATA.fg,this._curAttrData.bg=n.DEFAULT_ATTR_DATA.bg,!0;for(var L,D=x.length,T=this._curAttrData,j=0;j<D;j++)(L=x.params[j])>=30&&L<=37?(T.fg&=-50331904,T.fg|=16777216|L-30):L>=40&&L<=47?(T.bg&=-50331904,T.bg|=16777216|L-40):L>=90&&L<=97?(T.fg&=-50331904,T.fg|=16777224|L-90):L>=100&&L<=107?(T.bg&=-50331904,T.bg|=16777224|L-100):L===0?(T.fg=n.DEFAULT_ATTR_DATA.fg,T.bg=n.DEFAULT_ATTR_DATA.bg):L===1?T.fg|=134217728:L===3?T.bg|=67108864:L===4?(T.fg|=268435456,this._processUnderline(x.hasSubParams(j)?x.getSubParams(j)[0]:1,T)):L===5?T.fg|=536870912:L===7?T.fg|=67108864:L===8?T.fg|=1073741824:L===9?T.fg|=2147483648:L===2?T.bg|=134217728:L===21?this._processUnderline(2,T):L===22?(T.fg&=-134217729,T.bg&=-134217729):L===23?T.bg&=-67108865:L===24?T.fg&=-268435457:L===25?T.fg&=-536870913:L===27?T.fg&=-67108865:L===28?T.fg&=-1073741825:L===29?T.fg&=2147483647:L===39?(T.fg&=-67108864,T.fg|=16777215&n.DEFAULT_ATTR_DATA.fg):L===49?(T.bg&=-67108864,T.bg|=16777215&n.DEFAULT_ATTR_DATA.bg):L===38||L===48||L===58?j+=this._extractColor(x,j,T):L===59?(T.extended=T.extended.clone(),T.extended.underlineColor=-1,T.updateExtended()):L===100?(T.fg&=-67108864,T.fg|=16777215&n.DEFAULT_ATTR_DATA.fg,T.bg&=-67108864,T.bg|=16777215&n.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",L);return!0},A.prototype.deviceStatus=function(x){switch(x.params[0]){case 5:this._coreService.triggerDataEvent(u.C0.ESC+"[0n");break;case 6:var L=this._activeBuffer.y+1,D=this._activeBuffer.x+1;this._coreService.triggerDataEvent(u.C0.ESC+"["+L+";"+D+"R")}return!0},A.prototype.deviceStatusPrivate=function(x){if(x.params[0]===6){var L=this._activeBuffer.y+1,D=this._activeBuffer.x+1;this._coreService.triggerDataEvent(u.C0.ESC+"[?"+L+";"+D+"R")}return!0},A.prototype.softReset=function(x){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=n.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0},A.prototype.setCursorStyle=function(x){var L=x.params[0]||1;switch(L){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}var D=L%2==1;return this._optionsService.options.cursorBlink=D,!0},A.prototype.setScrollRegion=function(x){var L,D=x.params[0]||1;return(x.length<2||(L=x.params[1])>this._bufferService.rows||L===0)&&(L=this._bufferService.rows),L>D&&(this._activeBuffer.scrollTop=D-1,this._activeBuffer.scrollBottom=L-1,this._setCursor(0,0)),!0},A.prototype.windowOptions=function(x){if(!y(x.params[0],this._optionsService.options.windowOptions))return!0;var L=x.length>1?x.params[1]:0;switch(x.params[0]){case 14:L!==2&&this._onRequestWindowsOptionsReport.fire(f.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(f.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(u.C0.ESC+"[8;"+this._bufferService.rows+";"+this._bufferService.cols+"t");break;case 22:L!==0&&L!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),L!==0&&L!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:L!==0&&L!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),L!==0&&L!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0},A.prototype.saveCursor=function(x){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0},A.prototype.restoreCursor=function(x){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0},A.prototype.setTitle=function(x){return this._windowTitle=x,this._onTitleChange.fire(x),!0},A.prototype.setIconName=function(x){return this._iconName=x,!0},A.prototype._parseAnsiColorChange=function(x){for(var L,D={colors:[]},T=/(\d+);rgb:([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})/gi;(L=T.exec(x))!==null;)D.colors.push({colorIndex:parseInt(L[1]),red:parseInt(L[2],16),green:parseInt(L[3],16),blue:parseInt(L[4],16)});return D.colors.length===0?null:D},A.prototype.setAnsiColor=function(x){var L=this._parseAnsiColorChange(x);return L?this._onAnsiColorChange.fire(L):this._logService.warn("Expected format <num>;rgb:<rr>/<gg>/<bb> but got data: "+x),!0},A.prototype.nextLine=function(){return this._activeBuffer.x=0,this.index(),!0},A.prototype.keypadApplicationMode=function(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0},A.prototype.keypadNumericMode=function(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0},A.prototype.selectDefaultCharset=function(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,S.DEFAULT_CHARSET),!0},A.prototype.selectCharset=function(x){return x.length!==2?(this.selectDefaultCharset(),!0):(x[0]==="/"||this._charsetService.setgCharset(C[x[0]],S.CHARSETS[x[1]]||S.DEFAULT_CHARSET),!0)},A.prototype.index=function(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0},A.prototype.tabSet=function(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0},A.prototype.reverseIndex=function(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){var x=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,x,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0},A.prototype.fullReset=function(){return this._parser.reset(),this._onRequestReset.fire(),!0},A.prototype.reset=function(){this._curAttrData=n.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=n.DEFAULT_ATTR_DATA.clone()},A.prototype._eraseAttrData=function(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal},A.prototype.setgLevel=function(x){return this._charsetService.setgLevel(x),!0},A.prototype.screenAlignmentPattern=function(){var x=new r.CellData;x.content=1<<22|"E".charCodeAt(0),x.fg=this._curAttrData.fg,x.bg=this._curAttrData.bg,this._setCursor(0,0);for(var L=0;L<this._bufferService.rows;++L){var D=this._activeBuffer.ybase+this._activeBuffer.y+L,T=this._activeBuffer.lines.get(D);T&&(T.fill(x),T.isWrapped=!1)}return this._dirtyRowService.markAllDirty(),this._setCursor(0,0),!0},A}(i.Disposable);s.InputHandler=k},844:(P,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.getDisposeArrayDisposable=s.disposeArray=s.Disposable=void 0;var v=function(){function _(){this._disposables=[],this._isDisposed=!1}return _.prototype.dispose=function(){this._isDisposed=!0;for(var f=0,u=this._disposables;f<u.length;f++)u[f].dispose();this._disposables.length=0},_.prototype.register=function(f){return this._disposables.push(f),f},_.prototype.unregister=function(f){var u=this._disposables.indexOf(f);u!==-1&&this._disposables.splice(u,1)},_}();function l(_){for(var f=0,u=_;f<u.length;f++)u[f].dispose();_.length=0}s.Disposable=v,s.disposeArray=l,s.getDisposeArrayDisposable=function(_){return{dispose:function(){return l(_)}}}},6114:(P,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.isLinux=s.isWindows=s.isIphone=s.isIpad=s.isMac=s.isSafari=s.isFirefox=void 0;var v=typeof navigator=="undefined",l=v?"node":navigator.userAgent,_=v?"node":navigator.platform;s.isFirefox=l.includes("Firefox"),s.isSafari=/^((?!chrome|android).)*safari/i.test(l),s.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(_),s.isIpad=_==="iPad",s.isIphone=_==="iPhone",s.isWindows=["Windows","Win16","Win32","WinCE"].includes(_),s.isLinux=_.indexOf("Linux")>=0},8273:(P,s)=>{function v(l,_,f,u){if(f===void 0&&(f=0),u===void 0&&(u=l.length),f>=l.length)return l;f=(l.length+f)%l.length,u=u>=l.length?l.length:(l.length+u)%l.length;for(var S=f;S<u;++S)l[S]=_;return l}Object.defineProperty(s,"__esModule",{value:!0}),s.concat=s.fillFallback=s.fill=void 0,s.fill=function(l,_,f,u){return l.fill?l.fill(_,f,u):v(l,_,f,u)},s.fillFallback=v,s.concat=function(l,_){var f=new l.constructor(l.length+_.length);return f.set(l),f.set(_,l.length),f}},9282:(P,s,v)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.updateWindowsModeWrappedState=void 0;var l=v(643);s.updateWindowsModeWrappedState=function(_){var f=_.buffer.lines.get(_.buffer.ybase+_.buffer.y-1),u=f==null?void 0:f.get(_.cols-1),S=_.buffer.lines.get(_.buffer.ybase+_.buffer.y);S&&u&&(S.isWrapped=u[l.CHAR_DATA_CODE_INDEX]!==l.NULL_CELL_CODE&&u[l.CHAR_DATA_CODE_INDEX]!==l.WHITESPACE_CELL_CODE)}},3734:(P,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ExtendedAttrs=s.AttributeData=void 0;var v=function(){function _(){this.fg=0,this.bg=0,this.extended=new l}return _.toColorRGB=function(f){return[f>>>16&255,f>>>8&255,255&f]},_.fromColorRGB=function(f){return(255&f[0])<<16|(255&f[1])<<8|255&f[2]},_.prototype.clone=function(){var f=new _;return f.fg=this.fg,f.bg=this.bg,f.extended=this.extended.clone(),f},_.prototype.isInverse=function(){return 67108864&this.fg},_.prototype.isBold=function(){return 134217728&this.fg},_.prototype.isUnderline=function(){return 268435456&this.fg},_.prototype.isBlink=function(){return 536870912&this.fg},_.prototype.isInvisible=function(){return 1073741824&this.fg},_.prototype.isItalic=function(){return 67108864&this.bg},_.prototype.isDim=function(){return 134217728&this.bg},_.prototype.isStrikethrough=function(){return 2147483648&this.fg},_.prototype.getFgColorMode=function(){return 50331648&this.fg},_.prototype.getBgColorMode=function(){return 50331648&this.bg},_.prototype.isFgRGB=function(){return(50331648&this.fg)==50331648},_.prototype.isBgRGB=function(){return(50331648&this.bg)==50331648},_.prototype.isFgPalette=function(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432},_.prototype.isBgPalette=function(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432},_.prototype.isFgDefault=function(){return(50331648&this.fg)==0},_.prototype.isBgDefault=function(){return(50331648&this.bg)==0},_.prototype.isAttributeDefault=function(){return this.fg===0&&this.bg===0},_.prototype.getFgColor=function(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}},_.prototype.getBgColor=function(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}},_.prototype.hasExtendedAttrs=function(){return 268435456&this.bg},_.prototype.updateExtended=function(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456},_.prototype.getUnderlineColor=function(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()},_.prototype.getUnderlineColorMode=function(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()},_.prototype.isUnderlineColorRGB=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()},_.prototype.isUnderlineColorPalette=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()},_.prototype.isUnderlineColorDefault=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()},_.prototype.getUnderlineStyle=function(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0},_}();s.AttributeData=v;var l=function(){function _(f,u){f===void 0&&(f=0),u===void 0&&(u=-1),this.underlineStyle=f,this.underlineColor=u}return _.prototype.clone=function(){return new _(this.underlineStyle,this.underlineColor)},_.prototype.isEmpty=function(){return this.underlineStyle===0},_}();s.ExtendedAttrs=l},9092:(P,s,v)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferStringIterator=s.Buffer=s.MAX_BUFFER_SIZE=void 0;var l=v(6349),_=v(8437),f=v(511),u=v(643),S=v(4634),d=v(4863),i=v(7116),a=v(3734);s.MAX_BUFFER_SIZE=4294967295;var h=function(){function t(e,r,o){this._hasScrollback=e,this._optionsService=r,this._bufferService=o,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.savedY=0,this.savedX=0,this.savedCurAttrData=_.DEFAULT_ATTR_DATA.clone(),this.savedCharset=i.DEFAULT_CHARSET,this.markers=[],this._nullCell=f.CellData.fromCharData([0,u.NULL_CELL_CHAR,u.NULL_CELL_WIDTH,u.NULL_CELL_CODE]),this._whitespaceCell=f.CellData.fromCharData([0,u.WHITESPACE_CELL_CHAR,u.WHITESPACE_CELL_WIDTH,u.WHITESPACE_CELL_CODE]),this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new l.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}return t.prototype.getNullCell=function(e){return e?(this._nullCell.fg=e.fg,this._nullCell.bg=e.bg,this._nullCell.extended=e.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new a.ExtendedAttrs),this._nullCell},t.prototype.getWhitespaceCell=function(e){return e?(this._whitespaceCell.fg=e.fg,this._whitespaceCell.bg=e.bg,this._whitespaceCell.extended=e.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new a.ExtendedAttrs),this._whitespaceCell},t.prototype.getBlankLine=function(e,r){return new _.BufferLine(this._bufferService.cols,this.getNullCell(e),r)},Object.defineProperty(t.prototype,"hasScrollback",{get:function(){return this._hasScrollback&&this.lines.maxLength>this._rows},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isCursorInViewport",{get:function(){var e=this.ybase+this.y-this.ydisp;return e>=0&&e<this._rows},enumerable:!1,configurable:!0}),t.prototype._getCorrectBufferLength=function(e){if(!this._hasScrollback)return e;var r=e+this._optionsService.options.scrollback;return r>s.MAX_BUFFER_SIZE?s.MAX_BUFFER_SIZE:r},t.prototype.fillViewportRows=function(e){if(this.lines.length===0){e===void 0&&(e=_.DEFAULT_ATTR_DATA);for(var r=this._rows;r--;)this.lines.push(this.getBlankLine(e))}},t.prototype.clear=function(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new l.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()},t.prototype.resize=function(e,r){var o=this.getNullCell(_.DEFAULT_ATTR_DATA),c=this._getCorrectBufferLength(r);if(c>this.lines.maxLength&&(this.lines.maxLength=c),this.lines.length>0){if(this._cols<e)for(var p=0;p<this.lines.length;p++)this.lines.get(p).resize(e,o);var g=0;if(this._rows<r)for(var C=this._rows;C<r;C++)this.lines.length<r+this.ybase&&(this._optionsService.options.windowsMode?this.lines.push(new _.BufferLine(e,o)):this.ybase>0&&this.lines.length<=this.ybase+this.y+g+1?(this.ybase--,g++,this.ydisp>0&&this.ydisp--):this.lines.push(new _.BufferLine(e,o)));else for(C=this._rows;C>r;C--)this.lines.length>r+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(c<this.lines.maxLength){var b=this.lines.length-c;b>0&&(this.lines.trimStart(b),this.ybase=Math.max(this.ybase-b,0),this.ydisp=Math.max(this.ydisp-b,0),this.savedY=Math.max(this.savedY-b,0)),this.lines.maxLength=c}this.x=Math.min(this.x,e-1),this.y=Math.min(this.y,r-1),g&&(this.y+=g),this.savedX=Math.min(this.savedX,e-1),this.scrollTop=0}if(this.scrollBottom=r-1,this._isReflowEnabled&&(this._reflow(e,r),this._cols>e))for(p=0;p<this.lines.length;p++)this.lines.get(p).resize(e,o);this._cols=e,this._rows=r},Object.defineProperty(t.prototype,"_isReflowEnabled",{get:function(){return this._hasScrollback&&!this._optionsService.options.windowsMode},enumerable:!1,configurable:!0}),t.prototype._reflow=function(e,r){this._cols!==e&&(e>this._cols?this._reflowLarger(e,r):this._reflowSmaller(e,r))},t.prototype._reflowLarger=function(e,r){var o=(0,S.reflowLargerGetLinesToRemove)(this.lines,this._cols,e,this.ybase+this.y,this.getNullCell(_.DEFAULT_ATTR_DATA));if(o.length>0){var c=(0,S.reflowLargerCreateNewLayout)(this.lines,o);(0,S.reflowLargerApplyNewLayout)(this.lines,c.layout),this._reflowLargerAdjustViewport(e,r,c.countRemoved)}},t.prototype._reflowLargerAdjustViewport=function(e,r,o){for(var c=this.getNullCell(_.DEFAULT_ATTR_DATA),p=o;p-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<r&&this.lines.push(new _.BufferLine(e,c))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-o,0)},t.prototype._reflowSmaller=function(e,r){for(var o=this.getNullCell(_.DEFAULT_ATTR_DATA),c=[],p=0,g=this.lines.length-1;g>=0;g--){var C=this.lines.get(g);if(!(!C||!C.isWrapped&&C.getTrimmedLength()<=e)){for(var b=[C];C.isWrapped&&g>0;)C=this.lines.get(--g),b.unshift(C);var y=this.ybase+this.y;if(!(y>=g&&y<g+b.length)){var m,k=b[b.length-1].getTrimmedLength(),w=(0,S.reflowSmallerGetNewLineLengths)(b,this._cols,e),A=w.length-b.length;m=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+A):Math.max(0,this.lines.length-this.lines.maxLength+A);for(var x=[],L=0;L<A;L++){var D=this.getBlankLine(_.DEFAULT_ATTR_DATA,!0);x.push(D)}x.length>0&&(c.push({start:g+b.length+p,newLines:x}),p+=x.length),b.push.apply(b,x);var T=w.length-1,j=w[T];j===0&&(j=w[--T]);for(var W=b.length-A-1,F=k;W>=0;){var N=Math.min(F,j);if(b[T].copyCellsFrom(b[W],F-N,j-N,N,!0),(j-=N)==0&&(j=w[--T]),(F-=N)==0){W--;var G=Math.max(W,0);F=(0,S.getWrappedLineTrimmedLength)(b,G,this._cols)}}for(L=0;L<b.length;L++)w[L]<e&&b[L].setCell(w[L],o);for(var E=A-m;E-- >0;)this.ybase===0?this.y<r-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+p)-r&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+A,this.ybase+r-1)}}}if(c.length>0){var M=[],R=[];for(L=0;L<this.lines.length;L++)R.push(this.lines.get(L));var H=this.lines.length,B=H-1,q=0,z=c[q];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+p);var te=0;for(L=Math.min(this.lines.maxLength-1,H+p-1);L>=0;L--)if(z&&z.start>B+te){for(var re=z.newLines.length-1;re>=0;re--)this.lines.set(L--,z.newLines[re]);L++,M.push({index:B+1,amount:z.newLines.length}),te+=z.newLines.length,z=c[++q]}else this.lines.set(L,R[B--]);var oe=0;for(L=M.length-1;L>=0;L--)M[L].index+=oe,this.lines.onInsertEmitter.fire(M[L]),oe+=M[L].amount;var U=Math.max(0,H+p-this.lines.maxLength);U>0&&this.lines.onTrimEmitter.fire(U)}},t.prototype.stringIndexToBufferIndex=function(e,r,o){for(o===void 0&&(o=!1);r;){var c=this.lines.get(e);if(!c)return[-1,-1];for(var p=o?c.getTrimmedLength():c.length,g=0;g<p;++g)if(c.get(g)[u.CHAR_DATA_WIDTH_INDEX]&&(r-=c.get(g)[u.CHAR_DATA_CHAR_INDEX].length||1),r<0)return[e,g];e++}return[e,0]},t.prototype.translateBufferLineToString=function(e,r,o,c){o===void 0&&(o=0);var p=this.lines.get(e);return p?p.translateToString(r,o,c):""},t.prototype.getWrappedRangeForLine=function(e){for(var r=e,o=e;r>0&&this.lines.get(r).isWrapped;)r--;for(;o+1<this.lines.length&&this.lines.get(o+1).isWrapped;)o++;return{first:r,last:o}},t.prototype.setupTabStops=function(e){for(e!=null?this.tabs[e]||(e=this.prevStop(e)):(this.tabs={},e=0);e<this._cols;e+=this._optionsService.options.tabStopWidth)this.tabs[e]=!0},t.prototype.prevStop=function(e){for(e==null&&(e=this.x);!this.tabs[--e]&&e>0;);return e>=this._cols?this._cols-1:e<0?0:e},t.prototype.nextStop=function(e){for(e==null&&(e=this.x);!this.tabs[++e]&&e<this._cols;);return e>=this._cols?this._cols-1:e<0?0:e},t.prototype.addMarker=function(e){var r=this,o=new d.Marker(e);return this.markers.push(o),o.register(this.lines.onTrim(function(c){o.line-=c,o.line<0&&o.dispose()})),o.register(this.lines.onInsert(function(c){o.line>=c.index&&(o.line+=c.amount)})),o.register(this.lines.onDelete(function(c){o.line>=c.index&&o.line<c.index+c.amount&&o.dispose(),o.line>c.index&&(o.line-=c.amount)})),o.register(o.onDispose(function(){return r._removeMarker(o)})),o},t.prototype._removeMarker=function(e){this.markers.splice(this.markers.indexOf(e),1)},t.prototype.iterator=function(e,r,o,c,p){return new n(this,e,r,o,c,p)},t}();s.Buffer=h;var n=function(){function t(e,r,o,c,p,g){o===void 0&&(o=0),c===void 0&&(c=e.lines.length),p===void 0&&(p=0),g===void 0&&(g=0),this._buffer=e,this._trimRight=r,this._startIndex=o,this._endIndex=c,this._startOverscan=p,this._endOverscan=g,this._startIndex<0&&(this._startIndex=0),this._endIndex>this._buffer.lines.length&&(this._endIndex=this._buffer.lines.length),this._current=this._startIndex}return t.prototype.hasNext=function(){return this._current<this._endIndex},t.prototype.next=function(){var e=this._buffer.getWrappedRangeForLine(this._current);e.first<this._startIndex-this._startOverscan&&(e.first=this._startIndex-this._startOverscan),e.last>this._endIndex+this._endOverscan&&(e.last=this._endIndex+this._endOverscan),e.first=Math.max(e.first,0),e.last=Math.min(e.last,this._buffer.lines.length);for(var r="",o=e.first;o<=e.last;++o)r+=this._buffer.translateBufferLineToString(o,this._trimRight);return this._current=e.last+1,{range:e,content:r}},t}();s.BufferStringIterator=n},8437:(P,s,v)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferLine=s.DEFAULT_ATTR_DATA=void 0;var l=v(482),_=v(643),f=v(511),u=v(3734);s.DEFAULT_ATTR_DATA=Object.freeze(new u.AttributeData);var S=function(){function d(i,a,h){h===void 0&&(h=!1),this.isWrapped=h,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*i);for(var n=a||f.CellData.fromCharData([0,_.NULL_CELL_CHAR,_.NULL_CELL_WIDTH,_.NULL_CELL_CODE]),t=0;t<i;++t)this.setCell(t,n);this.length=i}return d.prototype.get=function(i){var a=this._data[3*i+0],h=2097151&a;return[this._data[3*i+1],2097152&a?this._combined[i]:h?(0,l.stringFromCodePoint)(h):"",a>>22,2097152&a?this._combined[i].charCodeAt(this._combined[i].length-1):h]},d.prototype.set=function(i,a){this._data[3*i+1]=a[_.CHAR_DATA_ATTR_INDEX],a[_.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[i]=a[1],this._data[3*i+0]=2097152|i|a[_.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*i+0]=a[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|a[_.CHAR_DATA_WIDTH_INDEX]<<22},d.prototype.getWidth=function(i){return this._data[3*i+0]>>22},d.prototype.hasWidth=function(i){return 12582912&this._data[3*i+0]},d.prototype.getFg=function(i){return this._data[3*i+1]},d.prototype.getBg=function(i){return this._data[3*i+2]},d.prototype.hasContent=function(i){return 4194303&this._data[3*i+0]},d.prototype.getCodePoint=function(i){var a=this._data[3*i+0];return 2097152&a?this._combined[i].charCodeAt(this._combined[i].length-1):2097151&a},d.prototype.isCombined=function(i){return 2097152&this._data[3*i+0]},d.prototype.getString=function(i){var a=this._data[3*i+0];return 2097152&a?this._combined[i]:2097151&a?(0,l.stringFromCodePoint)(2097151&a):""},d.prototype.loadCell=function(i,a){var h=3*i;return a.content=this._data[h+0],a.fg=this._data[h+1],a.bg=this._data[h+2],2097152&a.content&&(a.combinedData=this._combined[i]),268435456&a.bg&&(a.extended=this._extendedAttrs[i]),a},d.prototype.setCell=function(i,a){2097152&a.content&&(this._combined[i]=a.combinedData),268435456&a.bg&&(this._extendedAttrs[i]=a.extended),this._data[3*i+0]=a.content,this._data[3*i+1]=a.fg,this._data[3*i+2]=a.bg},d.prototype.setCellFromCodePoint=function(i,a,h,n,t,e){268435456&t&&(this._extendedAttrs[i]=e),this._data[3*i+0]=a|h<<22,this._data[3*i+1]=n,this._data[3*i+2]=t},d.prototype.addCodepointToCell=function(i,a){var h=this._data[3*i+0];2097152&h?this._combined[i]+=(0,l.stringFromCodePoint)(a):(2097151&h?(this._combined[i]=(0,l.stringFromCodePoint)(2097151&h)+(0,l.stringFromCodePoint)(a),h&=-2097152,h|=2097152):h=a|1<<22,this._data[3*i+0]=h)},d.prototype.insertCells=function(i,a,h,n){if((i%=this.length)&&this.getWidth(i-1)===2&&this.setCellFromCodePoint(i-1,0,1,(n==null?void 0:n.fg)||0,(n==null?void 0:n.bg)||0,(n==null?void 0:n.extended)||new u.ExtendedAttrs),a<this.length-i){for(var t=new f.CellData,e=this.length-i-a-1;e>=0;--e)this.setCell(i+a+e,this.loadCell(i+e,t));for(e=0;e<a;++e)this.setCell(i+e,h)}else for(e=i;e<this.length;++e)this.setCell(e,h);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,(n==null?void 0:n.fg)||0,(n==null?void 0:n.bg)||0,(n==null?void 0:n.extended)||new u.ExtendedAttrs)},d.prototype.deleteCells=function(i,a,h,n){if(i%=this.length,a<this.length-i){for(var t=new f.CellData,e=0;e<this.length-i-a;++e)this.setCell(i+e,this.loadCell(i+a+e,t));for(e=this.length-a;e<this.length;++e)this.setCell(e,h)}else for(e=i;e<this.length;++e)this.setCell(e,h);i&&this.getWidth(i-1)===2&&this.setCellFromCodePoint(i-1,0,1,(n==null?void 0:n.fg)||0,(n==null?void 0:n.bg)||0,(n==null?void 0:n.extended)||new u.ExtendedAttrs),this.getWidth(i)!==0||this.hasContent(i)||this.setCellFromCodePoint(i,0,1,(n==null?void 0:n.fg)||0,(n==null?void 0:n.bg)||0,(n==null?void 0:n.extended)||new u.ExtendedAttrs)},d.prototype.replaceCells=function(i,a,h,n){for(i&&this.getWidth(i-1)===2&&this.setCellFromCodePoint(i-1,0,1,(n==null?void 0:n.fg)||0,(n==null?void 0:n.bg)||0,(n==null?void 0:n.extended)||new u.ExtendedAttrs),a<this.length&&this.getWidth(a-1)===2&&this.setCellFromCodePoint(a,0,1,(n==null?void 0:n.fg)||0,(n==null?void 0:n.bg)||0,(n==null?void 0:n.extended)||new u.ExtendedAttrs);i<a&&i<this.length;)this.setCell(i++,h)},d.prototype.resize=function(i,a){if(i!==this.length){if(i>this.length){var h=new Uint32Array(3*i);this.length&&(3*i<this._data.length?h.set(this._data.subarray(0,3*i)):h.set(this._data)),this._data=h;for(var n=this.length;n<i;++n)this.setCell(n,a)}else if(i){(h=new Uint32Array(3*i)).set(this._data.subarray(0,3*i)),this._data=h;var t=Object.keys(this._combined);for(n=0;n<t.length;n++){var e=parseInt(t[n],10);e>=i&&delete this._combined[e]}}else this._data=new Uint32Array(0),this._combined={};this.length=i}},d.prototype.fill=function(i){this._combined={},this._extendedAttrs={};for(var a=0;a<this.length;++a)this.setCell(a,i)},d.prototype.copyFrom=function(i){for(var a in this.length!==i.length?this._data=new Uint32Array(i._data):this._data.set(i._data),this.length=i.length,this._combined={},i._combined)this._combined[a]=i._combined[a];for(var a in this._extendedAttrs={},i._extendedAttrs)this._extendedAttrs[a]=i._extendedAttrs[a];this.isWrapped=i.isWrapped},d.prototype.clone=function(){var i=new d(0);for(var a in i._data=new Uint32Array(this._data),i.length=this.length,this._combined)i._combined[a]=this._combined[a];for(var a in this._extendedAttrs)i._extendedAttrs[a]=this._extendedAttrs[a];return i.isWrapped=this.isWrapped,i},d.prototype.getTrimmedLength=function(){for(var i=this.length-1;i>=0;--i)if(4194303&this._data[3*i+0])return i+(this._data[3*i+0]>>22);return 0},d.prototype.copyCellsFrom=function(i,a,h,n,t){var e=i._data;if(t)for(var r=n-1;r>=0;r--)for(var o=0;o<3;o++)this._data[3*(h+r)+o]=e[3*(a+r)+o];else for(r=0;r<n;r++)for(o=0;o<3;o++)this._data[3*(h+r)+o]=e[3*(a+r)+o];var c=Object.keys(i._combined);for(o=0;o<c.length;o++){var p=parseInt(c[o],10);p>=a&&(this._combined[p-a+h]=i._combined[p])}},d.prototype.translateToString=function(i,a,h){i===void 0&&(i=!1),a===void 0&&(a=0),h===void 0&&(h=this.length),i&&(h=Math.min(h,this.getTrimmedLength()));for(var n="";a<h;){var t=this._data[3*a+0],e=2097151&t;n+=2097152&t?this._combined[a]:e?(0,l.stringFromCodePoint)(e):_.WHITESPACE_CELL_CHAR,a+=t>>22||1}return n},d}();s.BufferLine=S},4841:(P,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.getRangeLength=void 0,s.getRangeLength=function(v,l){if(v.start.y>v.end.y)throw new Error("Buffer range end ("+v.end.x+", "+v.end.y+") cannot be before start ("+v.start.x+", "+v.start.y+")");return l*(v.end.y-v.start.y)+(v.end.x-v.start.x+1)}},4634:(P,s)=>{function v(l,_,f){if(_===l.length-1)return l[_].getTrimmedLength();var u=!l[_].hasContent(f-1)&&l[_].getWidth(f-1)===1,S=l[_+1].getWidth(0)===2;return u&&S?f-1:f}Object.defineProperty(s,"__esModule",{value:!0}),s.getWrappedLineTrimmedLength=s.reflowSmallerGetNewLineLengths=s.reflowLargerApplyNewLayout=s.reflowLargerCreateNewLayout=s.reflowLargerGetLinesToRemove=void 0,s.reflowLargerGetLinesToRemove=function(l,_,f,u,S){for(var d=[],i=0;i<l.length-1;i++){var a=i,h=l.get(++a);if(h.isWrapped){for(var n=[l.get(i)];a<l.length&&h.isWrapped;)n.push(h),h=l.get(++a);if(u>=i&&u<a)i+=n.length-1;else{for(var t=0,e=v(n,t,_),r=1,o=0;r<n.length;){var c=v(n,r,_),p=c-o,g=f-e,C=Math.min(p,g);n[t].copyCellsFrom(n[r],o,e,C,!1),(e+=C)===f&&(t++,e=0),(o+=C)===c&&(r++,o=0),e===0&&t!==0&&n[t-1].getWidth(f-1)===2&&(n[t].copyCellsFrom(n[t-1],f-1,e++,1,!1),n[t-1].setCell(f-1,S))}n[t].replaceCells(e,f,S);for(var b=0,y=n.length-1;y>0&&(y>t||n[y].getTrimmedLength()===0);y--)b++;b>0&&(d.push(i+n.length-b),d.push(b)),i+=n.length-1}}}return d},s.reflowLargerCreateNewLayout=function(l,_){for(var f=[],u=0,S=_[u],d=0,i=0;i<l.length;i++)if(S===i){var a=_[++u];l.onDeleteEmitter.fire({index:i-d,amount:a}),i+=a-1,d+=a,S=_[++u]}else f.push(i);return{layout:f,countRemoved:d}},s.reflowLargerApplyNewLayout=function(l,_){for(var f=[],u=0;u<_.length;u++)f.push(l.get(_[u]));for(u=0;u<f.length;u++)l.set(u,f[u]);l.length=_.length},s.reflowSmallerGetNewLineLengths=function(l,_,f){for(var u=[],S=l.map(function(e,r){return v(l,r,_)}).reduce(function(e,r){return e+r}),d=0,i=0,a=0;a<S;){if(S-a<f){u.push(S-a);break}d+=f;var h=v(l,i,_);d>h&&(d-=h,i++);var n=l[i].getWidth(d-1)===2;n&&d--;var t=n?f-1:f;u.push(t),a+=t}return u},s.getWrappedLineTrimmedLength=v},5295:function(P,s,v){var l,_=this&&this.__extends||(l=function(d,i){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,h){a.__proto__=h}||function(a,h){for(var n in h)Object.prototype.hasOwnProperty.call(h,n)&&(a[n]=h[n])},l(d,i)},function(d,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function a(){this.constructor=d}l(d,i),d.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)});Object.defineProperty(s,"__esModule",{value:!0}),s.BufferSet=void 0;var f=v(9092),u=v(8460),S=function(d){function i(a,h){var n=d.call(this)||this;return n._optionsService=a,n._bufferService=h,n._onBufferActivate=n.register(new u.EventEmitter),n.reset(),n}return _(i,d),Object.defineProperty(i.prototype,"onBufferActivate",{get:function(){return this._onBufferActivate.event},enumerable:!1,configurable:!0}),i.prototype.reset=function(){this._normal=new f.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new f.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()},Object.defineProperty(i.prototype,"alt",{get:function(){return this._alt},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"active",{get:function(){return this._activeBuffer},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"normal",{get:function(){return this._normal},enumerable:!1,configurable:!0}),i.prototype.activateNormalBuffer=function(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))},i.prototype.activateAltBuffer=function(a){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(a),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))},i.prototype.resize=function(a,h){this._normal.resize(a,h),this._alt.resize(a,h)},i.prototype.setupTabStops=function(a){this._normal.setupTabStops(a),this._alt.setupTabStops(a)},i}(v(844).Disposable);s.BufferSet=S},511:function(P,s,v){var l,_=this&&this.__extends||(l=function(i,a){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,n){h.__proto__=n}||function(h,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(h[t]=n[t])},l(i,a)},function(i,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=i}l(i,a),i.prototype=a===null?Object.create(a):(h.prototype=a.prototype,new h)});Object.defineProperty(s,"__esModule",{value:!0}),s.CellData=void 0;var f=v(482),u=v(643),S=v(3734),d=function(i){function a(){var h=i!==null&&i.apply(this,arguments)||this;return h.content=0,h.fg=0,h.bg=0,h.extended=new S.ExtendedAttrs,h.combinedData="",h}return _(a,i),a.fromCharData=function(h){var n=new a;return n.setFromCharData(h),n},a.prototype.isCombined=function(){return 2097152&this.content},a.prototype.getWidth=function(){return this.content>>22},a.prototype.getChars=function(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,f.stringFromCodePoint)(2097151&this.content):""},a.prototype.getCode=function(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content},a.prototype.setFromCharData=function(h){this.fg=h[u.CHAR_DATA_ATTR_INDEX],this.bg=0;var n=!1;if(h[u.CHAR_DATA_CHAR_INDEX].length>2)n=!0;else if(h[u.CHAR_DATA_CHAR_INDEX].length===2){var t=h[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=t&&t<=56319){var e=h[u.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=e&&e<=57343?this.content=1024*(t-55296)+e-56320+65536|h[u.CHAR_DATA_WIDTH_INDEX]<<22:n=!0}else n=!0}else this.content=h[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|h[u.CHAR_DATA_WIDTH_INDEX]<<22;n&&(this.combinedData=h[u.CHAR_DATA_CHAR_INDEX],this.content=2097152|h[u.CHAR_DATA_WIDTH_INDEX]<<22)},a.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},a}(S.AttributeData);s.CellData=d},643:(P,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WHITESPACE_CELL_CODE=s.WHITESPACE_CELL_WIDTH=s.WHITESPACE_CELL_CHAR=s.NULL_CELL_CODE=s.NULL_CELL_WIDTH=s.NULL_CELL_CHAR=s.CHAR_DATA_CODE_INDEX=s.CHAR_DATA_WIDTH_INDEX=s.CHAR_DATA_CHAR_INDEX=s.CHAR_DATA_ATTR_INDEX=s.DEFAULT_ATTR=s.DEFAULT_COLOR=void 0,s.DEFAULT_COLOR=256,s.DEFAULT_ATTR=256|s.DEFAULT_COLOR<<9,s.CHAR_DATA_ATTR_INDEX=0,s.CHAR_DATA_CHAR_INDEX=1,s.CHAR_DATA_WIDTH_INDEX=2,s.CHAR_DATA_CODE_INDEX=3,s.NULL_CELL_CHAR="",s.NULL_CELL_WIDTH=1,s.NULL_CELL_CODE=0,s.WHITESPACE_CELL_CHAR=" ",s.WHITESPACE_CELL_WIDTH=1,s.WHITESPACE_CELL_CODE=32},4863:function(P,s,v){var l,_=this&&this.__extends||(l=function(S,d){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var h in a)Object.prototype.hasOwnProperty.call(a,h)&&(i[h]=a[h])},l(S,d)},function(S,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function i(){this.constructor=S}l(S,d),S.prototype=d===null?Object.create(d):(i.prototype=d.prototype,new i)});Object.defineProperty(s,"__esModule",{value:!0}),s.Marker=void 0;var f=v(8460),u=function(S){function d(i){var a=S.call(this)||this;return a.line=i,a._id=d._nextId++,a.isDisposed=!1,a._onDispose=new f.EventEmitter,a}return _(d,S),Object.defineProperty(d.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onDispose",{get:function(){return this._onDispose.event},enumerable:!1,configurable:!0}),d.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),S.prototype.dispose.call(this))},d._nextId=1,d}(v(844).Disposable);s.Marker=u},7116:(P,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DEFAULT_CHARSET=s.CHARSETS=void 0,s.CHARSETS={},s.DEFAULT_CHARSET=s.CHARSETS.B,s.CHARSETS[0]={"`":"\u25C6",a:"\u2592",b:"\u2409",c:"\u240C",d:"\u240D",e:"\u240A",f:"\xB0",g:"\xB1",h:"\u2424",i:"\u240B",j:"\u2518",k:"\u2510",l:"\u250C",m:"\u2514",n:"\u253C",o:"\u23BA",p:"\u23BB",q:"\u2500",r:"\u23BC",s:"\u23BD",t:"\u251C",u:"\u2524",v:"\u2534",w:"\u252C",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03C0","|":"\u2260","}":"\xA3","~":"\xB7"},s.CHARSETS.A={"#":"\xA3"},s.CHARSETS.B=void 0,s.CHARSETS[4]={"#":"\xA3","@":"\xBE","[":"ij","\\":"\xBD","]":"|","{":"\xA8","|":"f","}":"\xBC","~":"\xB4"},s.CHARSETS.C=s.CHARSETS[5]={"[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},s.CHARSETS.R={"#":"\xA3","@":"\xE0","[":"\xB0","\\":"\xE7","]":"\xA7","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xA8"},s.CHARSETS.Q={"@":"\xE0","[":"\xE2","\\":"\xE7","]":"\xEA","^":"\xEE","`":"\xF4","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xFB"},s.CHARSETS.K={"@":"\xA7","[":"\xC4","\\":"\xD6","]":"\xDC","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xDF"},s.CHARSETS.Y={"#":"\xA3","@":"\xA7","[":"\xB0","\\":"\xE7","]":"\xE9","`":"\xF9","{":"\xE0","|":"\xF2","}":"\xE8","~":"\xEC"},s.CHARSETS.E=s.CHARSETS[6]={"@":"\xC4","[":"\xC6","\\":"\xD8","]":"\xC5","^":"\xDC","`":"\xE4","{":"\xE6","|":"\xF8","}":"\xE5","~":"\xFC"},s.CHARSETS.Z={"#":"\xA3","@":"\xA7","[":"\xA1","\\":"\xD1","]":"\xBF","{":"\xB0","|":"\xF1","}":"\xE7"},s.CHARSETS.H=s.CHARSETS[7]={"@":"\xC9","[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},s.CHARSETS["="]={"#":"\xF9","@":"\xE0","[":"\xE9","\\":"\xE7","]":"\xEA","^":"\xEE",_:"\xE8","`":"\xF4","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xFB"}},2584:(P,s)=>{var v,l;Object.defineProperty(s,"__esModule",{value:!0}),s.C1=s.C0=void 0,(l=s.C0||(s.C0={})).NUL="\0",l.SOH="",l.STX="",l.ETX="",l.EOT="",l.ENQ="",l.ACK="",l.BEL="\x07",l.BS="\b",l.HT="	",l.LF=`
`,l.VT="\v",l.FF="\f",l.CR="\r",l.SO="",l.SI="",l.DLE="",l.DC1="",l.DC2="",l.DC3="",l.DC4="",l.NAK="",l.SYN="",l.ETB="",l.CAN="",l.EM="",l.SUB="",l.ESC="",l.FS="",l.GS="",l.RS="",l.US="",l.SP=" ",l.DEL="\x7F",(v=s.C1||(s.C1={})).PAD="\x80",v.HOP="\x81",v.BPH="\x82",v.NBH="\x83",v.IND="\x84",v.NEL="\x85",v.SSA="\x86",v.ESA="\x87",v.HTS="\x88",v.HTJ="\x89",v.VTS="\x8A",v.PLD="\x8B",v.PLU="\x8C",v.RI="\x8D",v.SS2="\x8E",v.SS3="\x8F",v.DCS="\x90",v.PU1="\x91",v.PU2="\x92",v.STS="\x93",v.CCH="\x94",v.MW="\x95",v.SPA="\x96",v.EPA="\x97",v.SOS="\x98",v.SGCI="\x99",v.SCI="\x9A",v.CSI="\x9B",v.ST="\x9C",v.OSC="\x9D",v.PM="\x9E",v.APC="\x9F"},7399:(P,s,v)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.evaluateKeyboardEvent=void 0;var l=v(2584),_={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};s.evaluateKeyboardEvent=function(f,u,S,d){var i={type:0,cancel:!1,key:void 0},a=(f.shiftKey?1:0)|(f.altKey?2:0)|(f.ctrlKey?4:0)|(f.metaKey?8:0);switch(f.keyCode){case 0:f.key==="UIKeyInputUpArrow"?i.key=u?l.C0.ESC+"OA":l.C0.ESC+"[A":f.key==="UIKeyInputLeftArrow"?i.key=u?l.C0.ESC+"OD":l.C0.ESC+"[D":f.key==="UIKeyInputRightArrow"?i.key=u?l.C0.ESC+"OC":l.C0.ESC+"[C":f.key==="UIKeyInputDownArrow"&&(i.key=u?l.C0.ESC+"OB":l.C0.ESC+"[B");break;case 8:if(f.shiftKey){i.key=l.C0.BS;break}if(f.altKey){i.key=l.C0.ESC+l.C0.DEL;break}i.key=l.C0.DEL;break;case 9:if(f.shiftKey){i.key=l.C0.ESC+"[Z";break}i.key=l.C0.HT,i.cancel=!0;break;case 13:i.key=f.altKey?l.C0.ESC+l.C0.CR:l.C0.CR,i.cancel=!0;break;case 27:i.key=l.C0.ESC,f.altKey&&(i.key=l.C0.ESC+l.C0.ESC),i.cancel=!0;break;case 37:if(f.metaKey)break;a?(i.key=l.C0.ESC+"[1;"+(a+1)+"D",i.key===l.C0.ESC+"[1;3D"&&(i.key=l.C0.ESC+(S?"b":"[1;5D"))):i.key=u?l.C0.ESC+"OD":l.C0.ESC+"[D";break;case 39:if(f.metaKey)break;a?(i.key=l.C0.ESC+"[1;"+(a+1)+"C",i.key===l.C0.ESC+"[1;3C"&&(i.key=l.C0.ESC+(S?"f":"[1;5C"))):i.key=u?l.C0.ESC+"OC":l.C0.ESC+"[C";break;case 38:if(f.metaKey)break;a?(i.key=l.C0.ESC+"[1;"+(a+1)+"A",S||i.key!==l.C0.ESC+"[1;3A"||(i.key=l.C0.ESC+"[1;5A")):i.key=u?l.C0.ESC+"OA":l.C0.ESC+"[A";break;case 40:if(f.metaKey)break;a?(i.key=l.C0.ESC+"[1;"+(a+1)+"B",S||i.key!==l.C0.ESC+"[1;3B"||(i.key=l.C0.ESC+"[1;5B")):i.key=u?l.C0.ESC+"OB":l.C0.ESC+"[B";break;case 45:f.shiftKey||f.ctrlKey||(i.key=l.C0.ESC+"[2~");break;case 46:i.key=a?l.C0.ESC+"[3;"+(a+1)+"~":l.C0.ESC+"[3~";break;case 36:i.key=a?l.C0.ESC+"[1;"+(a+1)+"H":u?l.C0.ESC+"OH":l.C0.ESC+"[H";break;case 35:i.key=a?l.C0.ESC+"[1;"+(a+1)+"F":u?l.C0.ESC+"OF":l.C0.ESC+"[F";break;case 33:f.shiftKey?i.type=2:i.key=l.C0.ESC+"[5~";break;case 34:f.shiftKey?i.type=3:i.key=l.C0.ESC+"[6~";break;case 112:i.key=a?l.C0.ESC+"[1;"+(a+1)+"P":l.C0.ESC+"OP";break;case 113:i.key=a?l.C0.ESC+"[1;"+(a+1)+"Q":l.C0.ESC+"OQ";break;case 114:i.key=a?l.C0.ESC+"[1;"+(a+1)+"R":l.C0.ESC+"OR";break;case 115:i.key=a?l.C0.ESC+"[1;"+(a+1)+"S":l.C0.ESC+"OS";break;case 116:i.key=a?l.C0.ESC+"[15;"+(a+1)+"~":l.C0.ESC+"[15~";break;case 117:i.key=a?l.C0.ESC+"[17;"+(a+1)+"~":l.C0.ESC+"[17~";break;case 118:i.key=a?l.C0.ESC+"[18;"+(a+1)+"~":l.C0.ESC+"[18~";break;case 119:i.key=a?l.C0.ESC+"[19;"+(a+1)+"~":l.C0.ESC+"[19~";break;case 120:i.key=a?l.C0.ESC+"[20;"+(a+1)+"~":l.C0.ESC+"[20~";break;case 121:i.key=a?l.C0.ESC+"[21;"+(a+1)+"~":l.C0.ESC+"[21~";break;case 122:i.key=a?l.C0.ESC+"[23;"+(a+1)+"~":l.C0.ESC+"[23~";break;case 123:i.key=a?l.C0.ESC+"[24;"+(a+1)+"~":l.C0.ESC+"[24~";break;default:if(!f.ctrlKey||f.shiftKey||f.altKey||f.metaKey)if(S&&!d||!f.altKey||f.metaKey)!S||f.altKey||f.ctrlKey||f.shiftKey||!f.metaKey?f.key&&!f.ctrlKey&&!f.altKey&&!f.metaKey&&f.keyCode>=48&&f.key.length===1?i.key=f.key:f.key&&f.ctrlKey&&f.key==="_"&&(i.key=l.C0.US):f.keyCode===65&&(i.type=1);else{var h=_[f.keyCode],n=h&&h[f.shiftKey?1:0];if(n)i.key=l.C0.ESC+n;else if(f.keyCode>=65&&f.keyCode<=90){var t=f.ctrlKey?f.keyCode-64:f.keyCode+32;i.key=l.C0.ESC+String.fromCharCode(t)}}else f.keyCode>=65&&f.keyCode<=90?i.key=String.fromCharCode(f.keyCode-64):f.keyCode===32?i.key=l.C0.NUL:f.keyCode>=51&&f.keyCode<=55?i.key=String.fromCharCode(f.keyCode-51+27):f.keyCode===56?i.key=l.C0.DEL:f.keyCode===219?i.key=l.C0.ESC:f.keyCode===220?i.key=l.C0.FS:f.keyCode===221&&(i.key=l.C0.GS)}return i}},482:(P,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Utf8ToUtf32=s.StringToUtf32=s.utf32ToString=s.stringFromCodePoint=void 0,s.stringFromCodePoint=function(_){return _>65535?(_-=65536,String.fromCharCode(55296+(_>>10))+String.fromCharCode(_%1024+56320)):String.fromCharCode(_)},s.utf32ToString=function(_,f,u){f===void 0&&(f=0),u===void 0&&(u=_.length);for(var S="",d=f;d<u;++d){var i=_[d];i>65535?(i-=65536,S+=String.fromCharCode(55296+(i>>10))+String.fromCharCode(i%1024+56320)):S+=String.fromCharCode(i)}return S};var v=function(){function _(){this._interim=0}return _.prototype.clear=function(){this._interim=0},_.prototype.decode=function(f,u){var S=f.length;if(!S)return 0;var d=0,i=0;this._interim&&(56320<=(n=f.charCodeAt(i++))&&n<=57343?u[d++]=1024*(this._interim-55296)+n-56320+65536:(u[d++]=this._interim,u[d++]=n),this._interim=0);for(var a=i;a<S;++a){var h=f.charCodeAt(a);if(55296<=h&&h<=56319){if(++a>=S)return this._interim=h,d;var n;56320<=(n=f.charCodeAt(a))&&n<=57343?u[d++]=1024*(h-55296)+n-56320+65536:(u[d++]=h,u[d++]=n)}else h!==65279&&(u[d++]=h)}return d},_}();s.StringToUtf32=v;var l=function(){function _(){this.interim=new Uint8Array(3)}return _.prototype.clear=function(){this.interim.fill(0)},_.prototype.decode=function(f,u){var S=f.length;if(!S)return 0;var d,i,a,h,n=0,t=0,e=0;if(this.interim[0]){var r=!1,o=this.interim[0];o&=(224&o)==192?31:(240&o)==224?15:7;for(var c=0,p=void 0;(p=63&this.interim[++c])&&c<4;)o<<=6,o|=p;for(var g=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,C=g-c;e<C;){if(e>=S)return 0;if((192&(p=f[e++]))!=128){e--,r=!0;break}this.interim[c++]=p,o<<=6,o|=63&p}r||(g===2?o<128?e--:u[n++]=o:g===3?o<2048||o>=55296&&o<=57343||o===65279||(u[n++]=o):o<65536||o>1114111||(u[n++]=o)),this.interim.fill(0)}for(var b=S-4,y=e;y<S;){for(;!(!(y<b)||128&(d=f[y])||128&(i=f[y+1])||128&(a=f[y+2])||128&(h=f[y+3]));)u[n++]=d,u[n++]=i,u[n++]=a,u[n++]=h,y+=4;if((d=f[y++])<128)u[n++]=d;else if((224&d)==192){if(y>=S)return this.interim[0]=d,n;if((192&(i=f[y++]))!=128){y--;continue}if((t=(31&d)<<6|63&i)<128){y--;continue}u[n++]=t}else if((240&d)==224){if(y>=S)return this.interim[0]=d,n;if((192&(i=f[y++]))!=128){y--;continue}if(y>=S)return this.interim[0]=d,this.interim[1]=i,n;if((192&(a=f[y++]))!=128){y--;continue}if((t=(15&d)<<12|(63&i)<<6|63&a)<2048||t>=55296&&t<=57343||t===65279)continue;u[n++]=t}else if((248&d)==240){if(y>=S)return this.interim[0]=d,n;if((192&(i=f[y++]))!=128){y--;continue}if(y>=S)return this.interim[0]=d,this.interim[1]=i,n;if((192&(a=f[y++]))!=128){y--;continue}if(y>=S)return this.interim[0]=d,this.interim[1]=i,this.interim[2]=a,n;if((192&(h=f[y++]))!=128){y--;continue}if((t=(7&d)<<18|(63&i)<<12|(63&a)<<6|63&h)<65536||t>1114111)continue;u[n++]=t}}return n},_}();s.Utf8ToUtf32=l},225:(P,s,v)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeV6=void 0;var l,_=v(8273),f=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],u=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],S=function(){function d(){if(this.version="6",!l){l=new Uint8Array(65536),(0,_.fill)(l,1),l[0]=0,(0,_.fill)(l,0,1,32),(0,_.fill)(l,0,127,160),(0,_.fill)(l,2,4352,4448),l[9001]=2,l[9002]=2,(0,_.fill)(l,2,11904,42192),l[12351]=1,(0,_.fill)(l,2,44032,55204),(0,_.fill)(l,2,63744,64256),(0,_.fill)(l,2,65040,65050),(0,_.fill)(l,2,65072,65136),(0,_.fill)(l,2,65280,65377),(0,_.fill)(l,2,65504,65511);for(var i=0;i<f.length;++i)(0,_.fill)(l,0,f[i][0],f[i][1]+1)}}return d.prototype.wcwidth=function(i){return i<32?0:i<127?1:i<65536?l[i]:function(a,h){var n,t=0,e=h.length-1;if(a<h[0][0]||a>h[e][1])return!1;for(;e>=t;)if(a>h[n=t+e>>1][1])t=n+1;else{if(!(a<h[n][0]))return!0;e=n-1}return!1}(i,u)?0:i>=131072&&i<=196605||i>=196608&&i<=262141?2:1},d}();s.UnicodeV6=S},5981:(P,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WriteBuffer=void 0;var v=typeof queueMicrotask=="undefined"?function(_){Promise.resolve().then(_)}:queueMicrotask,l=function(){function _(f){this._action=f,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0}return _.prototype.writeSync=function(f,u){if(u!==void 0&&this._syncCalls>u)this._syncCalls=0;else if(this._pendingData+=f.length,this._writeBuffer.push(f),this._callbacks.push(void 0),this._syncCalls++,!this._isSyncWriting){var S;for(this._isSyncWriting=!0;S=this._writeBuffer.shift();){this._action(S);var d=this._callbacks.shift();d&&d()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}},_.prototype.write=function(f,u){var S=this;if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");this._writeBuffer.length||(this._bufferOffset=0,setTimeout(function(){return S._innerWrite()})),this._pendingData+=f.length,this._writeBuffer.push(f),this._callbacks.push(u)},_.prototype._innerWrite=function(f,u){var S=this;f===void 0&&(f=0),u===void 0&&(u=!0);for(var d=f||Date.now();this._writeBuffer.length>this._bufferOffset;){var i=this._writeBuffer[this._bufferOffset],a=this._action(i,u);if(a)return void a.catch(function(n){return v(function(){throw n}),Promise.resolve(!1)}).then(function(n){return Date.now()-d>=12?setTimeout(function(){return S._innerWrite(0,n)}):S._innerWrite(d,n)});var h=this._callbacks[this._bufferOffset];if(h&&h(),this._bufferOffset++,this._pendingData-=i.length,Date.now()-d>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(function(){return S._innerWrite()})):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0)},_}();s.WriteBuffer=l},5770:(P,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PAYLOAD_LIMIT=void 0,s.PAYLOAD_LIMIT=1e7},6351:(P,s,v)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DcsHandler=s.DcsParser=void 0;var l=v(482),_=v(8742),f=v(5770),u=[],S=function(){function a(){this._handlers=Object.create(null),this._active=u,this._ident=0,this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return a.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=u},a.prototype.registerHandler=function(h,n){this._handlers[h]===void 0&&(this._handlers[h]=[]);var t=this._handlers[h];return t.push(n),{dispose:function(){var e=t.indexOf(n);e!==-1&&t.splice(e,1)}}},a.prototype.clearHandler=function(h){this._handlers[h]&&delete this._handlers[h]},a.prototype.setHandlerFallback=function(h){this._handlerFb=h},a.prototype.reset=function(){if(this._active.length)for(var h=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;h>=0;--h)this._active[h].unhook(!1);this._stack.paused=!1,this._active=u,this._ident=0},a.prototype.hook=function(h,n){if(this.reset(),this._ident=h,this._active=this._handlers[h]||u,this._active.length)for(var t=this._active.length-1;t>=0;t--)this._active[t].hook(n);else this._handlerFb(this._ident,"HOOK",n)},a.prototype.put=function(h,n,t){if(this._active.length)for(var e=this._active.length-1;e>=0;e--)this._active[e].put(h,n,t);else this._handlerFb(this._ident,"PUT",(0,l.utf32ToString)(h,n,t))},a.prototype.unhook=function(h,n){if(n===void 0&&(n=!0),this._active.length){var t=!1,e=this._active.length-1,r=!1;if(this._stack.paused&&(e=this._stack.loopPosition-1,t=n,r=this._stack.fallThrough,this._stack.paused=!1),!r&&t===!1){for(;e>=0&&(t=this._active[e].unhook(h))!==!0;e--)if(t instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=e,this._stack.fallThrough=!1,t;e--}for(;e>=0;e--)if((t=this._active[e].unhook(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=e,this._stack.fallThrough=!0,t}else this._handlerFb(this._ident,"UNHOOK",h);this._active=u,this._ident=0},a}();s.DcsParser=S;var d=new _.Params;d.addParam(0);var i=function(){function a(h){this._handler=h,this._data="",this._params=d,this._hitLimit=!1}return a.prototype.hook=function(h){this._params=h.length>1||h.params[0]?h.clone():d,this._data="",this._hitLimit=!1},a.prototype.put=function(h,n,t){this._hitLimit||(this._data+=(0,l.utf32ToString)(h,n,t),this._data.length>f.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},a.prototype.unhook=function(h){var n=this,t=!1;if(this._hitLimit)t=!1;else if(h&&(t=this._handler(this._data,this._params))instanceof Promise)return t.then(function(e){return n._params=d,n._data="",n._hitLimit=!1,e});return this._params=d,this._data="",this._hitLimit=!1,t},a}();s.DcsHandler=i},2015:function(P,s,v){var l,_=this&&this.__extends||(l=function(t,e){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])},l(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}l(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(s,"__esModule",{value:!0}),s.EscapeSequenceParser=s.VT500_TRANSITION_TABLE=s.TransitionTable=void 0;var f=v(844),u=v(8273),S=v(8742),d=v(6242),i=v(6351),a=function(){function t(e){this.table=new Uint8Array(e)}return t.prototype.setDefault=function(e,r){(0,u.fill)(this.table,e<<4|r)},t.prototype.add=function(e,r,o,c){this.table[r<<8|e]=o<<4|c},t.prototype.addMany=function(e,r,o,c){for(var p=0;p<e.length;p++)this.table[r<<8|e[p]]=o<<4|c},t}();s.TransitionTable=a;var h=160;s.VT500_TRANSITION_TABLE=function(){var t=new a(4095),e=Array.apply(null,Array(256)).map(function(C,b){return b}),r=function(C,b){return e.slice(C,b)},o=r(32,127),c=r(0,24);c.push(25),c.push.apply(c,r(28,32));var p,g=r(0,14);for(p in t.setDefault(1,0),t.addMany(o,0,2,0),g)t.addMany([24,26,153,154],p,3,0),t.addMany(r(128,144),p,3,0),t.addMany(r(144,152),p,3,0),t.add(156,p,0,0),t.add(27,p,11,1),t.add(157,p,4,8),t.addMany([152,158,159],p,0,7),t.add(155,p,11,3),t.add(144,p,11,9);return t.addMany(c,0,3,0),t.addMany(c,1,3,1),t.add(127,1,0,1),t.addMany(c,8,0,8),t.addMany(c,3,3,3),t.add(127,3,0,3),t.addMany(c,4,3,4),t.add(127,4,0,4),t.addMany(c,6,3,6),t.addMany(c,5,3,5),t.add(127,5,0,5),t.addMany(c,2,3,2),t.add(127,2,0,2),t.add(93,1,4,8),t.addMany(o,8,5,8),t.add(127,8,5,8),t.addMany([156,27,24,26,7],8,6,0),t.addMany(r(28,32),8,0,8),t.addMany([88,94,95],1,0,7),t.addMany(o,7,0,7),t.addMany(c,7,0,7),t.add(156,7,0,0),t.add(127,7,0,7),t.add(91,1,11,3),t.addMany(r(64,127),3,7,0),t.addMany(r(48,60),3,8,4),t.addMany([60,61,62,63],3,9,4),t.addMany(r(48,60),4,8,4),t.addMany(r(64,127),4,7,0),t.addMany([60,61,62,63],4,0,6),t.addMany(r(32,64),6,0,6),t.add(127,6,0,6),t.addMany(r(64,127),6,0,0),t.addMany(r(32,48),3,9,5),t.addMany(r(32,48),5,9,5),t.addMany(r(48,64),5,0,6),t.addMany(r(64,127),5,7,0),t.addMany(r(32,48),4,9,5),t.addMany(r(32,48),1,9,2),t.addMany(r(32,48),2,9,2),t.addMany(r(48,127),2,10,0),t.addMany(r(48,80),1,10,0),t.addMany(r(81,88),1,10,0),t.addMany([89,90,92],1,10,0),t.addMany(r(96,127),1,10,0),t.add(80,1,11,9),t.addMany(c,9,0,9),t.add(127,9,0,9),t.addMany(r(28,32),9,0,9),t.addMany(r(32,48),9,9,12),t.addMany(r(48,60),9,8,10),t.addMany([60,61,62,63],9,9,10),t.addMany(c,11,0,11),t.addMany(r(32,128),11,0,11),t.addMany(r(28,32),11,0,11),t.addMany(c,10,0,10),t.add(127,10,0,10),t.addMany(r(28,32),10,0,10),t.addMany(r(48,60),10,8,10),t.addMany([60,61,62,63],10,0,11),t.addMany(r(32,48),10,9,12),t.addMany(c,12,0,12),t.add(127,12,0,12),t.addMany(r(28,32),12,0,12),t.addMany(r(32,48),12,9,12),t.addMany(r(48,64),12,0,11),t.addMany(r(64,127),12,12,13),t.addMany(r(64,127),10,12,13),t.addMany(r(64,127),9,12,13),t.addMany(c,13,13,13),t.addMany(o,13,13,13),t.add(127,13,0,13),t.addMany([27,156,24,26],13,14,0),t.add(h,0,2,0),t.add(h,8,5,8),t.add(h,6,0,6),t.add(h,11,0,11),t.add(h,13,13,13),t}();var n=function(t){function e(r){r===void 0&&(r=s.VT500_TRANSITION_TABLE);var o=t.call(this)||this;return o._transitions=r,o._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},o.initialState=0,o.currentState=o.initialState,o._params=new S.Params,o._params.addParam(0),o._collect=0,o.precedingCodepoint=0,o._printHandlerFb=function(c,p,g){},o._executeHandlerFb=function(c){},o._csiHandlerFb=function(c,p){},o._escHandlerFb=function(c){},o._errorHandlerFb=function(c){return c},o._printHandler=o._printHandlerFb,o._executeHandlers=Object.create(null),o._csiHandlers=Object.create(null),o._escHandlers=Object.create(null),o._oscParser=new d.OscParser,o._dcsParser=new i.DcsParser,o._errorHandler=o._errorHandlerFb,o.registerEscHandler({final:"\\"},function(){return!0}),o}return _(e,t),e.prototype._identifier=function(r,o){o===void 0&&(o=[64,126]);var c=0;if(r.prefix){if(r.prefix.length>1)throw new Error("only one byte as prefix supported");if((c=r.prefix.charCodeAt(0))&&60>c||c>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(r.intermediates){if(r.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(var p=0;p<r.intermediates.length;++p){var g=r.intermediates.charCodeAt(p);if(32>g||g>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");c<<=8,c|=g}}if(r.final.length!==1)throw new Error("final must be a single byte");var C=r.final.charCodeAt(0);if(o[0]>C||C>o[1])throw new Error("final must be in range "+o[0]+" .. "+o[1]);return(c<<=8)|C},e.prototype.identToString=function(r){for(var o=[];r;)o.push(String.fromCharCode(255&r)),r>>=8;return o.reverse().join("")},e.prototype.dispose=function(){this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null),this._oscParser.dispose(),this._dcsParser.dispose()},e.prototype.setPrintHandler=function(r){this._printHandler=r},e.prototype.clearPrintHandler=function(){this._printHandler=this._printHandlerFb},e.prototype.registerEscHandler=function(r,o){var c=this._identifier(r,[48,126]);this._escHandlers[c]===void 0&&(this._escHandlers[c]=[]);var p=this._escHandlers[c];return p.push(o),{dispose:function(){var g=p.indexOf(o);g!==-1&&p.splice(g,1)}}},e.prototype.clearEscHandler=function(r){this._escHandlers[this._identifier(r,[48,126])]&&delete this._escHandlers[this._identifier(r,[48,126])]},e.prototype.setEscHandlerFallback=function(r){this._escHandlerFb=r},e.prototype.setExecuteHandler=function(r,o){this._executeHandlers[r.charCodeAt(0)]=o},e.prototype.clearExecuteHandler=function(r){this._executeHandlers[r.charCodeAt(0)]&&delete this._executeHandlers[r.charCodeAt(0)]},e.prototype.setExecuteHandlerFallback=function(r){this._executeHandlerFb=r},e.prototype.registerCsiHandler=function(r,o){var c=this._identifier(r);this._csiHandlers[c]===void 0&&(this._csiHandlers[c]=[]);var p=this._csiHandlers[c];return p.push(o),{dispose:function(){var g=p.indexOf(o);g!==-1&&p.splice(g,1)}}},e.prototype.clearCsiHandler=function(r){this._csiHandlers[this._identifier(r)]&&delete this._csiHandlers[this._identifier(r)]},e.prototype.setCsiHandlerFallback=function(r){this._csiHandlerFb=r},e.prototype.registerDcsHandler=function(r,o){return this._dcsParser.registerHandler(this._identifier(r),o)},e.prototype.clearDcsHandler=function(r){this._dcsParser.clearHandler(this._identifier(r))},e.prototype.setDcsHandlerFallback=function(r){this._dcsParser.setHandlerFallback(r)},e.prototype.registerOscHandler=function(r,o){return this._oscParser.registerHandler(r,o)},e.prototype.clearOscHandler=function(r){this._oscParser.clearHandler(r)},e.prototype.setOscHandlerFallback=function(r){this._oscParser.setHandlerFallback(r)},e.prototype.setErrorHandler=function(r){this._errorHandler=r},e.prototype.clearErrorHandler=function(){this._errorHandler=this._errorHandlerFb},e.prototype.reset=function(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])},e.prototype._preserveStack=function(r,o,c,p,g){this._parseStack.state=r,this._parseStack.handlers=o,this._parseStack.handlerPos=c,this._parseStack.transition=p,this._parseStack.chunkPos=g},e.prototype.parse=function(r,o,c){var p,g=0,C=0,b=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,b=this._parseStack.chunkPos+1;else{if(c===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");var y=this._parseStack.handlers,m=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(c===!1&&m>-1){for(;m>=0&&(p=y[m](this._params))!==!0;m--)if(p instanceof Promise)return this._parseStack.handlerPos=m,p}this._parseStack.handlers=[];break;case 4:if(c===!1&&m>-1){for(;m>=0&&(p=y[m]())!==!0;m--)if(p instanceof Promise)return this._parseStack.handlerPos=m,p}this._parseStack.handlers=[];break;case 6:if(g=r[this._parseStack.chunkPos],p=this._dcsParser.unhook(g!==24&&g!==26,c))return p;g===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(g=r[this._parseStack.chunkPos],p=this._oscParser.end(g!==24&&g!==26,c))return p;g===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,b=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(var k=b;k<o;++k){switch(g=r[k],(C=this._transitions.table[this.currentState<<8|(g<160?g:h)])>>4){case 2:for(var w=k+1;;++w){if(w>=o||(g=r[w])<32||g>126&&g<h){this._printHandler(r,k,w),k=w-1;break}if(++w>=o||(g=r[w])<32||g>126&&g<h){this._printHandler(r,k,w),k=w-1;break}if(++w>=o||(g=r[w])<32||g>126&&g<h){this._printHandler(r,k,w),k=w-1;break}if(++w>=o||(g=r[w])<32||g>126&&g<h){this._printHandler(r,k,w),k=w-1;break}}break;case 3:this._executeHandlers[g]?this._executeHandlers[g]():this._executeHandlerFb(g),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:k,code:g,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:for(var A=(y=this._csiHandlers[this._collect<<8|g])?y.length-1:-1;A>=0&&(p=y[A](this._params))!==!0;A--)if(p instanceof Promise)return this._preserveStack(3,y,A,C,k),p;A<0&&this._csiHandlerFb(this._collect<<8|g,this._params),this.precedingCodepoint=0;break;case 8:do switch(g){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(g-48)}while(++k<o&&(g=r[k])>47&&g<60);k--;break;case 9:this._collect<<=8,this._collect|=g;break;case 10:for(var x=this._escHandlers[this._collect<<8|g],L=x?x.length-1:-1;L>=0&&(p=x[L]())!==!0;L--)if(p instanceof Promise)return this._preserveStack(4,x,L,C,k),p;L<0&&this._escHandlerFb(this._collect<<8|g),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|g,this._params);break;case 13:for(var D=k+1;;++D)if(D>=o||(g=r[D])===24||g===26||g===27||g>127&&g<h){this._dcsParser.put(r,k,D),k=D-1;break}break;case 14:if(p=this._dcsParser.unhook(g!==24&&g!==26))return this._preserveStack(6,[],0,C,k),p;g===27&&(C|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(var T=k+1;;T++)if(T>=o||(g=r[T])<32||g>127&&g<h){this._oscParser.put(r,k,T),k=T-1;break}break;case 6:if(p=this._oscParser.end(g!==24&&g!==26))return this._preserveStack(5,[],0,C,k),p;g===27&&(C|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&C}},e}(f.Disposable);s.EscapeSequenceParser=n},6242:(P,s,v)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.OscHandler=s.OscParser=void 0;var l=v(5770),_=v(482),f=[],u=function(){function d(){this._state=0,this._active=f,this._id=-1,this._handlers=Object.create(null),this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return d.prototype.registerHandler=function(i,a){this._handlers[i]===void 0&&(this._handlers[i]=[]);var h=this._handlers[i];return h.push(a),{dispose:function(){var n=h.indexOf(a);n!==-1&&h.splice(n,1)}}},d.prototype.clearHandler=function(i){this._handlers[i]&&delete this._handlers[i]},d.prototype.setHandlerFallback=function(i){this._handlerFb=i},d.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=f},d.prototype.reset=function(){if(this._state===2)for(var i=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;i>=0;--i)this._active[i].end(!1);this._stack.paused=!1,this._active=f,this._id=-1,this._state=0},d.prototype._start=function(){if(this._active=this._handlers[this._id]||f,this._active.length)for(var i=this._active.length-1;i>=0;i--)this._active[i].start();else this._handlerFb(this._id,"START")},d.prototype._put=function(i,a,h){if(this._active.length)for(var n=this._active.length-1;n>=0;n--)this._active[n].put(i,a,h);else this._handlerFb(this._id,"PUT",(0,_.utf32ToString)(i,a,h))},d.prototype.start=function(){this.reset(),this._state=1},d.prototype.put=function(i,a,h){if(this._state!==3){if(this._state===1)for(;a<h;){var n=i[a++];if(n===59){this._state=2,this._start();break}if(n<48||57<n)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+n-48}this._state===2&&h-a>0&&this._put(i,a,h)}},d.prototype.end=function(i,a){if(a===void 0&&(a=!0),this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){var h=!1,n=this._active.length-1,t=!1;if(this._stack.paused&&(n=this._stack.loopPosition-1,h=a,t=this._stack.fallThrough,this._stack.paused=!1),!t&&h===!1){for(;n>=0&&(h=this._active[n].end(i))!==!0;n--)if(h instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=n,this._stack.fallThrough=!1,h;n--}for(;n>=0;n--)if((h=this._active[n].end(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=n,this._stack.fallThrough=!0,h}else this._handlerFb(this._id,"END",i);this._active=f,this._id=-1,this._state=0}},d}();s.OscParser=u;var S=function(){function d(i){this._handler=i,this._data="",this._hitLimit=!1}return d.prototype.start=function(){this._data="",this._hitLimit=!1},d.prototype.put=function(i,a,h){this._hitLimit||(this._data+=(0,_.utf32ToString)(i,a,h),this._data.length>l.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},d.prototype.end=function(i){var a=this,h=!1;if(this._hitLimit)h=!1;else if(i&&(h=this._handler(this._data))instanceof Promise)return h.then(function(n){return a._data="",a._hitLimit=!1,n});return this._data="",this._hitLimit=!1,h},d}();s.OscHandler=S},8742:(P,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Params=void 0;var v=2147483647,l=function(){function _(f,u){if(f===void 0&&(f=32),u===void 0&&(u=32),this.maxLength=f,this.maxSubParamsLength=u,u>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(f),this.length=0,this._subParams=new Int32Array(u),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(f),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}return _.fromArray=function(f){var u=new _;if(!f.length)return u;for(var S=f[0]instanceof Array?1:0;S<f.length;++S){var d=f[S];if(d instanceof Array)for(var i=0;i<d.length;++i)u.addSubParam(d[i]);else u.addParam(d)}return u},_.prototype.clone=function(){var f=new _(this.maxLength,this.maxSubParamsLength);return f.params.set(this.params),f.length=this.length,f._subParams.set(this._subParams),f._subParamsLength=this._subParamsLength,f._subParamsIdx.set(this._subParamsIdx),f._rejectDigits=this._rejectDigits,f._rejectSubDigits=this._rejectSubDigits,f._digitIsSub=this._digitIsSub,f},_.prototype.toArray=function(){for(var f=[],u=0;u<this.length;++u){f.push(this.params[u]);var S=this._subParamsIdx[u]>>8,d=255&this._subParamsIdx[u];d-S>0&&f.push(Array.prototype.slice.call(this._subParams,S,d))}return f},_.prototype.reset=function(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1},_.prototype.addParam=function(f){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(f<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=f>v?v:f}},_.prototype.addSubParam=function(f){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(f<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=f>v?v:f,this._subParamsIdx[this.length-1]++}},_.prototype.hasSubParams=function(f){return(255&this._subParamsIdx[f])-(this._subParamsIdx[f]>>8)>0},_.prototype.getSubParams=function(f){var u=this._subParamsIdx[f]>>8,S=255&this._subParamsIdx[f];return S-u>0?this._subParams.subarray(u,S):null},_.prototype.getSubParamsAll=function(){for(var f={},u=0;u<this.length;++u){var S=this._subParamsIdx[u]>>8,d=255&this._subParamsIdx[u];d-S>0&&(f[u]=this._subParams.slice(S,d))}return f},_.prototype.addDigit=function(f){var u;if(!(this._rejectDigits||!(u=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)){var S=this._digitIsSub?this._subParams:this.params,d=S[u-1];S[u-1]=~d?Math.min(10*d+f,v):f}},_}();s.Params=l},5741:(P,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.AddonManager=void 0;var v=function(){function l(){this._addons=[]}return l.prototype.dispose=function(){for(var _=this._addons.length-1;_>=0;_--)this._addons[_].instance.dispose()},l.prototype.loadAddon=function(_,f){var u=this,S={instance:f,dispose:f.dispose,isDisposed:!1};this._addons.push(S),f.dispose=function(){return u._wrappedAddonDispose(S)},f.activate(_)},l.prototype._wrappedAddonDispose=function(_){if(!_.isDisposed){for(var f=-1,u=0;u<this._addons.length;u++)if(this._addons[u]===_){f=u;break}if(f===-1)throw new Error("Could not dispose an addon that has not been loaded");_.isDisposed=!0,_.dispose.apply(_.instance),this._addons.splice(f,1)}},l}();s.AddonManager=v},8771:(P,s,v)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferApiView=void 0;var l=v(3785),_=v(511),f=function(){function u(S,d){this._buffer=S,this.type=d}return u.prototype.init=function(S){return this._buffer=S,this},Object.defineProperty(u.prototype,"cursorY",{get:function(){return this._buffer.y},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"cursorX",{get:function(){return this._buffer.x},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"viewportY",{get:function(){return this._buffer.ydisp},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"baseY",{get:function(){return this._buffer.ybase},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"length",{get:function(){return this._buffer.lines.length},enumerable:!1,configurable:!0}),u.prototype.getLine=function(S){var d=this._buffer.lines.get(S);if(d)return new l.BufferLineApiView(d)},u.prototype.getNullCell=function(){return new _.CellData},u}();s.BufferApiView=f},3785:(P,s,v)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferLineApiView=void 0;var l=v(511),_=function(){function f(u){this._line=u}return Object.defineProperty(f.prototype,"isWrapped",{get:function(){return this._line.isWrapped},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"length",{get:function(){return this._line.length},enumerable:!1,configurable:!0}),f.prototype.getCell=function(u,S){if(!(u<0||u>=this._line.length))return S?(this._line.loadCell(u,S),S):this._line.loadCell(u,new l.CellData)},f.prototype.translateToString=function(u,S,d){return this._line.translateToString(u,S,d)},f}();s.BufferLineApiView=_},8285:(P,s,v)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferNamespaceApi=void 0;var l=v(8771),_=v(8460),f=function(){function u(S){var d=this;this._core=S,this._onBufferChange=new _.EventEmitter,this._normal=new l.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new l.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(function(){return d._onBufferChange.fire(d.active)})}return Object.defineProperty(u.prototype,"onBufferChange",{get:function(){return this._onBufferChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"active",{get:function(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"normal",{get:function(){return this._normal.init(this._core.buffers.normal)},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"alternate",{get:function(){return this._alternate.init(this._core.buffers.alt)},enumerable:!1,configurable:!0}),u}();s.BufferNamespaceApi=f},7975:(P,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ParserApi=void 0;var v=function(){function l(_){this._core=_}return l.prototype.registerCsiHandler=function(_,f){return this._core.registerCsiHandler(_,function(u){return f(u.toArray())})},l.prototype.addCsiHandler=function(_,f){return this.registerCsiHandler(_,f)},l.prototype.registerDcsHandler=function(_,f){return this._core.registerDcsHandler(_,function(u,S){return f(u,S.toArray())})},l.prototype.addDcsHandler=function(_,f){return this.registerDcsHandler(_,f)},l.prototype.registerEscHandler=function(_,f){return this._core.registerEscHandler(_,f)},l.prototype.addEscHandler=function(_,f){return this.registerEscHandler(_,f)},l.prototype.registerOscHandler=function(_,f){return this._core.registerOscHandler(_,f)},l.prototype.addOscHandler=function(_,f){return this.registerOscHandler(_,f)},l}();s.ParserApi=v},7090:(P,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeApi=void 0;var v=function(){function l(_){this._core=_}return l.prototype.register=function(_){this._core.unicodeService.register(_)},Object.defineProperty(l.prototype,"versions",{get:function(){return this._core.unicodeService.versions},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"activeVersion",{get:function(){return this._core.unicodeService.activeVersion},set:function(_){this._core.unicodeService.activeVersion=_},enumerable:!1,configurable:!0}),l}();s.UnicodeApi=v},744:function(P,s,v){var l,_=this&&this.__extends||(l=function(n,t){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},l(n,t)},function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}l(n,t),n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}),f=this&&this.__decorate||function(n,t,e,r){var o,c=arguments.length,p=c<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(n,t,e,r);else for(var g=n.length-1;g>=0;g--)(o=n[g])&&(p=(c<3?o(p):c>3?o(t,e,p):o(t,e))||p);return c>3&&p&&Object.defineProperty(t,e,p),p},u=this&&this.__param||function(n,t){return function(e,r){t(e,r,n)}};Object.defineProperty(s,"__esModule",{value:!0}),s.BufferService=s.MINIMUM_ROWS=s.MINIMUM_COLS=void 0;var S=v(2585),d=v(5295),i=v(8460),a=v(844);s.MINIMUM_COLS=2,s.MINIMUM_ROWS=1;var h=function(n){function t(e){var r=n.call(this)||this;return r._optionsService=e,r.isUserScrolling=!1,r._onResize=new i.EventEmitter,r._onScroll=new i.EventEmitter,r.cols=Math.max(e.options.cols||0,s.MINIMUM_COLS),r.rows=Math.max(e.options.rows||0,s.MINIMUM_ROWS),r.buffers=new d.BufferSet(e,r),r}return _(t,n),Object.defineProperty(t.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){n.prototype.dispose.call(this),this.buffers.dispose()},t.prototype.resize=function(e,r){this.cols=e,this.rows=r,this.buffers.resize(e,r),this.buffers.setupTabStops(this.cols),this._onResize.fire({cols:e,rows:r})},t.prototype.reset=function(){this.buffers.reset(),this.isUserScrolling=!1},t.prototype.scroll=function(e,r){r===void 0&&(r=!1);var o,c=this.buffer;(o=this._cachedBlankLine)&&o.length===this.cols&&o.getFg(0)===e.fg&&o.getBg(0)===e.bg||(o=c.getBlankLine(e,r),this._cachedBlankLine=o),o.isWrapped=r;var p=c.ybase+c.scrollTop,g=c.ybase+c.scrollBottom;if(c.scrollTop===0){var C=c.lines.isFull;g===c.lines.length-1?C?c.lines.recycle().copyFrom(o):c.lines.push(o.clone()):c.lines.splice(g+1,0,o.clone()),C?this.isUserScrolling&&(c.ydisp=Math.max(c.ydisp-1,0)):(c.ybase++,this.isUserScrolling||c.ydisp++)}else{var b=g-p+1;c.lines.shiftElements(p+1,b-1,-1),c.lines.set(g,o.clone())}this.isUserScrolling||(c.ydisp=c.ybase),this._onScroll.fire(c.ydisp)},t.prototype.scrollLines=function(e,r,o){var c=this.buffer;if(e<0){if(c.ydisp===0)return;this.isUserScrolling=!0}else e+c.ydisp>=c.ybase&&(this.isUserScrolling=!1);var p=c.ydisp;c.ydisp=Math.max(Math.min(c.ydisp+e,c.ybase),0),p!==c.ydisp&&(r||this._onScroll.fire(c.ydisp))},t.prototype.scrollPages=function(e){this.scrollLines(e*(this.rows-1))},t.prototype.scrollToTop=function(){this.scrollLines(-this.buffer.ydisp)},t.prototype.scrollToBottom=function(){this.scrollLines(this.buffer.ybase-this.buffer.ydisp)},t.prototype.scrollToLine=function(e){var r=e-this.buffer.ydisp;r!==0&&this.scrollLines(r)},f([u(0,S.IOptionsService)],t)}(a.Disposable);s.BufferService=h},7994:(P,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CharsetService=void 0;var v=function(){function l(){this.glevel=0,this._charsets=[]}return l.prototype.reset=function(){this.charset=void 0,this._charsets=[],this.glevel=0},l.prototype.setgLevel=function(_){this.glevel=_,this.charset=this._charsets[_]},l.prototype.setgCharset=function(_,f){this._charsets[_]=f,this.glevel===_&&(this.charset=f)},l}();s.CharsetService=v},1753:function(P,s,v){var l=this&&this.__decorate||function(n,t,e,r){var o,c=arguments.length,p=c<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(n,t,e,r);else for(var g=n.length-1;g>=0;g--)(o=n[g])&&(p=(c<3?o(p):c>3?o(t,e,p):o(t,e))||p);return c>3&&p&&Object.defineProperty(t,e,p),p},_=this&&this.__param||function(n,t){return function(e,r){t(e,r,n)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CoreMouseService=void 0;var f=v(2585),u=v(8460),S={NONE:{events:0,restrict:function(){return!1}},X10:{events:1,restrict:function(n){return n.button!==4&&n.action===1&&(n.ctrl=!1,n.alt=!1,n.shift=!1,!0)}},VT200:{events:19,restrict:function(n){return n.action!==32}},DRAG:{events:23,restrict:function(n){return n.action!==32||n.button!==3}},ANY:{events:31,restrict:function(n){return!0}}};function d(n,t){var e=(n.ctrl?16:0)|(n.shift?4:0)|(n.alt?8:0);return n.button===4?(e|=64,e|=n.action):(e|=3&n.button,4&n.button&&(e|=64),8&n.button&&(e|=128),n.action===32?e|=32:n.action!==0||t||(e|=3)),e}var i=String.fromCharCode,a={DEFAULT:function(n){var t=[d(n,!1)+32,n.col+32,n.row+32];return t[0]>255||t[1]>255||t[2]>255?"":"[M"+i(t[0])+i(t[1])+i(t[2])},SGR:function(n){var t=n.action===0&&n.button!==4?"m":"M";return"[<"+d(n,!0)+";"+n.col+";"+n.row+t}},h=function(){function n(t,e){this._bufferService=t,this._coreService=e,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._onProtocolChange=new u.EventEmitter,this._lastEvent=null;for(var r=0,o=Object.keys(S);r<o.length;r++){var c=o[r];this.addProtocol(c,S[c])}for(var p=0,g=Object.keys(a);p<g.length;p++){var C=g[p];this.addEncoding(C,a[C])}this.reset()}return n.prototype.addProtocol=function(t,e){this._protocols[t]=e},n.prototype.addEncoding=function(t,e){this._encodings[t]=e},Object.defineProperty(n.prototype,"activeProtocol",{get:function(){return this._activeProtocol},set:function(t){if(!this._protocols[t])throw new Error('unknown protocol "'+t+'"');this._activeProtocol=t,this._onProtocolChange.fire(this._protocols[t].events)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"areMouseEventsActive",{get:function(){return this._protocols[this._activeProtocol].events!==0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"activeEncoding",{get:function(){return this._activeEncoding},set:function(t){if(!this._encodings[t])throw new Error('unknown encoding "'+t+'"');this._activeEncoding=t},enumerable:!1,configurable:!0}),n.prototype.reset=function(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null},Object.defineProperty(n.prototype,"onProtocolChange",{get:function(){return this._onProtocolChange.event},enumerable:!1,configurable:!0}),n.prototype.triggerMouseEvent=function(t){if(t.col<0||t.col>=this._bufferService.cols||t.row<0||t.row>=this._bufferService.rows||t.button===4&&t.action===32||t.button===3&&t.action!==32||t.button!==4&&(t.action===2||t.action===3)||(t.col++,t.row++,t.action===32&&this._lastEvent&&this._compareEvents(this._lastEvent,t))||!this._protocols[this._activeProtocol].restrict(t))return!1;var e=this._encodings[this._activeEncoding](t);return e&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(e):this._coreService.triggerDataEvent(e,!0)),this._lastEvent=t,!0},n.prototype.explainEvents=function(t){return{down:!!(1&t),up:!!(2&t),drag:!!(4&t),move:!!(8&t),wheel:!!(16&t)}},n.prototype._compareEvents=function(t,e){return t.col===e.col&&t.row===e.row&&t.button===e.button&&t.action===e.action&&t.ctrl===e.ctrl&&t.alt===e.alt&&t.shift===e.shift},l([_(0,f.IBufferService),_(1,f.ICoreService)],n)}();s.CoreMouseService=h},6975:function(P,s,v){var l,_=this&&this.__extends||(l=function(e,r){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,c){o.__proto__=c}||function(o,c){for(var p in c)Object.prototype.hasOwnProperty.call(c,p)&&(o[p]=c[p])},l(e,r)},function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=e}l(e,r),e.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)}),f=this&&this.__decorate||function(e,r,o,c){var p,g=arguments.length,C=g<3?r:c===null?c=Object.getOwnPropertyDescriptor(r,o):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(e,r,o,c);else for(var b=e.length-1;b>=0;b--)(p=e[b])&&(C=(g<3?p(C):g>3?p(r,o,C):p(r,o))||C);return g>3&&C&&Object.defineProperty(r,o,C),C},u=this&&this.__param||function(e,r){return function(o,c){r(o,c,e)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CoreService=void 0;var S=v(2585),d=v(8460),i=v(1439),a=v(844),h=Object.freeze({insertMode:!1}),n=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),t=function(e){function r(o,c,p,g){var C=e.call(this)||this;return C._bufferService=c,C._logService=p,C._optionsService=g,C.isCursorInitialized=!1,C.isCursorHidden=!1,C._onData=C.register(new d.EventEmitter),C._onUserInput=C.register(new d.EventEmitter),C._onBinary=C.register(new d.EventEmitter),C._scrollToBottom=o,C.register({dispose:function(){return C._scrollToBottom=void 0}}),C.modes=(0,i.clone)(h),C.decPrivateModes=(0,i.clone)(n),C}return _(r,e),Object.defineProperty(r.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onUserInput",{get:function(){return this._onUserInput.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),r.prototype.reset=function(){this.modes=(0,i.clone)(h),this.decPrivateModes=(0,i.clone)(n)},r.prototype.triggerDataEvent=function(o,c){if(c===void 0&&(c=!1),!this._optionsService.options.disableStdin){var p=this._bufferService.buffer;p.ybase!==p.ydisp&&this._scrollToBottom(),c&&this._onUserInput.fire(),this._logService.debug('sending data "'+o+'"',function(){return o.split("").map(function(g){return g.charCodeAt(0)})}),this._onData.fire(o)}},r.prototype.triggerBinaryEvent=function(o){this._optionsService.options.disableStdin||(this._logService.debug('sending binary "'+o+'"',function(){return o.split("").map(function(c){return c.charCodeAt(0)})}),this._onBinary.fire(o))},f([u(1,S.IBufferService),u(2,S.ILogService),u(3,S.IOptionsService)],r)}(a.Disposable);s.CoreService=t},3730:function(P,s,v){var l=this&&this.__decorate||function(S,d,i,a){var h,n=arguments.length,t=n<3?d:a===null?a=Object.getOwnPropertyDescriptor(d,i):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(S,d,i,a);else for(var e=S.length-1;e>=0;e--)(h=S[e])&&(t=(n<3?h(t):n>3?h(d,i,t):h(d,i))||t);return n>3&&t&&Object.defineProperty(d,i,t),t},_=this&&this.__param||function(S,d){return function(i,a){d(i,a,S)}};Object.defineProperty(s,"__esModule",{value:!0}),s.DirtyRowService=void 0;var f=v(2585),u=function(){function S(d){this._bufferService=d,this.clearRange()}return Object.defineProperty(S.prototype,"start",{get:function(){return this._start},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"end",{get:function(){return this._end},enumerable:!1,configurable:!0}),S.prototype.clearRange=function(){this._start=this._bufferService.buffer.y,this._end=this._bufferService.buffer.y},S.prototype.markDirty=function(d){d<this._start?this._start=d:d>this._end&&(this._end=d)},S.prototype.markRangeDirty=function(d,i){if(d>i){var a=d;d=i,i=a}d<this._start&&(this._start=d),i>this._end&&(this._end=i)},S.prototype.markAllDirty=function(){this.markRangeDirty(0,this._bufferService.rows-1)},l([_(0,f.IBufferService)],S)}();s.DirtyRowService=u},4348:function(P,s,v){var l=this&&this.__spreadArray||function(d,i,a){if(a||arguments.length===2)for(var h,n=0,t=i.length;n<t;n++)!h&&n in i||(h||(h=Array.prototype.slice.call(i,0,n)),h[n]=i[n]);return d.concat(h||Array.prototype.slice.call(i))};Object.defineProperty(s,"__esModule",{value:!0}),s.InstantiationService=s.ServiceCollection=void 0;var _=v(2585),f=v(8343),u=function(){function d(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];this._entries=new Map;for(var h=0,n=i;h<n.length;h++){var t=n[h],e=t[0],r=t[1];this.set(e,r)}}return d.prototype.set=function(i,a){var h=this._entries.get(i);return this._entries.set(i,a),h},d.prototype.forEach=function(i){this._entries.forEach(function(a,h){return i(h,a)})},d.prototype.has=function(i){return this._entries.has(i)},d.prototype.get=function(i){return this._entries.get(i)},d}();s.ServiceCollection=u;var S=function(){function d(){this._services=new u,this._services.set(_.IInstantiationService,this)}return d.prototype.setService=function(i,a){this._services.set(i,a)},d.prototype.getService=function(i){return this._services.get(i)},d.prototype.createInstance=function(i){for(var a=[],h=1;h<arguments.length;h++)a[h-1]=arguments[h];for(var n=(0,f.getServiceDependencies)(i).sort(function(g,C){return g.index-C.index}),t=[],e=0,r=n;e<r.length;e++){var o=r[e],c=this._services.get(o.id);if(!c)throw new Error("[createInstance] "+i.name+" depends on UNKNOWN service "+o.id+".");t.push(c)}var p=n.length>0?n[0].index:a.length;if(a.length!==p)throw new Error("[createInstance] First service dependency of "+i.name+" at position "+(p+1)+" conflicts with "+a.length+" static arguments");return new(i.bind.apply(i,l([void 0],l(l([],a,!0),t,!0),!1)))},d}();s.InstantiationService=S},7866:function(P,s,v){var l=this&&this.__decorate||function(i,a,h,n){var t,e=arguments.length,r=e<3?a:n===null?n=Object.getOwnPropertyDescriptor(a,h):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,a,h,n);else for(var o=i.length-1;o>=0;o--)(t=i[o])&&(r=(e<3?t(r):e>3?t(a,h,r):t(a,h))||r);return e>3&&r&&Object.defineProperty(a,h,r),r},_=this&&this.__param||function(i,a){return function(h,n){a(h,n,i)}},f=this&&this.__spreadArray||function(i,a,h){if(h||arguments.length===2)for(var n,t=0,e=a.length;t<e;t++)!n&&t in a||(n||(n=Array.prototype.slice.call(a,0,t)),n[t]=a[t]);return i.concat(n||Array.prototype.slice.call(a))};Object.defineProperty(s,"__esModule",{value:!0}),s.LogService=void 0;var u=v(2585),S={debug:u.LogLevelEnum.DEBUG,info:u.LogLevelEnum.INFO,warn:u.LogLevelEnum.WARN,error:u.LogLevelEnum.ERROR,off:u.LogLevelEnum.OFF},d=function(){function i(a){var h=this;this._optionsService=a,this.logLevel=u.LogLevelEnum.OFF,this._updateLogLevel(),this._optionsService.onOptionChange(function(n){n==="logLevel"&&h._updateLogLevel()})}return i.prototype._updateLogLevel=function(){this.logLevel=S[this._optionsService.options.logLevel]},i.prototype._evalLazyOptionalParams=function(a){for(var h=0;h<a.length;h++)typeof a[h]=="function"&&(a[h]=a[h]())},i.prototype._log=function(a,h,n){this._evalLazyOptionalParams(n),a.call.apply(a,f([console,"xterm.js: "+h],n,!1))},i.prototype.debug=function(a){for(var h=[],n=1;n<arguments.length;n++)h[n-1]=arguments[n];this.logLevel<=u.LogLevelEnum.DEBUG&&this._log(console.log,a,h)},i.prototype.info=function(a){for(var h=[],n=1;n<arguments.length;n++)h[n-1]=arguments[n];this.logLevel<=u.LogLevelEnum.INFO&&this._log(console.info,a,h)},i.prototype.warn=function(a){for(var h=[],n=1;n<arguments.length;n++)h[n-1]=arguments[n];this.logLevel<=u.LogLevelEnum.WARN&&this._log(console.warn,a,h)},i.prototype.error=function(a){for(var h=[],n=1;n<arguments.length;n++)h[n-1]=arguments[n];this.logLevel<=u.LogLevelEnum.ERROR&&this._log(console.error,a,h)},l([_(0,u.IOptionsService)],i)}();s.LogService=d},7302:function(P,s,v){var l=this&&this.__assign||function(){return l=Object.assign||function(i){for(var a,h=1,n=arguments.length;h<n;h++)for(var t in a=arguments[h])Object.prototype.hasOwnProperty.call(a,t)&&(i[t]=a[t]);return i},l.apply(this,arguments)};Object.defineProperty(s,"__esModule",{value:!0}),s.OptionsService=s.DEFAULT_OPTIONS=s.DEFAULT_BELL_SOUND=void 0;var _=v(8460),f=v(6114);s.DEFAULT_BELL_SOUND="data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",s.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,customGlyphs:!0,bellSound:s.DEFAULT_BELL_SOUND,bellStyle:"none",drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",lineHeight:1,linkTooltipHoverDuration:500,letterSpacing:0,logLevel:"info",scrollback:1e3,scrollSensitivity:1,screenReaderMode:!1,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!0,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:f.isMac,rendererType:"canvas",windowOptions:{},windowsMode:!1,wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1};var u=["normal","bold","100","200","300","400","500","600","700","800","900"],S=["cols","rows"],d=function(){function i(a){for(var h in this._onOptionChange=new _.EventEmitter,this._options=l({},s.DEFAULT_OPTIONS),a)if(h in this._options)try{var n=a[h];this._options[h]=this._sanitizeAndValidateOption(h,n)}catch(t){console.error(t)}this.options=this._setupOptions(this._options,!1),this.publicOptions=this._setupOptions(this._options,!0)}return Object.defineProperty(i.prototype,"onOptionChange",{get:function(){return this._onOptionChange.event},enumerable:!1,configurable:!0}),i.prototype._setupOptions=function(a,h){var n=this,t=l({},a),e=function(o){Object.defineProperty(t,o,{get:function(){if(!(o in s.DEFAULT_OPTIONS))throw new Error('No option with key "'+o+'"');return n._options[o]},set:function(c){if(!(o in s.DEFAULT_OPTIONS))throw new Error('No option with key "'+o+'"');if(h&&S.includes(o))throw new Error('Option "'+o+'" can only be set in the constructor');c=n._sanitizeAndValidateOption(o,c),n._options[o]!==c&&(n._options[o]=c,n._onOptionChange.fire(o))}})};for(var r in t)e(r);return t},i.prototype.setOption=function(a,h){this.publicOptions[a]=h},i.prototype._sanitizeAndValidateOption=function(a,h){switch(a){case"bellStyle":case"cursorStyle":case"rendererType":case"wordSeparator":h||(h=s.DEFAULT_OPTIONS[a]);break;case"fontWeight":case"fontWeightBold":if(typeof h=="number"&&1<=h&&h<=1e3)break;h=u.includes(h)?h:s.DEFAULT_OPTIONS[a];break;case"cursorWidth":h=Math.floor(h);case"lineHeight":case"tabStopWidth":if(h<1)throw new Error(a+" cannot be less than 1, value: "+h);break;case"minimumContrastRatio":h=Math.max(1,Math.min(21,Math.round(10*h)/10));break;case"scrollback":if((h=Math.min(h,4294967295))<0)throw new Error(a+" cannot be less than 0, value: "+h);break;case"fastScrollSensitivity":case"scrollSensitivity":if(h<=0)throw new Error(a+" cannot be less than or equal to 0, value: "+h);case"rows":case"cols":if(!h&&h!==0)throw new Error(a+" must be numeric, value: "+h)}return h},i.prototype.getOption=function(a){return this.publicOptions[a]},i}();s.OptionsService=d},8343:(P,s)=>{function v(l,_,f){_.di$target===_?_.di$dependencies.push({id:l,index:f}):(_.di$dependencies=[{id:l,index:f}],_.di$target=_)}Object.defineProperty(s,"__esModule",{value:!0}),s.createDecorator=s.getServiceDependencies=s.serviceRegistry=void 0,s.serviceRegistry=new Map,s.getServiceDependencies=function(l){return l.di$dependencies||[]},s.createDecorator=function(l){if(s.serviceRegistry.has(l))return s.serviceRegistry.get(l);var _=function(f,u,S){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");v(_,f,S)};return _.toString=function(){return l},s.serviceRegistry.set(l,_),_}},2585:(P,s,v)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.IUnicodeService=s.LogLevelEnum=s.IOptionsService=s.ILogService=s.IInstantiationService=s.IDirtyRowService=s.ICharsetService=s.ICoreService=s.ICoreMouseService=s.IBufferService=void 0;var l,_=v(8343);s.IBufferService=(0,_.createDecorator)("BufferService"),s.ICoreMouseService=(0,_.createDecorator)("CoreMouseService"),s.ICoreService=(0,_.createDecorator)("CoreService"),s.ICharsetService=(0,_.createDecorator)("CharsetService"),s.IDirtyRowService=(0,_.createDecorator)("DirtyRowService"),s.IInstantiationService=(0,_.createDecorator)("InstantiationService"),s.ILogService=(0,_.createDecorator)("LogService"),s.IOptionsService=(0,_.createDecorator)("OptionsService"),(l=s.LogLevelEnum||(s.LogLevelEnum={}))[l.DEBUG=0]="DEBUG",l[l.INFO=1]="INFO",l[l.WARN=2]="WARN",l[l.ERROR=3]="ERROR",l[l.OFF=4]="OFF",s.IUnicodeService=(0,_.createDecorator)("UnicodeService")},1480:(P,s,v)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeService=void 0;var l=v(8460),_=v(225),f=function(){function u(){this._providers=Object.create(null),this._active="",this._onChange=new l.EventEmitter;var S=new _.UnicodeV6;this.register(S),this._active=S.version,this._activeProvider=S}return Object.defineProperty(u.prototype,"onChange",{get:function(){return this._onChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"versions",{get:function(){return Object.keys(this._providers)},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"activeVersion",{get:function(){return this._active},set:function(S){if(!this._providers[S])throw new Error('unknown Unicode version "'+S+'"');this._active=S,this._activeProvider=this._providers[S],this._onChange.fire(S)},enumerable:!1,configurable:!0}),u.prototype.register=function(S){this._providers[S.version]=S},u.prototype.wcwidth=function(S){return this._activeProvider.wcwidth(S)},u.prototype.getStringCellWidth=function(S){for(var d=0,i=S.length,a=0;a<i;++a){var h=S.charCodeAt(a);if(55296<=h&&h<=56319){if(++a>=i)return d+this.wcwidth(h);var n=S.charCodeAt(a);56320<=n&&n<=57343?h=1024*(h-55296)+n-56320+65536:d+=this.wcwidth(n)}d+=this.wcwidth(h)}return d},u}();s.UnicodeService=f}},Y={};function V(P){var s=Y[P];if(s!==void 0)return s.exports;var v=Y[P]={exports:{}};return J[P].call(v.exports,v,v.exports,V),v.exports}var K={};return(()=>{var P=K;Object.defineProperty(P,"__esModule",{value:!0}),P.Terminal=void 0;var s=V(3236),v=V(9042),l=V(7975),_=V(7090),f=V(5741),u=V(8285),S=function(){function d(i){this._core=new s.Terminal(i),this._addonManager=new f.AddonManager}return d.prototype._checkProposedApi=function(){if(!this._core.optionsService.options.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")},Object.defineProperty(d.prototype,"onBell",{get:function(){return this._core.onBell},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onBinary",{get:function(){return this._core.onBinary},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onCursorMove",{get:function(){return this._core.onCursorMove},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onData",{get:function(){return this._core.onData},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onKey",{get:function(){return this._core.onKey},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onLineFeed",{get:function(){return this._core.onLineFeed},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onRender",{get:function(){return this._core.onRender},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onResize",{get:function(){return this._core.onResize},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onScroll",{get:function(){return this._core.onScroll},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onSelectionChange",{get:function(){return this._core.onSelectionChange},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onTitleChange",{get:function(){return this._core.onTitleChange},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"element",{get:function(){return this._core.element},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"parser",{get:function(){return this._checkProposedApi(),this._parser||(this._parser=new l.ParserApi(this._core)),this._parser},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"unicode",{get:function(){return this._checkProposedApi(),new _.UnicodeApi(this._core)},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"textarea",{get:function(){return this._core.textarea},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"rows",{get:function(){return this._core.rows},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"cols",{get:function(){return this._core.cols},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"buffer",{get:function(){return this._checkProposedApi(),this._buffer||(this._buffer=new u.BufferNamespaceApi(this._core)),this._buffer},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"markers",{get:function(){return this._checkProposedApi(),this._core.markers},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"modes",{get:function(){var i=this._core.coreService.decPrivateModes,a="none";switch(this._core.coreMouseService.activeProtocol){case"X10":a="x10";break;case"VT200":a="vt200";break;case"DRAG":a="drag";break;case"ANY":a="any"}return{applicationCursorKeysMode:i.applicationCursorKeys,applicationKeypadMode:i.applicationKeypad,bracketedPasteMode:i.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:a,originMode:i.origin,reverseWraparoundMode:i.reverseWraparound,sendFocusMode:i.sendFocus,wraparoundMode:i.wraparound}},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"options",{get:function(){return this._core.options},enumerable:!1,configurable:!0}),d.prototype.blur=function(){this._core.blur()},d.prototype.focus=function(){this._core.focus()},d.prototype.resize=function(i,a){this._verifyIntegers(i,a),this._core.resize(i,a)},d.prototype.open=function(i){this._core.open(i)},d.prototype.attachCustomKeyEventHandler=function(i){this._core.attachCustomKeyEventHandler(i)},d.prototype.registerLinkMatcher=function(i,a,h){return this._checkProposedApi(),this._core.registerLinkMatcher(i,a,h)},d.prototype.deregisterLinkMatcher=function(i){this._checkProposedApi(),this._core.deregisterLinkMatcher(i)},d.prototype.registerLinkProvider=function(i){return this._checkProposedApi(),this._core.registerLinkProvider(i)},d.prototype.registerCharacterJoiner=function(i){return this._checkProposedApi(),this._core.registerCharacterJoiner(i)},d.prototype.deregisterCharacterJoiner=function(i){this._checkProposedApi(),this._core.deregisterCharacterJoiner(i)},d.prototype.registerMarker=function(i){return this._checkProposedApi(),this._verifyIntegers(i),this._core.addMarker(i)},d.prototype.addMarker=function(i){return this.registerMarker(i)},d.prototype.hasSelection=function(){return this._core.hasSelection()},d.prototype.select=function(i,a,h){this._verifyIntegers(i,a,h),this._core.select(i,a,h)},d.prototype.getSelection=function(){return this._core.getSelection()},d.prototype.getSelectionPosition=function(){return this._core.getSelectionPosition()},d.prototype.clearSelection=function(){this._core.clearSelection()},d.prototype.selectAll=function(){this._core.selectAll()},d.prototype.selectLines=function(i,a){this._verifyIntegers(i,a),this._core.selectLines(i,a)},d.prototype.dispose=function(){this._addonManager.dispose(),this._core.dispose()},d.prototype.scrollLines=function(i){this._verifyIntegers(i),this._core.scrollLines(i)},d.prototype.scrollPages=function(i){this._verifyIntegers(i),this._core.scrollPages(i)},d.prototype.scrollToTop=function(){this._core.scrollToTop()},d.prototype.scrollToBottom=function(){this._core.scrollToBottom()},d.prototype.scrollToLine=function(i){this._verifyIntegers(i),this._core.scrollToLine(i)},d.prototype.clear=function(){this._core.clear()},d.prototype.write=function(i,a){this._core.write(i,a)},d.prototype.writeUtf8=function(i,a){this._core.write(i,a)},d.prototype.writeln=function(i,a){this._core.write(i),this._core.write(`\r
`,a)},d.prototype.paste=function(i){this._core.paste(i)},d.prototype.getOption=function(i){return this._core.optionsService.getOption(i)},d.prototype.setOption=function(i,a){this._core.optionsService.setOption(i,a)},d.prototype.refresh=function(i,a){this._verifyIntegers(i,a),this._core.refresh(i,a)},d.prototype.reset=function(){this._core.reset()},d.prototype.clearTextureAtlas=function(){this._core.clearTextureAtlas()},d.prototype.loadAddon=function(i){return this._addonManager.loadAddon(this,i)},Object.defineProperty(d,"strings",{get:function(){return v},enumerable:!1,configurable:!0}),d.prototype._verifyIntegers=function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];for(var h=0,n=i;h<n.length;h++){var t=n[h];if(t===1/0||isNaN(t)||t%1!=0)throw new Error("This API only accepts integers")}},d}();P.Terminal=S})(),K})()})})(Sr);var br={exports:{}};(function(X,Z){(function(J,Y){X.exports=Y()})(window,function(){return function(J){var Y={};function V(K){if(Y[K])return Y[K].exports;var P=Y[K]={i:K,l:!1,exports:{}};return J[K].call(P.exports,P,P.exports,V),P.l=!0,P.exports}return V.m=J,V.c=Y,V.d=function(K,P,s){V.o(K,P)||Object.defineProperty(K,P,{enumerable:!0,get:s})},V.r=function(K){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(K,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(K,"__esModule",{value:!0})},V.t=function(K,P){if(1&P&&(K=V(K)),8&P||4&P&&typeof K=="object"&&K&&K.__esModule)return K;var s=Object.create(null);if(V.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:K}),2&P&&typeof K!="string")for(var v in K)V.d(s,v,function(l){return K[l]}.bind(null,v));return s},V.n=function(K){var P=K&&K.__esModule?function(){return K.default}:function(){return K};return V.d(P,"a",P),P},V.o=function(K,P){return Object.prototype.hasOwnProperty.call(K,P)},V.p="",V(V.s=0)}([function(J,Y,V){Object.defineProperty(Y,"__esModule",{value:!0}),Y.AttachAddon=void 0;var K=function(){function s(v,l){this._disposables=[],this._socket=v,this._socket.binaryType="arraybuffer",this._bidirectional=!l||l.bidirectional!==!1}return s.prototype.activate=function(v){var l=this;this._disposables.push(P(this._socket,"message",function(_){var f=_.data;v.write(typeof f=="string"?f:new Uint8Array(f))})),this._bidirectional&&(this._disposables.push(v.onData(function(_){return l._sendData(_)})),this._disposables.push(v.onBinary(function(_){return l._sendBinary(_)}))),this._disposables.push(P(this._socket,"close",function(){return l.dispose()})),this._disposables.push(P(this._socket,"error",function(){return l.dispose()}))},s.prototype.dispose=function(){this._disposables.forEach(function(v){return v.dispose()})},s.prototype._sendData=function(v){this._socket.readyState===1&&this._socket.send(v)},s.prototype._sendBinary=function(v){if(this._socket.readyState===1){for(var l=new Uint8Array(v.length),_=0;_<v.length;++_)l[_]=255&v.charCodeAt(_);this._socket.send(l)}},s}();function P(s,v,l){return s.addEventListener(v,l),{dispose:function(){l&&s.removeEventListener(v,l)}}}Y.AttachAddon=K}])})})(br);var Cr={exports:{}};(function(X,Z){(function(J,Y){X.exports=Y()})(self,function(){return(()=>{var J={775:(V,K)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.FitAddon=void 0;var P=function(){function s(){}return s.prototype.activate=function(v){this._terminal=v},s.prototype.dispose=function(){},s.prototype.fit=function(){var v=this.proposeDimensions();if(v&&this._terminal){var l=this._terminal._core;this._terminal.rows===v.rows&&this._terminal.cols===v.cols||(l._renderService.clear(),this._terminal.resize(v.cols,v.rows))}},s.prototype.proposeDimensions=function(){if(this._terminal&&this._terminal.element&&this._terminal.element.parentElement){var v=this._terminal._core;if(v._renderService.dimensions.actualCellWidth!==0&&v._renderService.dimensions.actualCellHeight!==0){var l=window.getComputedStyle(this._terminal.element.parentElement),_=parseInt(l.getPropertyValue("height")),f=Math.max(0,parseInt(l.getPropertyValue("width"))),u=window.getComputedStyle(this._terminal.element),S=_-(parseInt(u.getPropertyValue("padding-top"))+parseInt(u.getPropertyValue("padding-bottom"))),d=f-(parseInt(u.getPropertyValue("padding-right"))+parseInt(u.getPropertyValue("padding-left")))-v.viewport.scrollBarWidth;return{cols:Math.max(2,Math.floor(d/v._renderService.dimensions.actualCellWidth)),rows:Math.max(1,Math.floor(S/v._renderService.dimensions.actualCellHeight))}}}},s}();K.FitAddon=P}},Y={};return function V(K){if(Y[K])return Y[K].exports;var P=Y[K]={exports:{}};return J[K](P,P.exports,V),P.exports}(775)})()})})(Cr);let xe=null;const Jr=({id:X,ws:Z,onCloseTodo:J})=>{const{enqueueSnackbar:Y}=gr();return Be.exports.useEffect(()=>{const V=new Sr.exports.Terminal({rows:40,cols:150,convertEol:!0,cursorStyle:"underline",cursorBlink:!0,fontSize:14,tabStopWidth:4}),K=new br.exports.AttachAddon(Z),P=new Cr.exports.FitAddon;switch(V.loadAddon(K),V.loadAddon(P),V.open(document.getElementById(X)),V.focus(),P.fit(),Z.readyState){case WebSocket.CONNECTING:V.writeln("\u6B63\u5728\u8FDE\u63A5\u670D\u52A1\u5668...");break;case WebSocket.OPEN:V.writeln("\u670D\u52A1\u5668\u8FDE\u63A5\u6210\u529F...");break}V.onResize(v=>{xe&&(clearTimeout(xe),xe=null),xe||(xe=setTimeout(function(){Z.send(JSON.stringify({cols:v.cols,rows:v.rows})),xe=null},500))}),Z.onopen=v=>{V.writeln("WebSocket\u670D\u52A1\u5668\u8FDE\u63A5\u6210\u529F..."),Y(` WebSocket\u670D\u52A1\u5668\u8FDE\u63A5\u6210\u529F: ${v.type}`,{autoHideDuration:3e3,variant:"success"})},Z.onerror=v=>{console.log(v),Y(` WebSocket\u670D\u52A1\u5668\u8FDE\u63A5\u5931\u8D25: ${v.type}`,{autoHideDuration:3e3,variant:"error"})},Z.onclose=function(v){console.log("Connection closed.",v),Y(` WebSocket\u8FDE\u63A5\u5DF2\u5173\u95ED: ${v.type}`,{autoHideDuration:5e3,variant:"error"}),V.dispose(),J&&J()};const s=()=>{P.fit()};return window.addEventListener("resize",s),()=>{Z.close(),V.dispose(),window.removeEventListener("resize",s)}},[]),le("div",{id:X})},$r=(X,Z)=>vr(pr({},Z),{hostList:X.hostList,groupList:X.groupList,tagList:X.tagList}),Qr={},ei=Ir(X=>Hr({root:{width:"98%",height:"100%"},ControlBox:{marginBottom:"20px",width:"100%",display:"flex",alignContent:"space-evenly",alignItems:"center",justifyContent:"flex-start"},Control:{width:"25%"},LinkButton:{marginTop:"12px",marginLeft:"40px",height:"45px",width:"90px",backgroundColor:X.palette.info[X.palette.type],"&:hover":{backgroundColor:X.palette.info.main}},LinkOffButton:{marginTop:"12px",marginLeft:"40px",height:"45px",width:"90px",backgroundColor:X.palette.error[X.palette.type],"&:hover":{backgroundColor:X.palette.error.main}},shellBox:{marginTop:"20px",width:"100%",height:"70%"}})),ti=({hostList:X,groupList:Z,tagList:J})=>{const{enqueueSnackbar:Y}=gr(),V=ei(),[K,P]=Be.exports.useState(0),[s,v]=Be.exports.useState(""),l=Fr().pathname;Be.exports.useEffect(()=>{const S=Number(l.replace(/\/mode\/web_ssh\//g,""));S!==0&&(_(S),P(S))},[]);const _=S=>{!S||s||v(new WebSocket(`${zr}ssh/${S}?cols=150&rows=40`))},f=()=>{!s||(Y("\u6B63\u5728\u5173\u95EDWebSocket\u8FDE\u63A5...",{autoHideDuration:3e3,variant:"info"}),s.close(),v(""))},u=S=>{P(S.target.value)};return cr("div",{className:V.root,children:[cr("div",{className:V.ControlBox,children:[cr(Kr,{className:V.Control,children:[le(Wr,{children:"\u8BF7\u9009\u62E9\u4E3B\u673A"}),le(Ur,{labelId:"typeItem-select-label",id:"typeItem-select-label",value:K||"",onChange:u,children:X.map(S=>le(qr,{value:S.id,children:S.name},S.name))})]}),le(yr,{disabled:!K||!!s,className:V.LinkButton,startIcon:le(jr,{}),onClick:()=>_(K),children:"\u8FDE\u63A5"}),le(yr,{disabled:!s,className:V.LinkOffButton,startIcon:le(mr,{}),onClick:f,children:"\u65AD\u5F00"})]}),le("div",{className:V.shellBox,children:s?le(Jr,{id:"terminal",ws:s,onCloseTodo:()=>v("")}):le(Nr,{errInfo:"\u8BF7\u9009\u62E9\u4E00\u4E2A\u4E3B\u673A\u8FDB\u884C\u8FDE\u63A5",errType:"network",imgStyle:{width:"400px",height:"400px"},variant:"h4"})})]})};var hi=Pr($r,Qr)(ti);export{hi as default};
