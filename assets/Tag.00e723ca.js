var K=Object.defineProperty,L=Object.defineProperties;var M=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable;var v=(t,e,n)=>e in t?K(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,g=(t,e)=>{for(var n in e||(e={}))G.call(e,n)&&v(t,n,e[n]);if(C)for(var n of C(e))J.call(e,n)&&v(t,n,e[n]);return t},T=(t,e)=>L(t,M(e));import{j as u,F as Q,m as P,a5 as x,e as r,d,k as b,a4 as U}from"./vendor.3adfed64.js";import{T as V,F as X}from"./IconButton.cc13632c.js";import{s as j}from"./style.97b72400.js";import{l as Y,m as Z,n as _}from"./httpRequestApi.785f0199.js";import{T as A}from"./TextField.84619a02.js";import{P as ee,b as ae}from"./MenuItem.fff0d7f8.js";import{T as te,a as ne,b as ue,c as k,d as f,e as se,f as oe}from"./TableRow.db7565dc.js";import{a as p}from"./action.c965c132.js";import"./DialogActions.9747b884.js";import"./Typography.3f3c5a2b.js";import"./KeyboardArrowRight.75cb1df8.js";import"./index.374d7e98.js";const ie=({Info:t,setInfo:e})=>u(Q,{children:u(A,{autoFocus:!0,margin:"dense",id:"tag-name",label:"\u6807\u7B7E\u540D\u79F0",fullWidth:!0,value:t.name,onChange:n=>e(T(g({},t),{name:n.target.value}))})}),re=[{id:"name",label:"\u6807\u7B7E\u540D\u79F0",minWidth:170},{id:"operation",label:"\u64CD\u4F5C",minWidth:170}];function le({deleteTag:t,tagList:e,editTag:n}){const o=P(j)(),{enqueueSnackbar:l}=x(),[m,i]=r.exports.useState(0),[c,y]=r.exports.useState(10),[$,B]=r.exports.useState(!1),[w,D]=r.exports.useState(!1),[s,F]=r.exports.useState({id:0,name:""}),S=ie({Info:s,setInfo:F}),H="\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u4E2A\u6807\u7B7E\u5417\uFF1F",N="\u5982\u679C\u4E0D\u60F3\u5220\u9664\u53EF\u4EE5\u70B9\u51FB\u53D6\u6D88",R=a=>{F(a),B(!0)},I=()=>{B(!1)},W=r.exports.useCallback(async()=>{const a=await Y(s);if(a.code!=="200"){l(`\u6807\u7B7E: ${s.name}\u4FEE\u6539\u5931\u8D25${a.msg}`,{autoHideDuration:3e3,variant:"error"});return}n(a.data),l(`\u6807\u7B7E: ${s.name} \u4FEE\u6539\u6210\u529F${a.msg}`,{autoHideDuration:3e3,variant:"success"})},[s]),q=r.exports.useCallback(async()=>{const a=await Z(s.id);if(a.code!=="200"){l(`\u6807\u7B7E: ${s.name}\u5220\u9664\u5931\u8D25${a.msg}`,{autoHideDuration:3e3,variant:"error"});return}t(s.id),l(`\u6807\u7B7E: ${s.name} \u5DF2\u88AB\u5220\u9664`,{autoHideDuration:3e3,variant:"success"})},[s]),O=(a,h)=>{i(h)},z=a=>{y(+a.target.value),i(0)};return d(ee,{className:o.rootTable,children:[u(te,{className:o.container,children:d(ne,{stickyHeader:!0,"aria-label":"sticky table",children:[u(ue,{children:u(k,{children:re.map(a=>u(f,{align:"center",style:{minWidth:a.minWidth},children:a.label},a.id))})}),u(se,{children:e&&e.slice(m*c,m*c+c).map(a=>d(k,{hover:!0,role:"checkbox",tabIndex:-1,children:[u(f,{align:"center",children:a.name},a.name),d(f,{align:"center",children:[u(b,{className:o.editBtn,onClick:()=>{F(a),D(!0)},children:"\u7F16\u8F91"}),u(b,{className:o.deleteButton,onClick:()=>R(a),children:"\u5220\u9664"})]})]},a.name))})]})}),u(oe,{rowsPerPageOptions:[10,25,100],component:"div",labelRowsPerPage:u("div",{children:"\u6BCF\u9875\u884C\u6570:"}),labelDisplayedRows:({from:a,to:h,count:E})=>`${a}-${h} \u603B\u6570 ${E!==-1?E:0}`,count:e.length,rowsPerPage:c,page:m,onPageChange:O,onRowsPerPageChange:z}),u(V,{open:$,title:H,text:N,toClose:I,todo:q}),u(X,{open:w,content:S,toClose:()=>D(!1),title:"\u7F16\u8F91\u6807\u7B7E\u4FE1\u606F",todo:W})]})}const ce=(t,e)=>T(g({},e),{tagList:t.tagList}),de={initTag:p.initTagInfo,deleteTag:p.deleteTagInfo,addTag:p.addTagInfo,editTag:p.editTagInfo},me=t=>{const e=P(j)(),{enqueueSnackbar:n}=x(),[o,l]=r.exports.useState(""),m=async()=>{if(!o){n("\u6807\u7B7E\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",{autoHideDuration:3e3,variant:"warning"});return}if(t.tagList.some(c=>c.name===o)){n("\u8BE5\u6807\u7B7E\u5DF2\u5B58\u5728\uFF01",{autoHideDuration:3e3,variant:"warning"});return}const i=await _(o);if(i.code!=="200"){n(`\u6807\u7B7E\u6DFB\u52A0\u5931\u8D25${i.msg}`,{autoHideDuration:3e3,variant:"error"});return}t.addTag(i.data),n(`\u6807\u7B7E: ${i.data.name}\u6DFB\u52A0\u6210\u529F\uFF01`,{autoHideDuration:3e3,variant:"success"})};return d("div",{className:e.itemPage,children:[d("div",{className:e.ControlBox,children:[u(ae,{className:e.Control,children:u(A,{size:"small",id:"tag-name",label:"\u6807\u7B7E\u540D\u79F0",variant:"outlined",value:o,onChange:i=>l(i.target.value)})}),u(b,{className:e.addButton,onClick:m,children:"\u6DFB\u52A0\u6807\u7B7E"})]}),u("div",{className:e.shellBox,children:u(le,g({},t))})]})};var xe=U(ce,de)(me);export{xe as default};
