var J=Object.defineProperty,Q=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var G=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable;var y=(t,a,n)=>a in t?J(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,p=(t,a)=>{for(var n in a||(a={}))V.call(a,n)&&y(t,n,a[n]);if(G)for(var n of G(a))X.call(a,n)&&y(t,n,a[n]);return t},F=(t,a)=>Q(t,U(a));import{d as s,F as Y,j as e,m as k,a5 as S,e as i,k as j,a4 as Z}from"./vendor.3adfed64.js";import{s as N}from"./style.97b72400.js";import{T as _,F as ee}from"./IconButton.cc13632c.js";import{b as E,I as $,S as H,M as D,P as ae}from"./MenuItem.fff0d7f8.js";import{T as v}from"./TextField.84619a02.js";import{i as ue,j as te,k as ne}from"./httpRequestApi.785f0199.js";import{T as re,a as se,b as oe,c as w,d as h,e as ie,f as le}from"./TableRow.db7565dc.js";import{a as A}from"./action.c965c132.js";import"./DialogActions.9747b884.js";import"./Typography.3f3c5a2b.js";import"./KeyboardArrowRight.75cb1df8.js";import"./index.374d7e98.js";const de=({Info:t,setInfo:a})=>s(Y,{children:[s(E,{style:{width:"100%"},children:[e($,{id:"job-select-label",children:"\u9009\u62E9\u6A21\u5F0F"}),s(H,{labelId:"job-select-label",id:"group-select",value:t.mode,onChange:n=>a(F(p({},t),{mode:Number(n.target.value)})),children:[e(D,{value:0,children:"\u4E3B\u673A\u6A21\u5F0F"}),e(D,{value:1,children:"\u89C4\u5219\u6A21\u5F0F"})]})]}),e(v,{autoFocus:!0,margin:"dense",id:"group-name",label:"\u5206\u7EC4\u540D\u79F0",fullWidth:!0,value:t.name,onChange:n=>a(F(p({},t),{name:n.target.value}))}),e(v,{autoFocus:!0,margin:"dense",id:"params",label:"\u5339\u914D\u89C4\u5219",fullWidth:!0,value:t.params,onChange:n=>a(F(p({},t),{params:n.target.value}))})]}),ce=[{id:"name",label:"\u5206\u7EC4\u540D\u79F0",minWidth:170},{id:"mode",label:"\u6A21\u5F0F",minWidth:170},{id:"params",label:"\u89C4\u5219",minWidth:170},{id:"density",label:"\u64CD\u4F5C",minWidth:170}];function me({groupList:t,deleteGroup:a,editGroup:n}){const l=k(N)(),{enqueueSnackbar:m}=S(),[c,g]=i.exports.useState(0),[d,f]=i.exports.useState(10),[B,C]=i.exports.useState(!1),[r,b]=i.exports.useState(!1),[o,P]=i.exports.useState({id:0,name:"",mode:0,params:""}),R=de({Info:o,setInfo:P}),W=i.exports.useCallback(async()=>{const u=await ue(o);if(u.code!=="200"){m(`\u5206\u7EC4: ${o.name}\u4FEE\u6539\u5931\u8D25${u.msg}`,{autoHideDuration:3e3,variant:"error"});return}n(u.data),m(`\u5206\u7EC4: ${o.name} \u4FEE\u6539\u6210\u529F${u.msg}`,{autoHideDuration:3e3,variant:"success"})},[o]),I="\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u4E2A\u5206\u7EC4\u5417\uFF1F",M="\u5982\u679C\u4E0D\u60F3\u5220\u9664\u53EF\u4EE5\u70B9\u51FB\u53D6\u6D88",q=u=>{P(u),C(!0)},O=()=>{C(!1)},z=i.exports.useCallback(async()=>{const u=await te(o.id);if(u.code!=="200"){m(`\u5206\u7EC4: ${o.name}\u5220\u9664\u5931\u8D25${u.msg}`,{autoHideDuration:3e3,variant:"error"});return}a(o.id),m(`\u5206\u7EC4: ${o.name} \u5DF2\u88AB\u5220\u9664`,{autoHideDuration:3e3,variant:"success"})},[o]),L=(u,x)=>{g(x)},K=u=>{f(+u.target.value),g(0)};return s(ae,{className:l.rootTable,children:[e(re,{className:l.container,children:s(se,{stickyHeader:!0,"aria-label":"sticky table",children:[e(oe,{children:e(w,{children:ce.map(u=>e(h,{align:"center",style:{minWidth:u.minWidth},children:u.label},u.id))})}),e(ie,{children:t&&t.slice(c*d,c*d+d).map(u=>s(w,{hover:!0,role:"checkbox",tabIndex:-1,children:[e(h,{align:"center",children:u.name},u.name),e(h,{align:"center",children:u.mode?"\u89C4\u5219\u6A21\u5F0F":"\u4E3B\u673A\u6A21\u5F0F"},u.mode),e(h,{align:"center",children:u.params},u.params),s(h,{align:"center",children:[e(j,{className:l.editBtn,onClick:()=>{P(u),b(!0)},children:"\u7F16\u8F91"}),e(j,{className:l.deleteButton,onClick:()=>q(u),children:"\u5220\u9664"})]})]},u.name))})]})}),e(le,{rowsPerPageOptions:[10,25,100],labelRowsPerPage:e("div",{children:"\u6BCF\u9875\u884C\u6570:"}),labelDisplayedRows:({from:u,to:x,count:T})=>`${u}-${x} \u603B\u6570 ${T!==-1?T:0}`,component:"div",count:t.length,rowsPerPage:d,page:c,onPageChange:L,onRowsPerPageChange:K}),e(_,{open:B,title:I,text:M,toClose:O,todo:z}),e(ee,{open:r,content:R,toClose:()=>b(!1),title:"\u7F16\u8F91\u5206\u7EC4\u4FE1\u606F",todo:W})]})}const pe=(t,a)=>F(p({},a),{groupList:t.groupList}),Fe={initGroup:A.initGroupInfo,deleteGroup:A.deleteGroupInfo,addGroup:A.addGroupInfo,editGroup:A.editGroupInfo},he=t=>{const a=k(N)(),{enqueueSnackbar:n}=S(),[l,m]=i.exports.useState(""),[c,g]=i.exports.useState(""),[d,f]=i.exports.useState(""),B=r=>{m(r.target.value)},C=async()=>{if(l===""){n("\u8BF7\u9009\u62E9\u4E00\u4E2A\u6A21\u5F0F\uFF01",{autoHideDuration:3e3,variant:"warning"});return}if(l===1&&!c){n("\u9009\u4E2D\u89C4\u5219\u6A21\u5F0F, \u5339\u914D\u7684\u89C4\u5219\u4E0D\u80FD\u4E3A\u7A7A\uFF01",{autoHideDuration:3e3,variant:"warning"});return}if(!d){n("\u5206\u7EC4\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A\uFF01",{autoHideDuration:3e3,variant:"warning"});return}if(t.groupList.some(b=>b.name===d)){n("\u8BE5\u5206\u7EC4\u5DF2\u5B58\u5728\uFF01",{autoHideDuration:3e3,variant:"warning"});return}const r=await ne({name:d,mode:l,params:c});if(r.code!=="200"){n(`\u5206\u7EC4\u6DFB\u52A0\u5931\u8D25${r.msg}`,{autoHideDuration:3e3,variant:"error"});return}t.addGroup(r.data),n(`\u5206\u7EC4: ${r.data.name}\u6DFB\u52A0\u6210\u529F\uFF01`,{autoHideDuration:3e3,variant:"success"})};return s("div",{className:a.itemPage,children:[s("div",{className:a.ControlBox,children:[s(E,{className:a.Control,children:[e($,{id:"pattern-select-label",children:"\u9009\u62E9\u6A21\u5F0F"}),s(H,{labelId:"pattern-select-label",id:"pattern-select",value:l,onChange:B,children:[e(D,{value:0,children:"\u4E3B\u673A\u6A21\u5F0F"}),e(D,{value:1,children:"\u89C4\u5219\u6A21\u5F0F"})]})]}),e(E,{className:a.Control,children:e(v,{size:"small",id:"Matching-rules",label:"\u5339\u914D\u89C4\u5219",variant:"outlined",value:c,placeholder:"\u4E3B\u673A\u6A21\u5F0F\u4E0D\u7528\u6DFB\u52A0\u89C4\u5219",onChange:r=>g(r.target.value)})}),e(E,{className:a.Control,children:e(v,{size:"small",id:"grouping",label:"\u5206\u7EC4\u540D\u79F0",variant:"outlined",value:d,onChange:r=>f(r.target.value)})}),e(j,{className:a.addButton,onClick:C,children:"\u589E\u52A0\u5206\u7EC4"})]}),e("div",{className:a.shellBox,children:e(me,p({},t))})]})};var Ge=Z(pe,Fe)(he);export{Ge as default};
